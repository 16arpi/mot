<!DOCTYPE html> <html lang="ko"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=0"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="X-UA-Compatible" content="ie=edge"> <meta name="referrer" content="unsafe-url"> <meta name="title" content="수능 국어 언어와매체 44번… 평가원 “정답 이상 없어” | 한국일보"> <meta name="news_keywords" content="대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사"> <meta name="description" content="한국교육과정평가원이 2025학년도 대학수학능력시험(수능)의 문제와 정답 이의신청에 대한 심사 결과 모두 이상이 없다고 밝혔다. 평가원은 26일"> <meta name="headline" content="수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”"> <meta name="content_category" content="사회"> <meta name="content_subcategory" content="교육"> <meta name="article_type" content="일반"> <meta name="article_length" content="901"> <meta property="og:url" content="https://www.hankookilbo.com/News/Read/A2024112616470002937"> <meta property="og:site_name" content="한국일보"> <meta property="og:locale" content="ko_KR"> <meta property="og:type" content="article" > <meta property="og:title" content="수능 국어 언어와매체 44번… 평가원 “정답 이상 없어” | 한국일보" > <meta property="og:description" content="한국교육과정평가원이 2025학년도 대학수학능력시험(수능)의 문제와 정답 이의신청에 대한 심사 결과 모두 이상이 없다고 밝혔다. 평가원은 26일" > <meta property="og:image" content="https://newsimg-hams.hankookilbo.com/2024/11/26/45b8d5c1-117e-46ea-83af-23139c2076d4.jpg"> <meta property="og:image:width" content="640"> <meta property="og:image:height" content="396"> <meta property="article:author" content="https://www.facebook.com/hkilbo"> <meta property="article:publisher" content="https://www.facebook.com/hkilbo"> <meta name="twitter:site" content="@hankookilbo" > <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:url" content="https://www.hankookilbo.com/News/Read/A2024112616470002937"> <meta name="twitter:title" content="수능 국어 언어와매체 44번… 평가원 “정답 이상 없어” | 한국일보" > <meta name="twitter:description" content="한국교육과정평가원이 2025학년도 대학수학능력시험(수능)의 문제와 정답 이의신청에 대한 심사 결과 모두 이상이 없다고 밝혔다. 평가원은 26일" > <meta name="twitter:image" content="https://newsimg-hams.hankookilbo.com/2024/11/26/45b8d5c1-117e-46ea-83af-23139c2076d4.jpg"> <meta name="twitter:image:alt" content="" > <meta name="twitter:creator" content="@hankookilbo" > <meta property="article:published_time" content="2024-11-26T17:05:06.000+0900"> <meta property="article:section" content="사회"> <meta property="article:section2" content="교육"> <meta property="article:section3" content="2025학년도 대입 수능 "> <meta property="dable:item_id" content="A2024112616470002937"> <meta property="dable:author" content="강지원 기자 stylo@hankookilbo.com"> <meta property="dable:title" content="수능 국어 언어와매체 44번… 평가원 “정답 이상 없어” | 한국일보"> <meta property="dable:image" content="https://newsimg-hams.hankookilbo.com/2024/11/26/45b8d5c1-117e-46ea-83af-23139c2076d4_t.jpg"> <meta property="fb:pages" content="157370204315766" > <meta name="robots" content="max-image-preview:large"> <title>수능 국어 언어와매체 44번… 평가원 “정답 이상 없어” | 한국일보</title> <link rel="stylesheet" href="/css/lib/ion.rangeSlider.min.css"> <link rel="stylesheet" href="/css/lib/datepicker.min.css"> <link rel="stylesheet" href="/css/lib/jquery.mCustomScrollbar.min.css"> <link rel="stylesheet" href="https://front.hankookilbo.com/hk-main/prod/pc/css/style_web.css?v=2025011300"> <link rel="icon" href="/images/favicon.ico" type="image/x-icon"> <link rel="canonical" href="https://www.hankookilbo.com/News/Read/A2024112616470002937"> <link rel="amphtml" href="https://m.hankookilbo.com/News/Read/Amp/A2024112616470002937"> <link rel="stylesheet" href="https://uicdn.toast.com/tui.chart/latest/tui-chart.min.css"> <script src="/js/lib/jquery-3.7.1.min.js"></script> <script src="/js/lib/jquery-migrate-3.4.1.min.js"></script> <!-- [if lt IE 9]> <script src="/js/lib/selectivizr.min.js"></script> <![endif]--> <script src="/js/lib/modernizr-custom.js"></script> <script src="/js/lib/detectizr.min.js"></script> <script src="/js/lib/jquery.cookie.min.js"></script> <script src="/js/vendor.js"></script> <script src="https://front.hankookilbo.com/hk-main/prod/pc/js/split/popup.js"></script> <script src="/js/split/icheck.js"></script> <script src="/js/split/customScroll.js"></script> <script src="/js/article-notice.js"></script> <script src="/js/common.js?v=1fae885b6b32b6c56f4cff29a3ee5801"></script> <script src="/js/lib/hangul.min.js" type="text/javascript"></script> <script src="https://uicdn.toast.com/tui.chart/latest/tui-chart-all.min.js"></script> <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=xuh6ou62fp"></script> <script> // 기본 이미지 (function () { var NOTFOUNDSRC = '/images/Default-Image.png'; document.addEventListener('error', function (e) { // image 404 if (e.target.nodeName.toLowerCase() == 'img' && e.target.getAttribute('src') != NOTFOUNDSRC) { e.target.src = NOTFOUNDSRC; } }, true); })(); // 기사 닫기 클릭 시 돌아갈 url 정의 if ('' != 'MAIN') { fn_setCookie('closeUrl', '/', { path: '/' }); } // CDN 제외 설정 $.ajaxSetup({ beforeSend: function (xhr) { xhr.setRequestHeader("Cache-Control", "no-cache"); } }); // 체류시간 // document.cookie = 'uv_stay_id' + "=" + generateUuid() + "; path=/"; var stayId = generateUuid(); // 방문자 if (!Cookies.get('uv_user_id')) { var date = new Date(); date.setFullYear(date.getFullYear() + 1); var expireDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0); var expires = "; expires=" + expireDate.toUTCString(); // document.cookie = 'uv_user_id' + "=" + generateUuid() + expires + "; path=/"; fn_setCookie('uv_user_id', generateUuid(), {path:'/', expires: expireDate}); } // 세션 if (!Cookies.get('uv_session_id')) { var date = new Date(); date.setTime(date.getTime() + (30 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 1000 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60)); var expires = "; expires=" + date.toUTCString(); // document.cookie = 'uv_session_id' + "=" + generateUuid() + "; path=/"; fn_setCookie('uv_session_id', generateUuid(), {path: '/'}); } // 로그인 flag loggedIn = Cookies.get('accessToken'); refreshToken = Cookies.get('refreshToken'); if (loggedIn == undefined && refreshToken != undefined) { $.ajax({ url: '/auth/auto_login', type: 'POST', data: JSON.stringify({ autoLoginFlag: true }), contentType: 'application/json', timeout: 100000, success: function (data) { location.reload(); }, error: function (err) { console.log(err); } }); } </script> <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase.js"></script> <script> var isPcChrome = (-1 !== navigator.userAgent.indexOf('Chrome')); if (isPcChrome) { // Initialize Firebase var config = { apiKey: "AIzaSyCj96NqzMc42ZMLCv4GqbnKErMsqalgUng", authDomain: "hankookilbo-25efe.firebaseapp.com", databaseURL: "https://hankookilbo-25efe.firebaseio.com", projectId: "hankookilbo-25efe", storageBucket: "hankookilbo-25efe.appspot.com", messagingSenderId: "115606840922", appId: "1:115606840922:web:93245197d8f8586d46da63", measurementId: "G-2RZDGBVQK4" }; firebase.initializeApp(config); var messaging = firebase.messaging(); //token값 알아내기 messaging.requestPermission() .then(function () { // console.log("Have permission"); return messaging.getToken(); }) .then(function (token) { fn_setCookie('FCM-TOKEN', token, {path: '/'}); var cft = Cookies.get('FCM-TOKEN'); // if(!Boolean(cft)){ // Cookies.set('fid', guid(), {path: '/'}); var appuserPushId = Cookies.get('appuserPushId') fcmLoading(appuserPushId, cft); // console.log("###################### : " + token); // } }) .catch(function (arr) { console.log("Error Occured"); }); messaging.onMessage(function (payload) { console.log('Message received. ', payload); generateFcmToast(payload); // ... }); function fcmLoading(appuserPushId, token) { if (Boolean(appuserPushId)) { data = { 'appuserPushId': appuserPushId , 'appuserPushKey': token }; } else { data = { 'appuserPushId': appuserPushId , 'appuserPushKey': token , 'appuserPushAgreeyn': 'Y' , 'appuserAlarmSokbo': 'Y' , 'appuserAlarmSubscribe': 'Y' , 'appuserAlarmReply': 'Y' , 'appuserAlarmMarketing': 'Y' , 'appuserAlarmEtiquetteTime': 'Y' }; } $.ajax({ url: '/main-fcm-loading', method: 'GET', dataType: 'json', contentType: 'application/json', data: data, success: function (response) { if (response.code === '0000') { var expDate = new Date(); expDate.setTime(expDate.getTime() + (60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 365 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 1000)); fn_setCookie('appuserPushId', response.data.view.appuserPushId, {path: '/', expires: expDate}); } }, fail: function (response) { } }); } } </script> <script> window.dataLayer = window.dataLayer || []; if (Cookies.get('accessToken') !== undefined) { $.ajax({ url: '/google-analytics/user-details-decrypt', type: 'GET', contentType: 'application/json', success: function (data) { dataLayer.push({ 'event': 'user_details', 'user_id': data.user_id, 'gender': data.gender, 'yob': data.yob, 'join_date': data.join_date, 'join_type': data.join_type, 'subs': data.subs, 'pan_setting': data.pan_setting, 'agree_email': data.agree_email, 'agree_sms': data.agree_sms, 'agree_newsletter': data.agree_newsletter, 'agree_push': data.agree_push, }); }, error: function () { } }); } </script> <script> let hk_type; if (navigator.userAgent.indexOf('Mobile-App-Ios') > -1) { hk_type = "ios"; } else if (navigator.userAgent.indexOf('Mobile-App-Android') > -1) { hk_type = "android"; } else { hk_type = "pcweb"; } window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'article_view', 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': '사회', 'content_subcategory': '교육', 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '16:47:30', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:05:06', 'feature_type': '', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사', 'hk_type': hk_type }); </script> <script> /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var DM-2364 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ (function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'}); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); }) (window, document, 'script', 'dataLayer', 'GTM-P3X5QNS'); //운영 (window, document, 'script', 'dataLayer', 'GTM-WTTZBWM6'); //신규 운영 </script> <script> window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'click_in_article', 'page_type': 'article', 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': '사회', 'content_subcategory': '교육', 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '16:47:30', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:05:06', 'feature_type': '', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사' }); </script> <script src="/js/hmap/gtm-util.js"></script> <script src="/js/hmap/new-hmap.js"></script> <script type="text/javascript"> $(document).ready(function() { /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux ########################################################## URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux GTM TAG 공통 정보 조회 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux ########################################################## URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ var pathname = window.location.pathname.toLowerCase(); // 방문의 고유 식별값 (= sessionId) by gtm-util.js var userId = getUserIdFromCookie(); if (!userId) { // 쿠키에 userId 가 없는 경우 새로운 userId 생성 userId = generateUserId(); // 쿠키에 userId 저장 setUserIdToCookie(userId); } // 페이지 식별 값 (page_id), 서버에서 구성 var pageId = '20250113003848'; // 실제 방문 (사용자가 10초 이상 머물렀는 지에 대한 값) var realSession = 'no'; var realTime = 0; var realSessionInterval = setInterval(function() { realTime++; if(realTime >= 10) { realSession = 'yes'; // 10초 이상 머물렀으면, 더 이상 체크하지 않아도 되기 떄문에 setInterval 중지 clearInterval(realSessionInterval); } }, 1000); // 페이지 타입 var pageType = ''; // 기사의 부서 var contentDepart = ''; if(pathname.startsWith('/news/read')) { pageType = 'article'; contentDepart = "문화부" } else { pageType = 'non_article'; } // 로그인 여부 var loginYn = 'no'; if (Cookies.get('accessToken') !== undefined) { loginYn = 'yes'; } // 로그인 사용자 정보 조회 var userObj = {}; $.ajax({ url: '/google-analytics/user-details-decrypt', type: 'GET', contentType: 'application/json', async: false, success: function (data) { if(typeof data.user_id !== "undefined") { userObj.joinId = data.user_id; // join_id 에 member_id 주입 userObj.userId = data.user_id; userObj.gender = data.gender; userObj.age = data.yob; userObj.joinDate = data.join_date; userObj.joinType = data.join_type; userObj.subs = data.subs; userObj.panSetting = data.pan_setting; userObj.sub_content = data.sub_content; userObj.sub_content_type = data.sub_content_type; userObj.unsub_content = data.unsub_content; userObj.unsub_content_type = data.unsub_content_type; } else { userObj.joinId = ''; userObj.userId = ''; userObj.gender = ''; userObj.age = ''; userObj.joinDate = ''; userObj.joinType = ''; userObj.subs = ''; userObj.panSetting = ''; userObj.sub_content = ''; userObj.sub_content_type = ''; userObj.unsub_content = ''; userObj.unsub_content_type = ''; } } }); // 이벤트 번들 아이디 var eventBundleSeqId = window.sessionStorage.getItem('eventBundleSeqId'); if(eventBundleSeqId == null || eventBundleSeqId == undefined) { // 유닉스 타임 - 세션 Id var utime = Math.floor(new Date().getTime() / 1000); eventBundleSeqId = Number(utime) - Number(userId); window.sessionStorage.setItem('eventBundleSeqId', eventBundleSeqId); // 방문 (session_start) console.log("▶▶ gtm tag : session_start"); fnEventSessionStart(); } // 페이지뷰 (page_view) console.log('▶▶ gtm tag : page_view'); fnEventPageView(); var articleSize = '901'; $("body div:not(.end-header)").click(function(e) { // click_in_article 이벤트 fnEventClickInArticle(e); }); $("div.end-header").click(function(e) { // click_out_article 이벤트 fnEventClickOutArticle(); }); var scrolling; var isVisible = false; var scrollLocation = ""; const scrollFunc = function () { clearTimeout(scrolling); scrolling = setTimeout(() => { if (!isVisible && checkVisible('.btn-share') ) { console.log('▶▶ gtm tag : article_complete (기사 완독)'); fnEventArticleComplete(); isVisible = true; } console.log('▶▶ gtm tag : article_scroll (기사 페이지에서 일어난 스크롤)'); if (checkVisible('.sub-tit-ll')) { // 본문 첫 문단 까지 scrollLocation = "1영역"; } if (checkVisible('.ad-first')) { // 본문 첫 광고까지 scrollLocation = "2영역"; } if (checkVisible('.writer')) { // 바이라인까지 scrollLocation = "3영역"; } if (checkVisible('.comment-title')) { // 댓글까지 scrollLocation = "4영역"; } fnEventScroll('article_scroll2', scrollLocation); scrolling = undefined; }, 250); } window.addEventListener('scroll', scrollFunc); var stayTime = 0; var articleFeverInterval = setInterval(function() { // 참여시간이 예상시간(기사길이 대비)의 절반을 초과할 경우 // 계산식 : 참여시간(초) URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 평균속도 (10, 1초에 10자) / 기사길이 // 결과값이 50이 넘으면 열독으로 판단 if(Number(articleSize) > 0) { stayTime++; var result = Number(stayTime) URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 10 / Number(articleSize); if(result > Number(50)) { console.log('▶▶ gtm tag : article_fever (기사 열독)'); fnEventArticleFever(); // fever 계산이 끝나면 setInterval 종료 clearInterval(articleFeverInterval); } } }, 1000); // session_start 이벤트 function fnEventSessionStart() { var dtime = getDateTimeInfo(); var device = getDeviceInfo(); var client = getClientInfo(); var language = getClientLanguage(); var operation = getOperationInfo(); window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'session_start2', 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'engagement_time' : setEngagementTime(), 'page_id': pageId, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, 'real_session': realSession, 'login_yn': loginYn, // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId, 'gender': userObj.gender, 'age': userObj.age, 'geo': '', 'join_date': userObj.joinDate, 'first_visit': '', 'join_type': userObj.joinType, 'subs': userObj.subs, 'pan_setting': userObj.panSetting, 'user_grade': '', // 기사 속성 'article_id': '', // 디바이스 속성 'hk_type': device, 'operating_system': operation.system, 'operating_system_version': operation.system + ' ' + operation.systemVersion, 'language': language, 'browser': client.browserName, 'browser_version': client.browserVersion }); console.log(window.dataLayer); send(); } // page_view 이벤트 function fnEventPageView() { window.dataLayer = window.dataLayer || []; var dtime = getDateTimeInfo(); var headline = ''; var articleId = ''; var articleType = ''; var articleLength = ''; var firstPubleDate = ''; var firstPubleTime = ''; var lastPubleDate = ''; var lastPubleTime = ''; var articleTags = ''; var contentCategory = ''; var contentSubcategory = ''; var authorId = ''; var authorName = ''; headline = '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”'; articleId = 'A2024112616470002937'; articleType = '일반'; articleLength = '901'; firstPubleDate = '2024/11/26'; firstPubleTime = '17:23:04'; lastPubleDate = '2024/11/26'; lastPubleTime = '17:23:04'; articleTags = '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사'; contentCategory = '사회'; contentSubcategory = '교육'; authorId = 'stylo'; authorName = '강지원'; dataLayer.push({ 'event': 'page_view2', 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': realSession, 'login_yn': loginYn, 'engagement_time': setEngagementTime(), 'page_id': pageId, 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, // 기사 속성 'headline': headline, 'article_id': articleId, 'content_category': contentCategory, 'content_subcategory': contentSubcategory, 'content_depart': contentDepart == '' ? contentCategory : contentDepart, 'article_type': articleType, 'article_length': articleLength, 'author_id': authorId, 'author_name': authorName, 'first_puble_date': firstPubleDate, 'first_puble_time': firstPubleTime, 'last_puble_date': lastPubleDate, 'last_puble_time': lastPubleTime, 'feature_type': 'no', 'article_tags': articleTags, 'article_edit': '', // 사용자 속성 'join_id': userObj.joinId, 'user_id':userId }); console.log(window.dataLayer); send(); } // article_fever 이벤트 function fnEventArticleFever() { window.dataLayer = window.dataLayer || []; var dtime = getDateTimeInfo(); var contentCategory = ''; var contentSubcategory = ''; contentCategory = '사회'; contentSubcategory = '교육'; dataLayer.push({ 'event': 'article_fever2', 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': realSession, 'login_yn': loginYn, 'page_id': pageId, 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, 'engagement_time': setEngagementTime(), // 기사 속성 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': contentCategory, 'content_subcategory': contentSubcategory, 'content_depart': contentDepart == '' ? contentCategory : contentDepart, 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '17:05:06', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:23:04', 'feature_type': 'no', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사', 'article_edit': '', // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId }); console.log(window.dataLayer); send(); } // click_in_article 이벤트 function fnEventClickInArticle(_e) { var engagementTime = setEngagementTime(); var chkEvent = ''; if(window.dataLayer[window.dataLayer.length - 1] != undefined) { chkEvent = window.dataLayer[window.dataLayer.length - 1].event; } if(Number(engagementTime) < 10 && chkEvent == 'click_in_article2') { // 클릭 이벤트는 부모 태그로 이벤트 전달 (propagtion) 이 발생하기 때문에, UI 가 복잡하고 계층이 깊어질 수록 클릭 이벤트가 수십번 발생할 수 있음. // engagementTime 은 각 이벤트 사이의 시간 간격인데, 만약 10 밀리세컨트 이하로 발생하는 경우는 클릭 이벤트 전달로 간주하여 gtm 에서 제외함. (첫번째 클릭만 gtm 에 포함) // 즉, window.dataLayer 마지막 요소가 click_in_article2 타입인데 또 다시 click_in_article2 타입이 발생하면서 engagementTime가 10 밀리세컨드 이하인 경우 제외 처리. // console.log('Click Event Propagation'); } else { console.log('▶▶ gtm tag : click_in_article (기사 영역 내부 클릭)'); var stopPropagation = true; var dtime = getDateTimeInfo(); // 기사 하단 반응 유형 var reactionType = ''; if(_e.currentTarget.className === 'reaction-btns__lottie-wrap') { // 좋아요, 싫어요 버튼은 stopPropagation 적용 안함 stopPropagation = false; var btnAreaLottieIco = $(_e.currentTarget).children('span.btn-area__lottie-ico').attr('data-animation-id'); if(btnAreaLottieIco == 'lottie-heart') { reactionType = '좋아요'; } else { reactionType = '싫어요'; } } // 기사 사이드 반응 유형 if(_e.target.nodeName !== 'path') { if(_e.target.className.indexOf) { if(_e.target.className.indexOf('icon-toolbox-like') > -1) { reactionType = "좋아요"; } else if(_e.target.className.indexOf('icon-toolbox-unlike') > -1) { reactionType = "싫어요"; } } } // 푸시 메시지 내 클릭 이벤트는 stopPropagation 적용 안함 if(_e.currentTarget.className.indexOf('toast-container') > -1) { stopPropagation = false; } // 공유 유형 var shareType = ''; if($(_e.target).children('.blind').length > 0) { shareType = $(_e.target).children('.blind').text(); } // 클릭한 요소의 클래스 var clickClass = $(_e.target).attr('class'); // 클릭한 요소의 텍스트 var clickText = $(_e.target).text(); // 클릭된 페이지의 URL var clickPageUrl = ''; if($(_e.target).closest('a').attr("href") != undefined) { clickPageUrl = 'https://www.hankookilbo.com' + $(_e.target).closest('a').attr("href"); } // 클릭된 기사가 편집된 영역 var clickArticleEdit = ''; // 클릭된 기사가 편집된 영역 - 많이본 뉴스 if($(_e.target).closest(".gtm-pv-articles").length > 0) { clickArticleEdit = "좌측1영역"; } // 클릭된 기사가 편집된 영역 - 섹션 많이본 뉴스 if($(_e.target).closest(".gtm-section-pv-articles").length > 0) { clickArticleEdit = "좌측1영역"; } // 클릭된 기사가 편집된 영역 - 실시간 주요 뉴스 if($(_e.target).closest(".gtm-realtime-main-articles").length > 0) { clickArticleEdit = "좌측2영역"; } // 클릭된 기사가 편집된 영역 - 라이브 이슈 if($(_e.target).closest(".gtm-live-issues").length > 0) { clickArticleEdit = "좌측3영역"; } // 클릭된 기사가 편집된 영역 - 실시간 추천 뉴스 if($(_e.target).closest(".gtm-realtime-recommend-articles").length > 0) { clickArticleEdit = "좌측4영역"; } // 클릭된 기사가 편집된 영역 - 관련 태그 if($(_e.target).closest(".gtm-hashtag").length > 0) { clickArticleEdit = "하단1영역"; } // 클릭된 기사가 편집된 영역 - 관련 기사 if($(_e.target).closest(".gtm-related-articles").length > 0) { clickArticleEdit = "하단1영역"; } // 클릭된 기사가 편집된 영역 - 당신이 관심 있을만한 이슈 if($(_e.target).closest(".gtm-interest-issues").length > 0) { clickArticleEdit = "하단2영역"; } // 클릭된 기사가 편집된 영역 - 당신이 좋아할만한 기사 if($(_e.target).closest(".gtm-like-articles").length > 0) { clickArticleEdit = "하단3영역"; } // 클릭된 기사가 편집된 영역 - 다른 사람이 흥미롭게 읽은 기사 if($(_e.target).closest(".gtm-interest-articles").length > 0) { clickArticleEdit = "하단4영역"; } var contentCategory = ''; var contentSubcategory = ''; contentCategory = '사회'; contentSubcategory = '교육'; window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'click_in_article2', 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': realSession, 'login_yn': loginYn, 'page_id': pageId, 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, 'click_page_url': clickPageUrl, 'click_headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'click_article_id': 'A2024112616470002937', 'click_article_edit': clickArticleEdit, 'click_class': clickClass, 'click_text': clickText, 'engagement_time': engagementTime, 'share_type': shareType, 'reaction_type': reactionType, // 기사 속성 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': contentCategory, 'content_subcategory': contentSubcategory, 'content_depart': contentDepart == '' ? contentCategory : contentDepart, 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '17:05:06', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:23:04', 'feature_type': 'no', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사', 'article_edit': '', // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId, }); if(stopPropagation) { // _e.stopPropagation(); } sliceDataLayer('click_in_article'); console.log(window.dataLayer); send(); } } // click_out_article 이벤트 function fnEventClickOutArticle() { var engagementTime = setEngagementTime(); var chkEvent = ''; if(window.dataLayer[window.dataLayer.length - 1] != undefined) { chkEvent = window.dataLayer[window.dataLayer.length - 1].event; } if(Number(engagementTime) < 10 && chkEvent == 'click_out_article2') { // console.log('Click Event Propagation'); } else { console.log('▶▶ gtm tag : click_out_article (기사 영역 외부 클릭)'); var contentCategory = ''; var contentSubcategory = ''; contentCategory = '사회'; contentSubcategory = '교육'; window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'click_out_article2', // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': '', 'login_yn': loginYn, 'page_id': '', 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, 'engagement_time': engagementTime, 'click_class': '', 'click_text': '', //콘텐츠 속성 'sub_content': userObj.sub_content, 'sub_content_type': userObj.sub_content_type, 'unsub_content': userObj.unsub_content, 'unsub_content_type': userObj.unsub_content_type, 'login_type': '', 'login_keep': '', // 기사 속성 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': contentCategory, 'content_subcategory': contentSubcategory, 'content_depart': '', 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '17:05:06', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:23:04', 'feature_type': 'no', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사', 'article_edit': '', // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId, 'gender': userObj.gender, 'age': userObj.age, 'geo': '', 'join_date': userObj.joinDate, 'first_visit': '', 'join_type': userObj.joinType, 'subs': userObj.subs, 'pan_setting': userObj.panSetting, 'user_grade': '' }); sliceDataLayer('click_out_article'); console.log(window.dataLayer); send(); } } // article_complete 이벤트 function fnEventArticleComplete() { window.dataLayer = window.dataLayer || []; var dtime = getDateTimeInfo(); var contentCategory = ''; var contentSubcategory = ''; contentCategory = '사회'; contentSubcategory = '교육'; dataLayer.push({ 'event': 'article_complete2', 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': realSession, 'login_yn': loginYn, 'engagement_time': setEngagementTime(), 'page_id': pageId, 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, // 기사 속성 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': contentCategory, 'content_subcategory': contentSubcategory, 'content_depart': contentDepart == '' ? contentCategory : contentDepart, 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '17:05:06', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:23:04', 'feature_type': 'no', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사', 'article_edit': '', // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId }); console.log(window.dataLayer); send(); } // click_non_article 이벤트 function fnEventClickNonArticle(_e) { var engagementTime = setEngagementTime(); if(Number(engagementTime) < 10) { // console.log('Click Event Propagation'); } else { console.log('▶▶ gtm tag : click_non_article (비 기사 영역에서 일어난 클릭)'); window.dataLayer = window.dataLayer || []; var dtime = getDateTimeInfo(); // 클릭한 요소의 클래스 var clickClass = $(_e.target).attr('class'); // 클릭한 요소의 텍스트 var clickText = $(_e.target).text(); // 클릭된 페이지의 URL var clickPageUrl = ''; if($(_e.target).closest('a').attr("href") != undefined) { clickPageUrl = 'https://www.hankookilbo.com' + $(_e.target).closest('a').attr("href"); } dataLayer.push({ 'event': 'click_non_article2', 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': realSession, 'login_yn': loginYn, 'page_id': pageId, 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, 'engagement_time': engagementTime, 'click_page_url': clickPageUrl, 'click_headline': '', 'click_article_id': '', 'click_article_edit': '', 'click_class': clickClass, 'click_text': clickText, //콘텐츠 속성 'sub_content': userObj.sub_content, 'sub_content_type': userObj.sub_content_type, 'unsub_content': userObj.unsub_content, 'unsub_content_type': userObj.unsub_content_type, 'login_type': '', 'login_keep': '', // 기사 속성 'article_id': '', // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId, 'gender': userObj.gender, 'age': userObj.age, 'geo': '', 'join_date': userObj.joinDate, 'first_visit': '', 'join_type': userObj.joinType, 'subs': userObj.subs, 'pan_setting': userObj.panSetting, 'user_grade': '' }); sliceDataLayer('click_non_article'); console.log(window.dataLayer); send(); } } // scroll 이벤트 function fnEventScroll(eventType, _scrollLocation) { var dtime = getDateTimeInfo(); window.dataLayer = window.dataLayer || []; // 스크롤 현재 위치 var totalHeight = Number($(document).height()) - Number($(window).height()); var currentHeight = document.documentElement.scrollTop; var scrollDepth = (currentHeight / totalHeight) URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 100; var articleId = ''; if(eventType == 'article_scroll2') { articleId = 'A2024112616470002937' } dataLayer.push({ 'event': eventType, 'event_date': dtime.substring(0, 8), 'event_timestamp': dtime.substr(9), // 활동 속성 'session_id': userId, 'event_bundle_seq_id': eventBundleSeqId, 'real_session': realSession, 'login_yn': loginYn, 'engagement_time': setEngagementTime(), 'page_id': pageId, 'page_type': pageType, 'page_title': document.title, 'page_referrer': document.referrer, 'page_location': window.location.href, 'scroll_depth' : Number(scrollDepth.toFixed()), 'scroll_location' : _scrollLocation, // 기사 속성 'article_id': articleId, // 사용자 속성 'join_id': userObj.joinId, 'user_id': userId }); sliceDataLayer(eventType); console.log(window.dataLayer); send(); } }); </script><script type="application/ld+json"> { "@context": "https://schema.org", "@type": "WebSite", "@id": "https://hankookilbo.com", "url": "https://hankookilbo.com", "potentialAction": [{ "@type": "SearchAction", "target": "https://search.hankookilbo.com/Search?searchText={searchText}", "query-input": { "@type": "PropertyValueSpecification", "valueRequired": true, "valueMaxlength": 100, "valueName": "searchText" } }] } </script> <script type="application/ld+json">{ "@context" : "https://schema.org", "@type" : "NewsArticle", "description" : "한국교육과정평가원이 2025학년도 대학수학능력시험(수능)의 문제와 정답 이의신청에 대한 심사 결과 모두 이상이 없다고 밝혔다. 평가원은 26일", "image" : [ { "@context" : "https://schema.org", "@type" : "ImageObject", "url" : "https://newsimg-hams.hankookilbo.com/2024/11/26/45b8d5c1-117e-46ea-83af-23139c2076d4.jpg", "width" : 640, "height" : 396 } ], "video" : [ ], "mainEntityOfPage" : "https://hankookilbo.com/News/Read/A2024112616470002937", "url" : "https://hankookilbo.com/News/Read/A2024112616470002937", "inLanguage" : "kr", "author" : [ { "@context" : "https://schema.org", "@type" : "Person", "name" : "강지원", "url" : "https://hankookilbo.com/jpage/stylo" } ], "dateModified" : "2024-11-26T17:23:04.000+0900", "datePublished" : "2024-11-26T17:05:06.000+0900", "headline" : "수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”", "alternativeHeadline" : "", "publisher" : { "@context" : "https://schema.org", "@id" : "https://hankookilbo.com/#publisher", "@type" : "Organization", "name" : "한국일보", "logo" : { "@context" : "https://schema.org", "@type" : "ImageObject", "url" : "https://front.hankookilbo.com/hk-main/prod/pc/images/gnb_logo.png", "height" : 144, "width" : 52 } }, "copyrightHolder" : { "@id" : "https://hankookilbo.com/#publisher" }, "sourceOrganization" : { "@id" : "https://hankookilbo.com/#publisher" } }</script> <div class="toast-container imp-toast"> <!-- 로그인/회원가입 --> <div class="toast-item login-box-tst"> <div class="toast-inner"> <div class="tit"> <p>읽는 재미의 발견</p> <p>새로워진 한국일보<a href="javascript:openSignInPopUp();" class="more-txt">로그인/회원가입</a></p> </div> <ul class="desc"> <li>관심과 취향에 맞게 내맘대로 메인 뉴스 설정</li> <li>구독한 콘텐츠는 마이페이지에서 한번에 모아보기</li> <li>속보, 단독은 물론 관심기사와 활동내역까지 알림</li> </ul> <a href="/Intro/Intro2022" class="join-button">자세히보기</a> <button class="close a11y" onclick="fnOneDayNotView()">닫기</button> </div> </div> </div> <script type="text/javascript"> var $loginBox = $('.toast-container .toast-item.login-box-tst'); var $PUSH_TYPE = { SOKBO : { class: "sokbo-mark", name: "속보" }, EXCLUSIVE : { class: "exclusive-mark", name: "단독" }, SUBSCRIBE : { class: "subscribe-mark", name: "구독" }, REACTION : { class: "reaction-mark", name: "공감" }, COMMON : { class: "common-mark", name: "주요" }, NOTICE : { class: "notice-mark", name: "공지" }, EVENT : { class: "event-mark", name: "알림" }, REPLY : { class: "reply-mark", name: "답글" }, REPLY_RE : { class: "reply-re-mark", name: "댓글" }, RECOMMEND : { class: "recommend-mark", name: "추천" } }; generateSokboToast = function(redisJson) { var readArticles = decodeURIComponent(this.getFCMCookie('hk_sokbo_article_viewend')); var denialAlarmType = decodeURIComponent(this.getFCMCookie('hk_denial_alarm_type')); for (var i = 0; i < redisJson.length; i++){ var expire_time = moment(redisJson[i].expire_time, 'YYYY-MM-DD HH:mm:ss').format('YYYY-MM-DD HH:mm:ss'); var now = moment().format('YYYY-MM-DD HH:mm:ss'); var isNowDeploy = moment(expire_time).isAfter(now); if(!isNowDeploy){ return false; } if(readArticles.includes(redisJson[i].article_id) || denialAlarmType.includes(redisJson[i].article_type)){ break; } var html = ''; html += '<div class="toast-item" data-push-id="'+ redisJson[i].apppush_Id +'">'; html += ' <div class="toast-inner-wrapper">'; html += ' <div class="title">'; if(Object.keys($PUSH_TYPE).indexOf(redisJson[i].article_type) > -1){ html += ' <span class="badge '+ $PUSH_TYPE[redisJson[i].article_type].class +'">'+ $PUSH_TYPE[redisJson[i].article_type].name +'</span>'; } if(redisJson[i].article_title.trim() !== "한국일보"){ if(redisJson[i].article_type === "REPLY_RE"){ html += ' <h4 class="title-text"><a href="/webpool-click/?i='+redisJson[i].apppush_Id+'&c='+redisJson[i].article_id+'">' + redisJson[i].article_title.replace("댓글 10개", "<strong>댓글 10개</strong>") + '</a></h4>'; }else if(redisJson[i].article_type === "REACTION"){ html += ' <h4 class="title-text"><a href="/webpool-click/?i='+redisJson[i].apppush_Id+'&c='+redisJson[i].article_id+'">' + redisJson[i].article_title.replace("공감 10개", "<strong>공감 10개</strong>") + '</a></h4>'; }else if(redisJson[i].article_type === "REPLY" ){ html += ' <h4 class="title-text"><a href="/webpool-click/?i='+redisJson[i].apppush_Id+'&c='+redisJson[i].article_id+'">' + redisJson[i].article_title.replace("답글", "<strong>답글</strong>") + '</a></h4>'; }else { html += ' <h4 class="title-text"><a href="/webpool-click/?i='+redisJson[i].apppush_Id+'&c='+redisJson[i].article_id+'">' + redisJson[i].article_title + '</a></h4>'; } } html += ' </div>' html += ' <div class="contents">'; if(Object.keys($PUSH_TYPE).indexOf(redisJson[i].article_type) > -1){ html += ' <a href="/webpool-click/?i='+redisJson[i].apppush_Id+'&c='+redisJson[i].article_id+'"><p>' + redisJson[i].article_contents.replace(new RegExp("\\["+ $PUSH_TYPE[redisJson[i].article_type].name +"\\]" , "g"), "") + '</p></a>'; } else { html += ' <a href="/webpool-click/?i='+redisJson[i].apppush_Id+'&c='+redisJson[i].article_id+'"><p>' + redisJson[i].article_contents + '</p></a>'; } if(redisJson[i].article_image !== '' || redisJson[i].article_image !== null){ html += ' <div class="img-box">'; html += ' <img onerror="this.src=\'/images/breaking_default_image_s.jpg\';" src="' + redisJson[i].article_image + '" alt="">'; html += ' </div>'; } html += ' </div>'; html += ' </div>'; html += ' <div class="actions">'; html += ' <button type="button" class="btn-alarm" data-denial="' + redisJson[i].article_type +'">알림설정</button>'; html += ' <button type="button" class="btn-close">알림 닫기</button>'; html += ' </div>'; html += '</div>'; $loginBox.before(html); autoRemoveToast(redisJson[i].apppush_Id); // 만료시간체크 : 존재하면 내용 분석하여 만료시간이 현재시간이내이면 노출 // 쿠키노출체크 : 노출할경우 쿠키에 해당 기사 노출확인후 최종 노출 // 노출한 경우 해당기사키 쿠키에 저장 // 쿠키명 : hk_sokbo_article_viewend var fcmArticleId = getFCMCookie('hk_sokbo_article_viewend'); var cookieData = Boolean(fcmArticleId) ? decodeURIComponent(fcmArticleId) + ',' + redisJson[i].article_id : redisJson[i].article_id; this.setFCMCookie('hk_sokbo_article_viewend', cookieData, 1); // 쿠키내용 : 기사키,기사키,기사키 // 쿠키만료시간 : 1일 // 쿠키 등록 } $(".toast-container .toast-item:not(.login-box-tst)").addClass("show"); } // 비 로그인, 알람박스 generateSokboAlarm = function(redisJson) { // (비로그인) 알람 박스 컨테이너 var alarmListPop = $('.user-attention-popup.unlogged .attention-list'); var totalCnt = redisJson.length; if (totalCnt > 0) { alarmListPop.html(""); for (var i = 0; i < redisJson.length; i++) { // 최대 5개까지 노출 if (i < 5) { var article = redisJson[i]; /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var 알람 컨텐츠 포맷 <li> <a href="#"> <mark class="exclusive-mark">단독</mark> <div class="attention-title"> <h5>의료 에세이, 환자 얘기 편취 않도록 세부적인 가이드라인 필요</h5> <p class="date">6분 전</p> </div> <div class="img-box"> <img src="../../images/improve/article-image-sample-02-270-180.png" alt=""> </div> </a> </li> URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ var li = $("<li />"); var a = $("<a />").attr("href", "/News/Read/" + article.article_id); var markCls = ""; var markTxt = ""; if (article.article_type == "EXCLUSIVE") { markCls = "exclusive-mark"; markTxt = "단독"; } else { markCls = "sokbo-mark"; markTxt = "속보"; } // 본문 내용에서 [속보] [긴급] 을 제외한다. var articleContent = article.article_contents.replace(new RegExp("\\["+ $PUSH_TYPE[redisJson[i].article_type].name +"\\]" , "g"), ""); var mark = $("<mark />").addClass(markCls).text(markTxt); var div1 = $("<div />").addClass("attention-title"); $("<h5 />").text(articleContent).appendTo(div1); // yyyyMMddHHmmss 를 yyyy-MM-dd HH:mm:ss 로 변환한다. var expire_time = moment(article.expire_time, 'YYYY-MM-DD HH:mm:ss').format('YYYY-MM-DD HH:mm:ss'); var deploy_time = new Date(expire_time); // expire_time 은 기사 출고일시 + 30분 으로 셋팅되기 때문에 30분 전으로 되돌린다. deploy_time.setMinutes(deploy_time.getMinutes() - 30); // 경과 시간 구하기 (몇 분전, 몇 시간전) var diffTxt = fnElapsedTime(deploy_time.getTime()); $(a).attr("data-time", new Date(expire_time).getTime()); $("<p />").addClass("date").text(diffTxt).appendTo(div1); mark.appendTo(a); div1.appendTo(a); if(!fnIsEmpty(article.article_image)) { var div2 = $("<div />").addClass("img-box"); $("<img />").attr("src", article.article_image).attr("alt", "").appendTo(div2); div2.appendTo(a); } a.appendTo(li); li.appendTo(alarmListPop); } } } } generateFcmToast = function(rst) { var html = ''; var readArticles = decodeURIComponent(this.getFCMCookie('hk_sokbo_article_viewend')); var denialAlarmType = decodeURIComponent(this.getFCMCookie('hk_denial_alarm_type')); if(denialAlarmType.includes(denialAlarmType.includes(rst.data.apppush_type))){ return false; } if(readArticles.includes(denialAlarmType.includes(rst.data.apppush_type))){ return false; } var appuserPushId = Cookies.get('appuserPushId'); html += '<div class="toast-item" data-push-id="'+ rst.fcmMessageId +'">'; html += ' <div class="toast-inner-wrapper">'; html += ' <div class="title">'; if(Object.keys($PUSH_TYPE).indexOf(rst.data.apppush_type) > -1){ html += ' <span class="badge '+ $PUSH_TYPE[rst.data.apppush_type].class +'">'+ $PUSH_TYPE[rst.data.apppush_type].name +'</span>'; } if(rst.notification.title.trim() !== "한국일보"){ if(rst.data.apppush_type === "REPLY_RE"){ html += ' <h4 class="title-text"><a href="'+ rst.data.uri + '&a=' + appuserPushId +'">' + rst.notification.title.replace("댓글 10개", "<strong>댓글 10개</strong>") + '</a></h4>'; }else if(rst.data.apppush_type === "REACTION"){ html += ' <h4 class="title-text"><a href="'+ rst.data.uri + '&a=' + appuserPushId +'">' + rst.notification.title.replace("공감 10개", "<strong>공감 10개</strong>") + '</a></h4>'; }else if(rst.data.apppush_type === "REPLY" ){ html += ' <h4 class="title-text"><a href="'+ rst.data.uri + '&a=' + appuserPushId +'">' + rst.notification.title.replace("답글", "<strong>답글</strong>") + '</a></h4>'; }else{ html += ' <h4 class="title-text"><a href="'+ rst.data.uri + '&a=' + appuserPushId +'">' + rst.notification.title + '</a></h4>'; } } html += ' </div>'; html += ' <div class="contents">'; if(Object.keys($PUSH_TYPE).indexOf(rst.data.apppush_type) > -1){ html += ' <a href="'+ rst.data.uri + '&a=' + appuserPushId +'"><p>' + rst.notification.body.replace(new RegExp("\\["+ $PUSH_TYPE[rst.data.apppush_type].name +"\\]" , "g"), "") + '</p></a>'; } else { html += ' <a href="'+ rst.data.uri + '&a=' + appuserPushId +'"><p>' + rst.notification.body + '</p></a>'; } if(rst.data.image !== '' || rst.data.image !== null){ html += ' <div class="img-box">'; html += ' <img src="' + rst.data.image + '" alt="">'; html += ' </div>'; } html += ' </div>'; html += ' </div>'; html += ' <div class="actions">'; html += ' <button type="button" class="btn-alarm" data-denial="' + rst.data.apppush_type +'">알림설정</button>'; html += ' <button type="button" class="btn-close">알림 닫기</button>'; html += ' </div>'; html += '</div>'; $loginBox.before(html); autoRemoveToast(rst.fcmMessageId); // 만료시간체크 : 존재하면 내용 분석하여 만료시간이 현재시간이내이면 노출 // 쿠키노출체크 : 노출할경우 쿠키에 해당 기사 노출확인후 최종 노출 // 노출한 경우 해당기사키 쿠키에 저장 // 쿠키명 : hk_sokbo_article_viewend // let fcmArticleId = getFCMCookie('hk_sokbo_article_viewend'); // let cookieData = Boolean(fcmArticleId) ? decodeURIComponent(fcmArticleId) + ',' + redisJson.articles[i].article_id : redisJson.articles[i].article_id; // this.setFCMCookie('hk_sokbo_article_viewend', cookieData, 1); // 쿠키내용 : 기사키,기사키,기사키 // 쿠키만료시간 : 1일 // 쿠키 등록 $(".toast-container .toast-item:not(.login-box-tst)").addClass("show"); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var top notice EVT URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function closeNotice() { $("#topNotiArea .close").on('click', function () { $("#topNotiArea .close").css("display", "none"); $("#topNotiArea").slideUp(500); }); } function showAlarm() { var redisJson = []; $.ajax({ url: "https://api.hankookilbo.com/api/readredis", // url: "https://stg-api.hankookilbo.com/api/readredis", // url: "http://localhost:8203/api/readredis", method: "POST", data: {'key' : 'whk_sokbo_article'}, success: function (response) { if(response.code === '0000'){ if(response.data !== 'notfound'){ redisJson = JSON.parse(response.data); // Redis 과거 기사 필터링 redisJson = redisSokboFilter(redisJson); // 하단 토스트 레이어 팝업창 generateSokboToast(redisJson); if (Cookies.get('accessToken') == undefined) { // 비로그인 경우만 호출 generateSokboAlarm(redisJson); } // 새로운 알람 개수 표시 newAlarmCnt(redisJson); // Cookie 과거 기사 필터링 cookieSokboFilter(); } } }, fail: function (err) { } }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 새로운 (읽지 않은) 알람 개수 표시 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function newAlarmCnt(redisJson) { $(".side-menu-pnl span.cnt").text(""); var alarmBoxArticle = getFCMCookie("hk_alarmBox_article"); var cntNum = 0; // 최신 날짜 순 정렬 const sort = redisJson.sort((a, b) => Number(b.expire_time) - Number(a.expire_time)); // 최신 기사 5개만 $.each(redisJson, function(idx, article) { if(idx < 5) { if (alarmBoxArticle.indexOf(article.article_id) !== -1) { // 존재함, 기사 읽음 } else { cntNum++; } } }); if (cntNum > 0) { // 알람 개수 표시 최대 5개 cntNum = cntNum > 5 ? 5 : cntNum; $(".side-menu-pnl span.cnt").text(cntNum); $(".side-menu-pnl span.cnt").show(); } else { $(".side-menu-pnl span.cnt").hide(); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 단독/속보 cookie 데이터 필터링 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 당일 기준 과거 기사가 존재하는 경우 제외 처리 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function cookieSokboFilter() { // 당일 기준 시간 (ex> 2024-11-12 00:00:00) var today = new Date(new Date().setHours(0, 0, 0, 0)); var alarmBoxArticle = getFCMCookie("hk_alarmBox_article"); // ex> A2024110612140003288=1731306606000:A2024110612140003232=1731306246000:A2024110612140003235=1731302646000 var alarmBoxArticleList = alarmBoxArticle.split(":"); var alarmBoxArticleCookies = ''; if (!fnIsEmpty(alarmBoxArticleList)) { alarmBoxArticleList.forEach(article => { var deploy_time = article.split("=")[1]; if (today.getTime() < deploy_time) { // 유효한 데이터만 다시 담아서 Cookie Set 한다 alarmBoxArticleCookies += article + ":"; } }); if (alarmBoxArticleCookies.length > 0) { alarmBoxArticleCookies = alarmBoxArticleCookies.substring(0, alarmBoxArticleCookies.length - 1); } setFCMCookie('hk_alarmBox_article', alarmBoxArticleCookies, 1); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 단독/속보 redis (whk_sokbo_article) json 데이터 필터링 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 당일 기준 과거 기사가 존재하는 경우 제외 처리 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function redisSokboFilter(redisJson) { // 당일 기준 시간 (ex> 2024-11-12 00:00:00) var today = new Date(new Date().setHours(0, 0, 0, 0)); // 당일 이후 출고된 기사만 필터링 (Redis) var alarmListFilter = []; for (var i = 0; i < redisJson.articles.length; i++) { var article = redisJson.articles[i]; // 속보 & 단독 기사만 if (article.article_type == 'SOKBO' || article.article_type == 'EXCLUSIVE') { var expire_time = moment(article.expire_time, 'YYYY-MM-DD HH:mm:ss').format('YYYY-MM-DD HH:mm:ss'); var deploy_time = new Date(expire_time); // expire_time 은 기사 출고일시 + 30분 으로 셋팅되기 때문에 30분 전으로 되돌린다. deploy_time.setMinutes(deploy_time.getMinutes() - 30); // 출고일시가 당일보다 미래인 경우만 표시 if(moment(deploy_time).isAfter(today)) { alarmListFilter.push(article); } } } return alarmListFilter; } // hk_denial_alarm_type function setDenialAlarmType(denialType){ this.setFCMCookie('hk_denial_alarm_type', denialType, 1); } function getFCMCookie(key){ key = new RegExp(key + '=([^;]*)'); return key.test(document.cookie) ? unescape(RegExp.$1) : ''; // 인자로 받은 키에 해당하는 키가 있으면 값을 반환 } function setFCMCookie(key, value, expiredays) { var todayDate = new Date(); todayDate.setDate(todayDate.getDate() + expiredays); // 현재 시각 + 일 단위로 쿠키 만료 날짜 변경 //todayDate.setTime(todayDate.getTime() + (expiredays URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 1000)); // 밀리세컨드 단위로 쿠키 만료 날짜 변경 document.cookie = key + "=" + escape(value) + "; path=/; expires=" + todayDate.toGMTString() + ";"; } function deleteCookie(name) { document.cookie = name + '=; expires=Thu, 01 Jan 1999 00:00:10 GMT;'; } function hideAlarm() { $(document).on("click", '.imp-toast .btn-close', function () { var $this = $(this); $this.parents(".toast-item").removeClass("show").addClass("hide"); }); $(document).on("click", '.login-box-tst .close', function () { $('.login-box-tst').removeClass("show").addClass("hide"); }); } function toggleAlarm() { $(document).on("click", '.imp-toast .btn-alarm', function () { var $this = $(this); if (!($this.hasClass("btn-alarm-disable"))) { $this.addClass("btn-alarm-disable"); console.log('### ' + $this.data('denial')); var denialType = $this.data('denial'); var hk_denial_alarm_type = getFCMCookie('hk_denial_alarm_type'); if(hk_denial_alarm_type.includes(denialType)) { return false; } denialType = Boolean(hk_denial_alarm_type) ? decodeURIComponent(hk_denial_alarm_type) + ',' + denialType : denialType; setDenialAlarmType(denialType); } else { $this.removeClass("btn-alarm-disable"); var hk_denial_alarm_type = getFCMCookie('hk_denial_alarm_type'); var denialType = $this.data('denial'); if(hk_denial_alarm_type.includes(denialType)){ var str = hk_denial_alarm_type; var arr = str.split(','); var filtered = arr.filter((element) => element !== denialType); deleteCookie('hk_denial_alarm_type'); setDenialAlarmType(filtered.join()); } } }); } function fnOneDayNotView(){ this.setFCMCookie('hk_denial_login_area', 'Y', 1); } function loginInfoView(){ if(!Boolean(Cookies.get('accessToken'))){ if(!Boolean(getFCMCookie('hk_denial_login_area'))){ var $loginBox = $('.toast-container .toast-item.login-box-tst'); $loginBox.addClass("show"); } } } // 웹푸시 자동삭제(10분) var FCM_TOAST_LOG = {}; function autoRemoveToast(fcmMessageId){ FCM_TOAST_LOG[fcmMessageId] = setTimeout(function(){ $(".toast-item[data-push-id='"+ fcmMessageId +"']").find('.btn-close').trigger("click"); delete FCM_TOAST_LOG[fcmMessageId]; }, 600000); }; $(function () { showAlarm(); // 상단 탑 노티영역 닫기 closeNotice(); loginInfoView(); // 푸시알람 표시 // initAlarm(); // 속보 / 단건 조회 setInterval( () => showAlarm() , 1000 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 1 ); // 푸시알람 닫기, 알람끄기 토글 hideAlarm(); toggleAlarm(); /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var 토스트 알림창 테스트 코드 var toastTest = {}; var data = {}; data.apppush_type = "SUBSCRIBE"; data.click_uri = "/News/Read/A2024120810130002004"; data.uri = "/push-click?i=123&c=456"; data.image = "https://newsimg.hankookilbo.com/cms/articlerelease/2024/12/08/2c6f1669-f914-4e6d-81cd-2acc1f09f03d.jpg"; var notification = {}; notification.body = "[구독][News & Good] 2ml 에센스, 미니 쿠션, 스틱형 세안제 ... '미니' 화장품 전송시대"; notification.title = "한국일보"; toastTest.data = data; toastTest.fcmMessageId = "8dba8593-f3a6-469c-b524-d58f91434bf5"; toastTest.from = '115606840922' toastTest.notification = notification; generateFcmToast(toastTest);*/ }); </script><!-- AS-IS 알림 이어 보기 기능 toast popup으로 올라 오게 기능 구현 --> <!-- 신규 요건이 없어 일단 기능만 살려서 toast popup으로 호출 되게 구현 후 주석 처리--> <!-- 퍼블 및 알림 해제, 자동 삭제 처리 기능 구현 해야됨 일단 toast popup으로 올라오게만 처리 해달라고 했음--> <script type="text/javascript" src="//send.mci1.co.kr/delivery/js/30000392/22176912384" async></script> <!-- google ad sence --> <script data-ad-client="ca-pub-2704741335862169" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script data-ad-client="ca-pub-9575884151581415" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2926858550121041" crossorigin="anonymous"></script> <!-- Global site tag (gtag.js) - Google Analytics --> <script> var _searchHost = ''; try{ _searchHost = 'https://search.hankookilbo.com'; }catch(e){ _searchHost = 'https://search.hankookilbo.com'; } </script> <!-- taboola --> <script> window._taboola = window._taboola || []; _taboola.push({article:'auto'}); !function (e, f, u, i) { if (!document.getElementById(i)){ e.async = 1; e.src = u; e.id = i; f.parentNode.insertBefore(e, f); } }(document.createElement('script'), document.getElementsByTagName('script')[0], '//cdn.taboola.com/libtrc/hankookilbo-desktop/loader.js', 'tb_loader_script'); if(window.performance && typeof window.performance.mark == 'function') {window.performance.mark('tbl_ic');} </script> <!-- GA4 articleComplete --> <script> window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'article_complete', 'page_type': 'article', 'headline': '수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”', 'article_id': 'A2024112616470002937', 'content_category': '사회', 'content_subcategory': '교육', 'article_type': '일반', 'article_length': '901', 'author_id':'stylo', 'author_name': '강지원', 'first_puble_date': '2024/11/26', 'first_puble_time': '16:47:30', 'last_puble_date': '2024/11/26', 'last_puble_time': '17:05:06', 'feature_type': '', 'article_tags': '대학수학능력시험 문제,정답 이의신청,복수 정답 논란,국어영역 선택과목,이의심사위원회 심사' }); </script> <style> .module-slider .img-box img, .module-vs .img-list .img-box img, .module-intro .img-box img { width: 100% !important; height: 100% !important; padding: 0; } </style> <!-- Dable 스크립트 / 문의 media@dable.io --> <script> (function(d,a,b,l,e,_) { d[b]=d[b]||function(){(d[b].q=d[b].q||[]).push(arguments)};e=a.createElement(l); e.async=1;e.charset='utf-8';e.src='//static.dable.io/dist/plugin.min.js'; _=a.getElementsByTagName(l)[0];_.parentNode.insertBefore(e,_); })(window,document,'dable','script'); dable('setService', 'hankookilbo.com'); dable('sendLogOnce'); </script> </head> <body> <input type="hidden" id="fileServer" value="https://newsimg.hankookilbo.com"/> <!-- Google Tag Manager (noscript) --> <noscript> <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P3X5QNS" height="0" width="0" style="display:none;visibility:hidden"> </iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <!-- wrap --> <div class="wrap imp-end"> <!-- .container .end --> <!-- end: end 페이지 기본 --> <div class="container end-uni "> <!-- .end-header --> <div class="end-header"> <!-- .col-left --> <div class="col-left"> <a href="javascript:onClickLogo()" class="logo"> <span class="blind">한국일보</span> </a> <div class="wrap-dep1"> <div class="depth1-grp clearfix"> <button class="innerlink depth1-grp-tit"> 사회</button> </div> <div class="slt-panel"> <ul class="slt-grp"> <li class="item step1"><a href="/News/Politics" class="innerlink">정치</a></li> <li class="item step1"><a href="/News/Economy" class="innerlink">경제</a></li> <li class="item step1"><a href="/News/Society" class="innerlink">사회</a></li> <li class="item step1"><a href="/News/World" class="innerlink">국제</a></li> <li class="item step1"><a href="/News/Culture" class="innerlink">문화</a></li> <li class="item step2"><a href="/News/Enter" class="innerlink">연예</a></li> <li class="item step2"><a href="/Sports" class="innerlink">스포츠</a></li> <li class="item step2"><a href="/News/People" class="innerlink">사람</a></li> <li class="item step2"><a href="/News/Life" class="innerlink">라이프</a></li> <li class="item step3"><a href="/Opinion" class="innerlink">오피니언</a></li> <li class="item step3"><a href="/my/subscriptionChannelMain/ALL" class="innerlink">구독<sup class="hk-color">+</sup></a></li> </ul> </div> <nav class="wrap-dep2 clearfix"> <ul class="depth2-pnl clearfix"> <!-- .col-menu --> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Politics" class="innerlink">정치</a></dt> <dd><a href="/News/Politics/HA01" class="innerlink">국회/정당</a></dd> <dd><a href="/News/Politics/HA02" class="innerlink">대통령실</a></dd> <dd><a href="/News/Politics/HA03" class="innerlink">외교</a></dd> <dd><a href="/News/Politics/HA04" class="innerlink">국방/북한</a></dd> <dd><a href="/News/Politics/HA99" class="innerlink">정치일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Economy" class="innerlink">경제</a></dt> <dd><a href="/News/Economy/HB01" class="innerlink">경제정책</a></dd> <dd><a href="/News/Economy/HB02" class="innerlink">산업</a></dd> <dd><a href="/News/Economy/HB03" class="innerlink">금융/증권</a></dd> <dd><a href="/News/Economy/HB04" class="innerlink">부동산</a></dd> <dd><a href="/News/Economy/HB05" class="innerlink">IT/과학</a></dd> <dd><a href="/News/Economy/HB99" class="innerlink">경제일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Society" class="innerlink">사회</a></dt> <dd><a href="/News/Society/HC01" class="innerlink">사건/사고</a></dd> <dd><a href="/News/Society/HC02" class="innerlink">법원/경찰</a></dd> <dd><a href="/News/Society/HC03" class="innerlink">교육</a></dd> <dd><a href="/News/Society/HC04" class="innerlink">노동</a></dd> <dd><a href="/News/Society/HC05" class="innerlink">보건/복지</a></dd> <dd><a href="/News/Society/HC06" class="innerlink">날씨/환경</a></dd> <dd><a href="/News/Society/HC99" class="innerlink">사회일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/World" class="innerlink">국제</a></dt> <dd><a href="/News/World/HD01" class="innerlink">아시아/호주</a></dd> <dd><a href="/News/World/HD02" class="innerlink">미국/중남미</a></dd> <dd><a href="/News/World/HD03" class="innerlink">유럽</a></dd> <dd><a href="/News/World/HD04" class="innerlink">중동/아프리카</a></dd> <dd><a href="/News/World/HD05" class="innerlink">글로벌 이슈</a></dd> <dd><a href="/News/World/HD99" class="innerlink">국제일반 </a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Culture" class="innerlink">문화</a></dt> <dd><a href="/News/Culture/HE01" class="innerlink">책</a></dd> <dd><a href="/News/Culture/HE02" class="innerlink">공연/전시</a></dd> <dd><a href="/News/Culture/HE99" class="innerlink">문화일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Enter" class="innerlink">연예</a></dt> <dd><a href="/News/Culture/HF99" class="innerlink">연예일반</a></dd> <dd><a href="/News/Culture/HF02" class="innerlink">영화</a></dd> <dd><a href="/News/Culture/HF03" class="innerlink">방송</a></dd> <dd><a href="/News/Culture/HF04" class="innerlink">음악</a></dd> <dd><a href="/News/Culture/HF05" class="innerlink">실시간 연예</a></dd> <dd><a href="/News/Culture/HF06" class="innerlink">포토 뉴스</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/Sports" class="innerlink">스포츠</a></dt> <dd><a href="/News/Sports/HG01" class="innerlink">야구</a></dd> <dd><a href="/News/Sports/HG02" class="innerlink">축구</a></dd> <dd><a href="/News/Sports/HG03" class="innerlink">농구</a></dd> <dd><a href="/News/Sports/HG04" class="innerlink">배구</a></dd> <dd><a href="/News/Sports/HG05" class="innerlink">해외스포츠</a></dd> <dd><a href="/News/Sports/HG06" class="innerlink">골프</a></dd> <dd><a href="/News/Sports/HG12" class="innerlink">바둑</a></dd> <dd><a href="/News/Sports/HG99" class="innerlink">스포츠일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/People" class="innerlink">사람</a></dt> <dd><a href="/News/People/HH01" class="innerlink">인터뷰 </a></dd> <dd><a href="/News/People/HH02" class="innerlink">인사/동정</a></dd> <dd><a href="/News/People/HH03" class="innerlink">부고</a></dd> <dd><a href="/News/People/HH99" class="innerlink">사람일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Life" class="innerlink">라이프</a></dt> <dd><a href="/News/Life/HI01" class="innerlink">음식 </a></dd> <dd><a href="/News/Life/HI02" class="innerlink">여행 </a></dd> <dd><a href="/News/Life/HI03" class="innerlink">건강 </a></dd> <dd><a href="/News/Life/HI04" class="innerlink">블론디</a></dd> <dd><a href="/News/Life/HI05" class="innerlink">백운산 오늘의 운세</a></dd> <dd><a href="/News/Life/HI99" class="innerlink">라이프일반</a></dd> </dl> </li> <li class="item type01"> <dl class="depth2-grp"> <dt><a href="/News/Local" class="innerlink">지역</a></dt> <dd><a href="/News/Local/HJ01" class="innerlink">수도권</a></dd> <dd><a href="/News/Local/HJ02" class="innerlink">대전/충청/강원</a></dd> <dd><a href="/News/Local/HJ03" class="innerlink">대구/경북</a></dd> <dd><a href="/News/Local/HJ04" class="innerlink">부산/경남</a></dd> <dd><a href="/News/Local/HJ05" class="innerlink">광주/전라/제주</a></dd> </dl> </li> </ul> <ul class="depth2-pnl clearfix"> <li class="item type02"> <dl class="depth2-grp"> <dt><a href="/Opinion">오피니언</a></dt> <dd><a href="/Opinion/HK01" class="innerlink">사설</a></dd> <dd><a href="/Opinion/HK02" class="innerlink">칼럼</a></dd> <dd><a href="/Opinion/HK03" class="innerlink">만평</a></dd> <dd><a href="/Opinion/HK04" class="innerlink">사고알림</a></dd> </dl> </li> <li class="item type02"> <dl class="depth2-grp"> <dt><a href="/Focus">포커스 취재</a></dt> <dd><a href="/Focus/HL01" class="innerlink">기획/연재</a></dd> <dd><a href="/Focus/Interactive" class="innerlink">인터랙티브</a></dd> <dd><a href="/Focus/HL02" class="innerlink">뉴잼</a></dd> </dl> </li> <li class="item type02"> <dl class="depth2-grp"> <dt><a href="/Vertical/Animal">동물</a></dt> <dt><a href="/video">영상</a></dt> <dt><a href="/my/subscriptionChannelMain/ALL">구독<sup class="hk-color">+</sup></a></dt> <dt><a href="/NewsLetter/NewsJam">뉴스레터</a></dt> </dl> </li> <li class="item type02"> <dl class="depth2-grp"> <dt>버티컬</dt> <dd><a href="https://careerup.hankookilbo.com/">커리업</a></dd> <dd><a href="https://touchyou.hankookilbo.com/">터치유</a></dd> </dl> </li> </ul> <!-- 주제판 메뉴 미확정 --> <ul class="topic-pnl clearfix"> <li class="item type02"> <dl class="depth2-grp"> <dt><a href="/">주제판</a></dt> </dl> </li> </ul> <ul class="extra-pnl"><!-- top-article --> <li> <dl class="depth2-grp"> <dt><a href="/Notice">공지</a></dt> <dt><a href="https://company.hankookilbo.com/" target="_blank" rel="noreferrer">회사소개</a></dt> <dt><a href="https://company.hankookilbo.com/pr/Ad_center1.aspx" target="_blank" rel="noreferrer">광고안내</a></dt> <dt><a href="https://company.hankookilbo.com/business/Coalition.aspx" target="_blank" rel="noreferrer">사업제휴</a></dt> <dt><a href="https://company.hankookilbo.com/copyright/service_info.aspx" target="_blank" rel="noreferrer">저작물구매안내</a></dt> <dt><a href="https://hkphoto.hankookilbo.com/photosales" target="_blank" rel="noreferrer">사진 검색 & 구매</a></dt> <dt class="korean-times"><a href="https://www.koreatimes.co.kr/" target="_blank" rel="noreferrer"><img src="/images/svg/the_korean_times.svg" alt="The Korean Times"></a></dt> </dl> </li> <li> <dl class="depth2-grp"> <dt><a href="/paoin">지면보기</a></dt> <dt><a href="javascript:$('.popup-report').openPopup('fn_onLoadCaptcha');">제보 및 문의</a></dt> <dt><a href="https://company.hankookilbo.com/Subscription/apply.aspx" target="_blank" rel="noreferrer">구독안내</a></dt> </dl> </li> </ul> </nav> </div> </div> <div class="mini-title"> <strong class="title type2">수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”</strong> </div> <!-- // .col-left --> <!-- .col-right --> <div class="col-right"> <div class="side-menu-pnl improve"> <!-- 기사뷰 헤더 --> <button class="srch-btn" onclick="goSearchPage();"> <span class="blind">검색하기</span> </button> <button class="alarm" onclick="alarmToggle(window.event);"> <span class="blind">알람</span> <span class="cnt" style="display: none;"></span> </button> <button class="toggle"><span class="blind">메뉴 열기</span></button> </div> <!-- 알람 팝업 --> <!-- 로그인, 알람박스 --> <section class="user-attention-popup new-mode logged"> <div class="att-header"> <strong>알림</strong> <div class="btn-con"> <button class="setting-btn" onclick="alarmSetOpener();">알림설정</button> <button class="close-btn" onClick="$('.user-attention-popup.logged').toggleClass('on')"></button> </div> </div> <div class="attention-container"> <ul id="myAlramArea" class="attention-list"> </ul> <button class="view-more-btn" onclick='location.href="/MyPage?Filter=Alarm"'>내 알림 더보기</button> </div> <div class="popup-alert modify-form"> <div class="popup-header"> <div class="logo"></div> <button class="btn-close" onclick="alarmSetOpener(this);"></button> <strong class="tit">알림설정</strong> </div> <div class="cont"> <div class="rowner push-agree"> <p>웹 알림 동의 <span class="optional">(크롬브라우저만 가능)</span></p> <ul class="agree-list"> <li> <input type="checkbox" id="push-agree" name="push-agree"> <label for="push-agree">구독 업데이트 및 주요 알림</label> </li> </ul> </div> <button class="btn-main" onclick="alarmSetClose(this)">확인</button> </div> <script> // 알람설정 닫기 function alarmSetClose(target) { if($("header").hasClass("up-index")) $("header").removeClass("up-index"); $(target).closest('.popup-alert').closePopup(); } $(function () { $('.setting-btn').on('click', function(){ var appuserPushId = Cookies.get('appuserPushId'); //조회 시점 변경, 페이지 로딩시 조회인 경우 쿠키저장시점보다 빨리 조회하는 경우 발생 -> false로 disabled 처리 됨 if(!Boolean(appuserPushId)){ $('#push-agree').attr('disabled', true); return false; } if (Cookies.get('accessToken') !== undefined) { $.ajax({ url: "/push-info?appuserPushId=" + appuserPushId, contentType: 'application/json', method: 'GET', async: false, success: function (response) { var appuserPushAgreeyn = response.data.view.appuserPushAgreeyn; if (appuserPushAgreeyn === 'Y') { $('#push-agree').iCheck('check'); // $('#push-agree2').iCheck('check'); } else { $('#push-agree').iCheck('uncheck'); // $('#push-agree2').iCheck('uncheck'); } }, fail: function () { $('#push-agree').iCheck('uncheck'); // $('#push-agree2').iCheck('uncheck'); } }); } }); $("#push-agree").on("ifClicked", function(event){ // appuserPushId get 추가 var appuserPushId = Cookies.get('appuserPushId'); if (Cookies.get('accessToken') !== undefined) { var params = {}; if (!event.currentTarget.checked) { params = { 'appuserPushId': appuserPushId , 'appuserPushAgreeyn': 'Y' , 'appuserAlarmSokbo': 'Y' , 'appuserAlarmSubscribe': 'Y' , 'appuserAlarmReply': 'Y' , 'appuserAlarmMarketing': 'Y' , 'appuserSendBlock': 'N' , 'appuserPushAgreedate': 'Y' }; } else { params = { 'appuserPushId': appuserPushId , 'appuserPushAgreeyn': 'N' , 'appuserAlarmSokbo': 'N' , 'appuserAlarmSubscribe': 'N' , 'appuserAlarmReply': 'N' , 'appuserAlarmMarketing': 'N' , 'appuserSendBlock': 'Y' , 'appuserPushAgreedate': 'N' }; } var url = '/push-agree'; $.ajax({ url: url, contentType: 'application/json', method: 'PATCH', data: JSON.stringify(params), async: false, success: function (response) { if (!event.currentTarget.checked) { $('#push-agree').iCheck('check'); // $('#push-agree2').iCheck('check'); } else { $('#push-agree').iCheck('uncheck'); // $('#push-agree2').iCheck('uncheck'); } }, fail: function () { if (event.currentTarget.checked) { $('#push-agree').iCheck('check'); // $('#push-agree2').iCheck('check'); } else { $('#push-agree').iCheck('uncheck'); // $('#push-agree2').iCheck('uncheck'); } } }); } }); }); </script> </div> <div class="dimmed"></div> </section> <!-- 비 로그인, 알람박스 --> <section class="user-attention-popup new-mode unlogged"> <div class="att-header"> <strong>알림</strong> <div class="btn-con"> <button class="close-btn" onclick="$('.user-attention-popup.unlogged').removeClass('on');"></button> </div> </div> <div class="attention-container"> <ul id="myAlramArea" class="attention-list"> <li class="no-data">알림이 없습니다</li> </ul> </div> <div class="dimmed"></div> </section><!-- 읽기모드 --> <!-- // .bg-set --> <!-- .scale-set --> <!-- // .scale-set --> <!-- // 읽기모드 --> <!-- .tooltip-box --> <!-- // .tooltip-box --> <!-- .tooltip-box .bookmark-box --> </div> <!-- // .col-right --> </div> <!-- // .end-header --> <!-- dimmed --> <div class="dimmed"></div> <!-- //dimmed --> <!-- // 구독 취소 팝업 --> <script src="/js/lib/moment.min.js"></script> <script src="/js/lib/moment-timezone-with-data.js"></script> <script> //최초 구독 버튼 hidden function goSearchPage(){ location.href = _searchHost+"/Search"; } var param = {lastReadArticleId: 'A2024112616470002937'}; // 엔드페이지 진입시 마지막 읽은 기사를 DB에 저장 $.ajax({ url: '/users/me', method: 'PATCH', contentType: 'application/json', data: JSON.stringify(param), success: function (response) { if (response.data) { // console.log('이어보기 기사 추가 성공') } else { // console.log('이어보기 기사 추가 실패') } } }); function onClickLogo() { removeLastReadArticle(); location.replace('https://www.hankookilbo.com'); } $(document).ready(function() { //로그인 하지 않고 기사를 보았을때 쿠키에 하루도안 담고 로그인 하면 읽은 기사에 담기 // 로그인 flag loggedIn = Cookies.get('accessToken'); if (!loggedIn) { if(Cookies.get('view_article') == "undefined" || Cookies.get('view_article') == "" || Cookies.get('view_article') == null){ fn_setCookie('view_article', 'A2024112616470002937', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); }else{ fn_setCookie('view_article', Cookies.get('view_article')+','+'A2024112616470002937', {path: '/', expires: 1}); } }else{ /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var if(Cookies.get('view_article') != "undefined" && Cookies.get('view_article') != null && Cookies.get('view_article') != "") { $.ajax({ url: "/users/view_article", contentType: 'application/json', method: 'POST', data: JSON.stringify({ view_article: Cookies.get('view_article') }), success: function (response) { var flag = response; if (flag) { Cookies.remove('view_article'); } else { console.log('기사 구독 -> 실패') } }, fail: function () { // console.log('기사 구독 -> 에러') } }); } URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ } history.pushState(null, null, location.href); window.onpopstate = function(event) { removeLastReadArticle(); history.back() } }) // (function(){ // // 요일 세팅 // var today = new Date(); // var week = ['일', '월', '화', '수', '목', '금', '토']; // var s = today.getFullYear() + "년 " + (today.getMonth() + 1) + "월 " + today.getDate() + "일 " + week[today.getDay()] + "요일"; // $('#top-date').html(s); // // $('input[data-el="search-input-in-gnb"]').val(''); // })(); $('.srch-btn').on('click' ,function(){ var searchText = $(this).parent().find('input[data-el="search-input-in-gnb"]').val(); subGnbSearch(searchText); goSearchPage(); }); $(function () { gnbLoginCheck(); setTopicMenu(); var $header = $(".wrap[class*='imp-'] .end-header"); var $toggle = $header.find(".toggle"); var $totalMenu = $header.find(".wrap-dep2"); $(".end-header .depth1-grp-tit").on("click",function(){ $(".end-header .slt-grp").toggleClass("on"); }); $toggle.on("click",function(e){ e.stopPropagation(); if($(".container").hasClass("blog")) $header.toggleClass("bg-wh"); $toggle.toggleClass("on"); $header.toggleClass("expand"); if($toggle.hasClass("on")){ $(".end-header .slt-grp").removeClass("on"); document.addEventListener("click", closeTotalMenu); } }); function closeTotalMenu(e){ e.stopPropagation(); $('.user-attention-popup').removeClass("on"); if(!$(e.target).closest($totalMenu).length) { $toggle.removeClass("on"); $header.removeClass("expand"); document.removeEventListener("click", closeTotalMenu); } } }); // 주제판 메뉴 function setTopicMenu(){ $.ajax({ url: "/topic/pan-list", method: "GET", dataType : "text", contentType: "application/json", success: function (res) { var menuHtml = ""; JSON.parse(res).forEach(el => { /*menuHtml += "<dd><a href='/Topic?topicId="+ el.topicId +"' class='innerlink'>"+ el.topicTitle +"</a></dd>";*/ menuHtml += "<dd><a href='/Topic?topicId="+ el.topicId +"&stt_op=topic_globalgnb_tab_list' class='innerlink'>"+ el.topicTitle +"</a></dd>"; }); $(".end-header .topic-pnl .depth2-grp").append(menuHtml); }, fail: function (err) { console.log(err); } }); } function gnbLoginCheck(){ if (!Cookies.get('accessToken')) { // case.로그아웃 상태일 때 만 표출 $(".end-header .toggle").before('<button class="user-info" onclick="openSignInPopUp()"><span className="blind">내 정보</span></button>'); // case.로그아웃 끝 } else { // case.로그인 상태일 때 만 표출 $(".end-header .toggle").before('<button class="user-info" onclick="location.href=\'/MyPage\'"><span class="blind">내 정보</span></button>'); // getMyalarmTotalcnt(); getMyalarmCnt(); // case.로그인 끝 } }; function subGnbSearch(searchTextVal){ var searchText = searchTextVal; Boolean(searchText) ? searchText : searchText = $('input[data-el="search-input-in-gnb"]').val(); saveSearchRecord(searchText); location.href = _searchHost+"/Search?searchText=" + encodeURIComponent(searchText); } function getMyalarmTotalcnt() { if (Cookies.get('accessToken') !== undefined) { $.ajax({ url: '/users/push-myalarm-totalcnt', method: 'GET', success: function (response) { var cntNum = response.alarmTotalCount; if(response.code === '0000'){ if(cntNum > 0) { $('.alarm .cnt').text(cntNum); $('.alarm .cnt').show(); } else { $('.alarm .cnt').text('0'); $('.alarm .cnt').hide(); } } else { $('.alarm .cnt').text('0'); $('.alarm .cnt').hide(); } }, fail: function (response) { $('.alarm .cnt').text('0'); $('.alarm .cnt').hide(); } }); } } function _alarmToggle() { var alarmListPop = $('.user-attention-popup'); alarmListPop.toggleClass("on"); if (alarmListPop.hasClass("on")) { if (Cookies.get('accessToken') !== undefined) { $.ajax({ url: '/users/push-myalarm', method: 'GET', success: function (response) { if (response.code === '0000') { var data = response.data; var html = ''; var listSize = data.list.length; var now = moment(); if (listSize > 0) { for (var i = 0; i < listSize; i++) { var apppushType = data.list[i].apppushType; var typeClass = ""; var typeNm = ""; var pushTit = data.list[i].apppushTitle; var pushConts = data.list[i].apppushContents; var now = moment().format('YYYYMMDD'); var sendDate = moment(data.list[i].apppushSenddate).format('YYYYMMDD'); var afterDate = timeForToday(moment(data.list[i].apppushSenddate).format('YYYY-MM-DD HH:mm:ss')); var weekend = moment(sendDate).day(); var weekendNm = ''; switch (weekend.toString()){ case '0': weekendNm = '일'; break; case '1': weekendNm = '월'; break; case '2': weekendNm = '화'; break; case '3': weekendNm = '수'; break; case '4': weekendNm = '목'; break; case '5': weekendNm = '금'; break; case '6': weekendNm = '토'; break; } var isToday = moment(now).diff(sendDate, 'days') < 1 ? ' (오늘)' : '('+weekendNm+')'; if (i > 0) { var beforeIdx = Number(i - 1); var tempSendDate = moment(data.list[beforeIdx].apppushSenddate).format('YYYYMMDD'); if (tempSendDate == moment(data.list[i].apppushSenddate).format('YYYYMMDD')) { sendDate = ""; } } var sendDateFormatIng = ''; if (Boolean(sendDate)) { sendDateFormatIng = moment(sendDate).format('YYYY. MM. DD'); } if (Boolean(sendDate)) { html += ' <li class="include-date">'; html += ' <p class="date-box">' + sendDateFormatIng + ' ' + isToday + '</p>'; } else { html += ' <li>'; } html += ' <a href="/News/Read/' + data.list[i].articleId + '" onclick="fnAlramClick('+"'"+ data.list[i].apppushId +"'"+ ')">'; var isBadgeUse = false; if(Object.keys($PUSH_TYPE).indexOf(apppushType) > -1){ typeClass = $PUSH_TYPE[apppushType].class; typeNm = $PUSH_TYPE[apppushType].name; pushConts = pushConts.replace(new RegExp("\\["+ $PUSH_TYPE[apppushType].name +"\\]" , "g"), ""); isBadgeUse = true; } else { isBadgeUse = false; } html += ' <div>'; if(isBadgeUse){ html += ' <mark class="' + typeClass + '">' + typeNm + '</mark>'; } if(pushTit !== "한국일보"){ if(apppushType === "REPLY_RE" || apppushType === "REACTION"){ html += ' <p class="sub-tit">' + pushTit.replace("10", "<strong>10</strong>"); + '</p>'; }else if(apppushType === "REPLY" ){ html += ' <p class="sub-tit">' + pushTit.replace("답글", "<strong>답글</strong>"); + '</p>'; }else{ html += ' <p class="sub-tit">' + pushTit + '</p>'; } } html += ' <p class="date">' + afterDate + '</p>'; html += ' </div>'; html += ' <h5>' + pushConts + '</h5>'; html += ' </a>'; html += ' </li>'; } } else { html += ' <li class="no-alarm">'; html += ' <h5>알림한 기사가 없습니다.</h5>'; html += ' </li>'; } $('#myAlramArea').html(html); } }, fail: function (response) { } }); } document.addEventListener("click", closeAlarm); } function closeAlarm(e){ e.stopPropagation(); if(!$(e.target).closest(alarmListPop).length) { alarmListPop.removeClass("on"); document.removeEventListener("click", closeAlarm); } } } function timeForToday(value) { var today = new Date(); var timeValue = new Date(value); var betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60); if (betweenTime < 1) return '방금전'; if (betweenTime < 60) { return betweenTime + '분 전'; } //메세지 수신 후 12시간이 지나면 년월일시분 노출로 요청 하여 로직 변경 var betweenTimeHour = Math.floor(betweenTime / 60); if (betweenTimeHour < 12) { return betweenTimeHour + '시간 전'; } else { var timeFormating = moment(timeValue).format('hh시 mm분'); var isAmPm = moment(timeValue).format('(a)'); var ampmNm = ''; switch (isAmPm) { case '(am)': ampmNm = '오전'; break; case '(pm)': ampmNm = '오후'; break; } return ampmNm + ' ' + timeFormating; } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 저장 버튼 클릭 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSaveArticleBtnSide(location) { // 로그인 확인 if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } // 기사 저장 api를 쏜다 -> 중복체크는 controller에서 한다. $.ajax({ url: '/article/activity', method: 'POST', contentType: 'application/json', data: JSON.stringify({ articleId: 'A2024112616470002937', activityType: 'Save' }), success: function (response) { // console.log('기사 저장 -> 성공'); var flag = response; if (flag) { // 기사 저장 css 토글 $('.icon-toolbox-bookmark').toggleClass('on'); // on이면 추가 popup off면 제거 popup if ($('.icon-toolbox-bookmark').hasClass('on')) { if (location === 'top') { $('#top-save-article-popup').show(); } else { $('#bottom-save-article-popup').show(); } } else { if (location === 'top') { $('#top-delete-article-popup').show(); } else { $('#bottom-delete-article-popup').show(); } } // css를 바꾼다 } else { // console.log('기사 저장 -> 실패') } }, fail: function () { // console.log('기사 저장 -> 에러') } }) } function fnAlramClick(arg){ if (Cookies.get('accessToken') !== undefined && Boolean(arg)) { var params = {}; params = { 'apppushId': arg }; var url = '/alarm-click'; $.ajax({ url: url, contentType: 'application/json', method: 'PATCH', data: JSON.stringify(params), async: false, success: function (response) { }, fail: function () { } }); } } </script> <script> /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 최근 검색어 쿠키에서 불러오기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function setSearchRecord() { $('dl[data-el="search-record-list-in-gnb"]').html('<dt>최근 검색어</dt>'); var searchRecordCookie = Cookies.get('search-record'); // 최근 검색어가 있으면 if (searchRecordCookie !== undefined) { var searchRecord = searchRecordCookie.split(','); // 전체 삭제 버튼 활성화 $('button[data-el="search-record-delete-all-btn-in-gnb"]').attr('disabled', false); // 컨테이너 css class toggle $('div[data-el="search-toggle-recent-word"]').removeClass('no-result'); if (searchRecord.length > 0) { searchRecord.reverse(); for (var i = 0; i < searchRecord.length; i++) { var temp = searchRecord[i].split('_splitter'); temp[0] = temp[0].replace(/</g,"&lt;").replace(/>/g,"&gt;"); var tempOnAtag = temp[0].replace(/\"/g,"\\\"").replace(/\'/g,"\\\'"); $('dl[data-el="search-record-list-in-gnb"]').append('<dd>\n' + ' <a href="javascript:onClickSearchRecord(\'' + tempOnAtag + '\')"><strong>' + temp[0] + '</strong></a>\n' + ' <div class="searched-date">\n' + ' <span>' + temp[1] + '</span>\n' + ' <button class="icon-del" onclick="onClickDeleteSearchRecord(\'' + i + '\', event)">삭제</button>\n' + ' </div>\n' + ' </dd>'); } } // 최근 검색어가 없으면 } else { // 전체 삭제 버튼 비활성화 $('button[data-el="search-record-delete-all-btn-in-gnb"]').attr('disabled', true); $('dl[data-el="search-record-list-in-gnb"]').append('<dd> 최근 입력한 검색어가 없습니다. </dd>'); // 컨테이너 css class toggle $('div[data-el="search-toggle-recent-word"]').addClass('no-result'); } } function onClickSearchRecord(searchText) { location.href = _searchHost + '/Search?searchText=' + encodeURIComponent(searchText); } function onClickDeleteSearchRecord(index, event) { var searchRecordCookie = Cookies.get('search-record'); var searchRecord = searchRecordCookie.split(',').reverse(); // Prevent Submit Form Tag event.preventDefault(); event.stopImmediatePropagation(); // 해당 인덱스 삭제 searchRecord.splice(Number(index), 1); if (searchRecord.reverse().join(',') !== '') { // Cookies.set('search-record', searchRecord.join(','), {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); fn_setCookie('search-record', searchRecord.join(','), {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); } else { Cookies.remove('search-record'); } setSearchRecord(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 검색어 전체 삭제 listener URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function setSearchRecordDeleteAllListener() { $('button[data-el="search-record-delete-all-btn-in-gnb"]').on('click', function () { Cookies.remove('search-record'); setSearchRecord(); }) } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 검색어 저장 on off 버튼 listener URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function setSaveSearchRecordOnOffBtnListener() { $('button[data-el="search-record-save-off-btn-in-record-in-gnb"]').on('click', function () { var flag = Cookies.get('save-search-record-flag'); if (flag === 'true' || flag === undefined) { // Cookies.set('save-search-record-flag', 'false', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); fn_setCookie('save-search-record-flag', 'false', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); $('button[data-el="search-record-save-off-btn-in-record-in-gnb"]').html('검색어 저장 켜기'); $('button[data-el="search-record-save-off-btn-in-auto-in-gnb"]').html('검색어 저장 켜기'); } else { // Cookies.set('save-search-record-flag', 'true', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); fn_setCookie('save-search-record-flag', 'true', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); $('button[data-el="search-record-save-off-btn-in-record-in-gnb"]').html('검색어 저장 끄기'); $('button[data-el="search-record-save-off-btn-in-auto-in-gnb"]').html('검색어 저장 끄기'); } }); $('button[data-el="search-record-save-off-btn-in-auto-in-gnb"]').on('click', function () { var flag = Cookies.get('save-search-record-flag'); if (flag === 'true' || flag === undefined) { // Cookies.set('save-search-record-flag', 'false', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); fn_setCookie('save-search-record-flag', 'false', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); $('button[data-el="search-record-save-off-btn-in-record-in-gnb"]').html('검색어 저장 켜기'); $('button[data-el="search-record-save-off-btn-in-auto-in-gnb"]').html('검색어 저장 켜기'); } else { // Cookies.set('save-search-record-flag', 'true', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); fn_setCookie('save-search-record-flag', 'true', {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); $('button[data-el="search-record-save-off-btn-in-record-in-gnb"]').html('검색어 저장 끄기'); $('button[data-el="search-record-save-off-btn-in-auto-in-gnb"]').html('검색어 저장 끄기'); } }) } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 검색어 input 리스너 세팅 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function setSearchInputListener() { $('button[data-el="search-input-in-gnb-btn"]').off('click.search-input-in-gnb-btn').on('click.search-input-in-gnb-btn', function(){ var searchText = $(this).parent().find('input[data-el="search-input-in-gnb"]').val(); saveSearchRecord(searchText); location.href = _searchHost + "/Search?searchText=" + encodeURIComponent(searchText); }) $('input[data-el="search-input-in-gnb"]').on('keyup', function (key) { //키가 13이면 실행 (엔터는 13) var searchText = $(this).val(); if (key.keyCode == 13 && searchText !== '') { saveSearchRecord(searchText); location.href = _searchHost + "/Search?searchText=" + encodeURIComponent(searchText); } // 상단 검색에서 자동완성 막기. // if( this.dataset.auto !== 'disabled' ){ // var param = { // "query": { // "bool": { // "should": [{ // "term": { // "PHRASE_Ngram": Hangul.disassemble(key.target.value).join('') // } // }], // "minimum_should_match": 1 // } // } // }; // var relatedSearchKeywordList = ''; // $.ajax({ // url: "/Search-auto-complete", // method: "POST", // contentType: 'application/json', // data: JSON.stringify(param), // success: function (response) { // var $autoCompleteList = $('dl[data-el="auto-complete-list-in-gnb"]'); // $autoCompleteList.html(''); // $autoCompleteList.html('<dt>자동 완성</dt>'); // for (var i = 0; i < response.length; i++) { // $autoCompleteList.append('<dd>\n' + // ' <a href="'+_searchHost+'/Search?searchText=' + encodeURIComponent(response[i]._id) + '"><strong>' + response[i]._id + '</strong></a>\n' + // ' </dd>'); // if (i === 0) { // relatedSearchKeywordList = response[i]._id; // } else { // relatedSearchKeywordList += ',' + response[i]._id; // } // } // Cookies.set('relatedSearchKeyword', relatedSearchKeywordList); // }, // fail: function (err) { // // console.log('댓글 등록 -> 댓글 등록 에러'); // } // }); // } }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 최근 검색 기록 추가 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function saveSearchRecord(searchText) { // 빈 값 검색 기록에 검색하면 넣지 않고 검색만 한다. if ($.trim(searchText) === '') { return; } var searchSaveFlag = Cookies.get('save-search-record-flag'); // 검색어 저장이 true 이면 if (searchSaveFlag === 'true' || searchSaveFlag === undefined) { var now = new Date(); var ymd = now.getFullYear() + "." + ('0' + (now.getMonth() + 1)).slice(-2) + "." + now.getDate(); var searchRecord = Cookies.get('search-record'); // 빈 값이 아니면 if (searchRecord !== undefined) { var searchRecordList = searchRecord.split(','); if (searchRecordList.length === 10) { searchRecordList.reverse(); searchRecordList.pop(); searchRecordList.reverse(); searchRecord = searchRecordList.join(','); } searchRecord += ',' + searchText + "_splitter" + ymd; } else { searchRecord = searchText + "_splitter" + ymd; } // Cookies.set('search-record', searchRecord, {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); fn_setCookie('search-record', searchRecord, {path: '/', expires: 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 24 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 265}); setSearchRecord(); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 인기 검색어 조회 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 2021-04-08 인기검색어 노출 제거.(네이버 실시간 검색 종료) URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function setPopularKeyword() { $.ajax({ url: "/Search-popular-keyword", method: "GET", success: function (response) { // console.log('인기 검색어 조회 성공'); // console.log(response); var popularKeywordList = response; var metaKeywordList = []; // 기사 개수 var popularArticleCount = 20; // 기사 개수에 따른 분기점 var popularKeywordCount = 4; if (popularKeywordList.length > 0) { $('p[data-el="keyword-created-dt"]').html(getFormattedDate(popularKeywordList[0].createdDt, 'yyyy.mm.dd hh:mm') + ' 기준') for (var i = 0; i < popularArticleCount; i++) { var item = popularKeywordList[i]; var articleShoulder = item.articleShoulder !== undefined ? item.articleShoulder.shoulderContents : ''; if (i % popularKeywordCount === 0 && i < popularArticleCount) { // 메타에 넣을 배열 준비 metaKeywordList.push(item.topic); $('#keyword-' + (i / popularKeywordCount)).html('<a href="'+_searchHost+'/Search?searchText=' + encodeURIComponent(item.topic) + '"><span\n' + ' class="num">' + parseInt((i / popularKeywordCount) + 1) + '</span>' + item.topic + '</a>') $('#rank-list').append('<li>' + parseInt((i / popularKeywordCount) + 1) + '. ' + item.topic + '</li>'); $('#hot-keyword-main-' + i).html('<div class="info-box">\n' + ' <div class="text-box">\n' + ' <span class="ttl"><a href="' + getShoulderUrl(item.articleShoulder) + '">' + articleShoulder + '</a></span>\n' + ' <h3 class="tit"><a href="' + getArticleUrl(item) + '" target=_' + item.articleLinkTargetType + '">' + getArticleCutName(item) + item.articleTitle + '</a></h3>\n' + ' <span class="date">' + getFormattedDate(item.articleDeployDt, 'yyyy.mm.dd hh:mm') + '</span>\n' + ' </div>\n' + ' <div class="img-box video">\n' + ' <a href="' + getArticleUrl(item) + '" target=_' + item.articleLinkTargetType + '">\n' + ' <img src="' + getArticleThumbnailFilePath($('#fileServer').val(), item.articleId, item.repAttach) + '" alt>\n' + ' </a>\n' + ' </div>\n' + ' </div>\n' + ' <p class="text">\n' + ' <a href="' + getArticleUrl(item) + '" target=_' + item.articleLinkTargetType + '">' + item.articleFrontPanContents + '</a>\n' + ' </p>') } else if (i % popularKeywordCount !== 0) { $('#hot-keyword-sub-' + parseInt(i / popularKeywordCount)).append('<li><a href="' + getArticleUrl(item) + '" target=_' + item.articleLinkTargetType + '">' + getArticleCutName(item) + item.articleTitle + '</a></li>') } } setTimeout(function() { $('#rank-list').addClass('is-play'); }, 500); $('meta[name="news_keywords"]').attr('content', metaKeywordList.join(",")); $('.btn-open-search').click(function() { if (location.href.indexOf('/Search') > -1) { location.replace(_searchHost+'/Search?searchText=' + popularKeywordList[0].topic) } else { location.replace(_searchHost+'/Search'); } }); } }, fail: function (err) { // console.log('댓글 등록 -> 댓글 등록 에러'); } }); } </script> <script> setSearchInputListener(); </script> <div class="end-top"> <!-- .ad-banner : 970x250 --> <div class="end-top-ad-wrap"> <div class="end-top-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/pc_news_endpage_h@970x250"></script> </div> </div> <!-- // .ad-banner : 970x250 --> <!-- .inner --> <div class="innerwrap"> <!-- .col-main --> <div class="col-main "> <div class="ttl live-issue"> <a href="/Liveissue"><em>LIVE ISSUE</em></a> <a href="/Collect/9474">2025학년도 대입 수능 </a> </div> <h1 class="title"> 수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”</h1> <div class="info"> <div class="name-box"> <a href="/jpage/stylo"> <span class="nm">강지원</span> <span class="role">기자</span> </a> </div> <div class="tooltip-box"> <button type="button" class="subsc-btn jpage" onclick="onClickSubscribeArticleBtn('JPAGE')" style="display: none;"></button> </div> <dl class="wrt-text"> <dt>입력</dt> <dd>2024.11.26 17:05</dd> <dt>수정</dt> <dd>2024.11.26 17:23</dd> </dl> <span class="page-number"> 8면 </span> </div> <div class="tool-bar"> <!-- .tooltip-box --> <div class="tooltip-box"> <button type="button" class="btn-like-all open-tip"> <span class="blind">좋아요</span> </button> <!-- .like-detail --> <div class="like-detail tooltip"> <ul> <li class="like" id="likeCntLi">0</li> <li class="unlike" id="dislikeCntLi">0</li> </ul> </div> <!-- // .like-detail --> </div> <!-- // .tooltip-box --> <span class="count" id="likeTotal">0</span> <button type="button" class="btn-comment"> <span class="blind">댓글달기</span> </button> <span class="count" id="commentCntSpan_top">0</span> </div> </div> <!-- // .col-main --> </div> </div> <!-- .end-body --> <div class="end-body" style=""> <!-- .inner --> <div class="innerwrap"> <div class="col-main" itemprop="articleBody"> <h2 class="sub-tit-ll">평가원, 이의신청 심사 결과 발표<br>이의제기 69개 문항 208건 심사<br>영어 24번 문항 "정답 이상 없음"</h2> <html> <head></head> <body> <div class="editor-img-box"> <div class="img-box"> <img src="https://newsimg-hams.hankookilbo.com/2024/11/26/45b8d5c1-117e-46ea-83af-23139c2076d4.jpg" alt="2025학년도 대학수학능력시험일인 14일 서울 양천구 목동종로학원 대입 수능 분석 상황실에서 직원들이 국어영역 문제를 분석하고 있다. 뉴스1"><button type="button" class="img-zoomin">이미지 확대보기</button> </div> <div class="caption"> <p>2025학년도 대학수학능력시험일인 14일 서울 양천구 목동종로학원 대입 수능 분석 상황실에서 직원들이 국어영역 문제를 분석하고 있다. 뉴스1</p> </div> </div> <p class="editor-p">한국교육과정평가원이 2025학년도 대학수학능력시험(수능)의 문제와 정답 이의신청에 대한 심사 결과 모두 이상이 없다고 밝혔다.</p> <p class="editor-p">평가원은 26일 수능 정답을 확정하고 “심사 대상 69개 문항 모두 문제 및 정답에 이상 없음으로 판정했다”고 발표했다. 단일 문항으로 가장 많은 이의신청(42건)이 들어온 국어영역 선택과목인 언어와매체 44번 문항, 복수 정답 논란이 제기된 영어영역 24번 문항에도 마찬가지로 “정답에 이상이 없다”는 판단을 내렸다. </p> <p class="editor-p">언어와매체 44번은 지문에서 고교 축제 일정을 제시하고 이에 대한 설명으로 적절하지 않은 보기를 찾는 문제였다. 정답은 ‘각 행사별 진행 절차를 순서도를 통해 보여주고 있다’고 설명한 선지(1번)였는데, 다수의 수험생들은 '진행 절차'와 '일정'이 사실상 같은 의미로 해석될 수 있어 적절치 않은 문제라고 이의를 제기했다. 하지만 평가원은 해당 지문은 행사 일정(시간)을 순서대로 소개했을 뿐 행사별 진행 절차를 안내한 것은 아니기 때문에 정답에 오류가 없다고 판단했다. </p><!-- .ad-banner --> <div class="end-ad-container ad-first" data-ad="articleDivide"> <script> var loopTotal = 2; var adArray = ['endpage@divide01', 'pc_news_endpage_low', 'endpage@divide03']; var vSectionCd = 'SOCIETY'; // 중복 처리 var $divideList = $('.end-ad-container[data-ad="articleDivide"]'); if ($divideList.length) { for (var i = 0; i < $divideList.length; i++) { var id = $($divideList[i]).find('.ad-item').attr('data-id'); var adIndex = adArray.indexOf(id); if (adIndex > -1) { adArray.splice(adIndex, 1); } } } var adIndex = 0; var id = adArray[adIndex]; if(vSectionCd == "ENTER"){ document.write('<div class="ad-item" data-id="e_endpage_1@250x250">'); document.write('<script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/e_endpage_1@250x250"><\/script>'); document.write('</div>'); document.write('<div class="ad-item" data-id="e_endpage_2@250x250">'); document.write('<script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/e_endpage_2@250x250"><\/script>'); document.write('</div>'); }else{ for (var i = 0; i < loopTotal; i++) { // 문화 카테고리 오른쪽 배너 고정 if (vSectionCd == "CULTURE" && i == 1) { document.write('<div class="ad-item" data-id="' + id + '">'); document.write('<script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/ct_news_r@250x250"><\/script>'); document.write('</div>'); continue; } document.write('<div class="ad-item" data-id="' + id + '">'); if(id.indexOf('pc_news_endpage_low') == 0){ document.write('<script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/' + 'pc_news_endpage_low_' + (i+1) + '@250x250' + '"><\/script>'); }else { document.write('<script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/' + id + '-040' + (i+1) + '"><\/script>'); } document.write('</div>'); } } $( document ).ready(function() { // 스크립트 삭제(태그 개수에 따라 위치가 잡히기 때문에 필요 없는 태그 삭제) $('.end-ad-container[data-ad="articleDivide"] script').remove(); }); </script> </div> <!-- // .ad-banner --> <p class="editor-p">평가원은 수능이 시행된 14일 정답(가안)을 발표한 후 18일 오후 6시까지 문제 및 정답에 대한 이의신청을 접수했다. 이 기간 접수된 이의신청은 342건으로 전년(288건) 대비 54건 늘었다. 영역별로는 국어 77건, 수학 7건, 영어 91건, 한국사 8건, 사회탐구 124건, 과학탐구 31건, 직업탐구 2건, 제2외국어·한문 2건이다.</p> <p class="editor-p">평가원은 342건 중 문제 및 정답과 관련 없는 의견 개진, 취소, 중복 등을 제외한 69개 문항 208건을 심사했다. 출제에 참여하지 않은 외부 전문가가 포함된 이의심사실무위원회의 심사와 이의심사위원회의 최종 심의를 거친 결과 69개 문항 모두 문제 및 정답에 이상이 없다고 판정됐다. 각 문항에 대한 심사 결과는 평가원 홈페이지에서 확인할 수 있다.</p> </body> </html> <div class="writer"><span class="name"> <strong> 강지원 </strong> 기자<span class="email"> stylo@hankookilbo.com </span> </span></div> <!-- 해시태그 //--> <!--// 해시태그 끝--> <!-- 제보를 기다립니다 //--> <!--// 제보를 기다립니다 끝--> <div class="btn-area reaction-btns"> <button id="article-like-btn" class="btn-like btn-lottie-any" title="공감" data-target-animation="lottie-heart"> <span class="icon"></span> <div class="reaction-btns__lottie-wrap"> <span class="btn-area__lottie-ico hidden" data-animation-id="lottie-heart"></span> </div> <span id="bottom-like-cnt" class="count">0</span> </button> <button id="article-dislike-btn" class="btn-unlike btn-lottie-any" title="비공감" data-target-animation="lottie-brokenheart"> <span class="icon"></span> <div class="reaction-btns__lottie-wrap"> <span class="btn-area__lottie-ico hidden" data-animation-id="lottie-brokenheart"></span> </div> <span id="bottom-dislike-cnt" class="count">0</span> </button> <!-- .tooltip-box --> <div class="tooltip-box"> <button class="btn-share open-tip" title="공유"> <span>공유</span> </button> <ul class="tooltip share-list"> <li class="kakao"><a href="javascript:onClickShareKakao()"><span class="blind">카카오</span></a></li> <li class="facebook"><a href="javascript:;" onclick="onClickShareFB()" class="btn-close"><span class="blind">페이스북</span></a></li> <li class="twitter"><a href="javascript:;" data-js="twitter-share" class="btn-close" onclick="onClickShareTwitter()"><span class="blind">트위터</span></a></li> <li class="email"><a href="javascript:;" class="btn-close" onclick="onClickShareEmail()"><span class="blind">이메일</span></a></li> <li class="url toast-box"><a href="javascript:;" class="btn-close btn-copy" onclick="copyCurrentUrlToClipboard()"><span class="blind">URL</span></a></li> </ul> <!-- .toast-popup --> <div class="toast-popup left"> <p>기사 URL이 복사되었습니다.</p> </div> <!-- 복사된 값이 저장됨 --> <input type="hidden" class="copied-value"> <!-- // .toast-popup --> </div> <!-- // .tooltip-box --> <!-- .tooltip-box .bookmark-box --> <div class="tooltip-box bookmark-box"> <button id="bottom-save-article-btn" class="btn-bookmark btn-lottie-any" title="기사저장" data-target-animation="lottie-bookmark" onclick="onClickSaveArticleBtn()"> <div class="reaction-btns__lottie-wrap"> <span class="btn-area__lottie-ico hidden" data-animation-id="lottie-bookmark"></span> </div> <span>기사저장</span> </button> </div> <!-- // .tooltip-box .bookmark-box --> <!-- // .tooltip-box .bookmark-box --> <button class="btn-goto-comment" title="댓글쓰기"> <span class="text">댓글 쓰기</span> </button> </div> <div class="more-news ab-test"> <div class="more-news-container"> <div class="more-news-related"> <h3>이 기사와 관련된 기사</h3> <ul id="related-article-list" class="gtm-related-articles"> </ul> </div> </div> </div> <!-- // 사설 구독 --> <div class="edit-subscribe"> <div class="tit-text"> <strong><a href="/Collect/9474">2025학년도 대입 수능 </a></strong> </div> <ul class="edit-subscribe-list"> </ul> </div> <!-- // 사설 구독 --> <div class="article-bottom-banner"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/p_news@640x75"></script> </div> <div class="newspaper-subscribe"> <span class="ns-text">세상을 보는 균형, 한국일보<span class="copy">Copyright ⓒ Hankookilbo</span></span> <!-- article-bottom-area --> <a href="https://company.hankookilbo.com/Subscription/apply.aspx" target="_blank" class="ns-link" rel="noreferrer">신문 구독신청</a> </div> <div class="article-bottom-banner"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/new_low@640x100"></script> </div> <input type="hidden" id="fileServer" value="https://newsimg.hankookilbo.com"/> <script> var relatedType = 'default'; var subscribeLocation; var isMovieSectionYN = 'N'; /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 관련된 기사 조회 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ var url = '/article/A2024112616470002937/related'; function incMostViewedArticles(cate) { console.log('load Test Data [ ==='); var sectionCd = 'SOCIETY'; var seriesId = ''; var url = '/top-articles?limit=5'; if (sectionCd && sectionCd.length) { url += '&sectionCd=' + sectionCd; } if (seriesId && seriesId.length) { url += '&seriesId=' + seriesId; } // 많이 본 뉴스 조회 $.ajax({ url: url, type: 'GET', dataType: 'json', contentType: 'application/json', timeout: 30000, success: function (data) { // data bind if ( !!data && !!data['sectionArticles'] && data['sectionArticles'].length > 0 ) { var sectionArticles = data['sectionArticles']; $('div.more-news.\\$most-viewed-articles').inc('/html/most-viewed-articles-B.html', function() { var node = $(this).find('li:first-child'); if ( !!node ) { $(this).find('h3 > span.keyword > a').text(cate); $.each(sectionArticles, (i,v)=> { var obj = $(this).find('li:nth-child(' + (i+1) + ')'); if ( obj.length == 0 ) { obj = node.clone(true); $(this).find('#related-article-list').append(obj); } obj.find('div.title').text(v['articleTitle']); obj.find('div.img-box > img').attr('src', v['filePath']); obj.find('a').attr('href', v['articleUrl'] + '?type=AB0'); }); } }); } }, error: function (req, stat, err) { console.log(err); } }); } // 관련기사 목록 가져오기 function getRelatedList(){ if(relatedType === 'dable') { /*: https://hankookilbo.atlassian.net/browse/DEV1-471 [스포츠, 문화, 연예] 섹션일때 관련 기사가 없으면 가장 많이 본 기사를 보여준다 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ var contentCategory = $('meta[name="content_category"]').attr('content'); switch ( contentCategory ) { case '스포츠': case '문화': case '연예': incMostViewedArticles(contentCategory); break; default: break; } return; } // $.ajax({ url: url, method: "GET", contentType: 'application/json', success: function(data) { // console.log('========== 관련된 기사 조회 성공 =========='); checkRelatedList(data, isMovieSectionYN); }, error: function (req, stat, err) { } }); } // 관련기사 목록 갯수 확인 function checkRelatedList(data, isMovieSectionYN){ drawRelatedList(data, isMovieSectionYN); } // 관련기사 그리기 function drawRelatedList(data, isMovieSectionYN){ console.log("isMovieSectionYN: " + isMovieSectionYN); for (var i = 0; i < data.length; i++) { var item = data[i]; var li =$('<li><a><div class="title"></div><div class="img-box"><img src="" class="$hide" alt=""></div></a></li>'); li.find('a').attr('href', getArticleUrl(item) + '?type=AB1&rPrev=' + 'A2024112616470002937').attr('target', '_' + item.articleLinkTargetType); li.find('div.title').text(getArticleCutName(item) + item.articleTitle); li.find('div.img-box > img').attr('src', item.repAttach.filePath); if (isMovieSectionYN == 'Y') { $('#related-article-list-video').append(li); } else { $('#related-article-list').append(li); } } } // 관련기사 호출 getRelatedList(); /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 구독 버튼 클릭 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSubscribeArticleBtn(location) { subscribeLocation = location; // 로그인 확인 if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } if ($(event.target).hasClass('on')) { $('#delete-subscription-popup').openPopup(); return; } subscribeTypeCheck(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 구독 분기 함수 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function subscribeTypeCheck(){ //if(subscribeLocation == 'JPAGE' || subscribeLocation == 'TAG'){ if(subscribeLocation == 'JPAGE' || subscribeLocation == 'HASHTAG'){ subscribeArticleNew(subscribeLocation); }else{ subscribeArticle(); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 구독 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function subscribeArticle() { var usersSubscriptionPart = ''; var usersSubscriptionValue = 'L2024101511130004310'; var seriesType = ''; var subContentType = ""; switch (usersSubscriptionPart){ case 'SeriesColumn': seriesType = 'NEWS_SERIES'; subContentType = '칼럼'; break; case 'Planning': seriesType = 'NEWS_PLANNING'; subContentType = '연재'; break; case 'Series': seriesType = 'NEWS_PLANNING'; subContentType = '연재'; break; case 'NameColumn': seriesType = 'NEWS_SERIES'; subContentType = '칼럼'; break; } $.ajax({ url: '/my/subscription', method: "POST", contentType: 'application/json', data: JSON.stringify({ usersSubscriptionPart: seriesType, usersSubscriptionValue: usersSubscriptionValue }) }).success(function (response) { var successYn = response; if (successYn) { if (successYn === 'Y') { fn_setGoogleAnalyticsUserDetailsUpdate(""); var sub_content = '2025학년도 대입 수능 '; if ("btn-subsc" == $('.btn-subsc').attr('class')) { //구독 중 fn_googleAnalyticsSubscribe(sub_content, subContentType); } else { //구독 취소 fn_googleAnalyticsUnsubscribe(sub_content, subContentType); } $('.btn-subsc').toggleClass('on'); } else if(successYn === 'F'){ $('#subscribe-valid-popup').openPopup(); $('.btn-subsc').remove(); } else { $('.btn-subsc').removeClass('on'); } } else { // console.log('기사 구독 -> 실패') } }).fail(function (error) { // }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기자 구독 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function subscribeArticleNew(location) { // 기사 구독 api를 쏜다 -> 중복체크는 controller에서 한다. if(location == 'JPAGE'){ $.ajax({ url: '/my/subscription', method: "POST", contentType: 'application/json', data: JSON.stringify({ usersSubscriptionPart: location, usersSubscriptionValue: '95d9b3e2-2fb3-4d7f-84bf-379832b5d7c8' }) }).success(function (response) { var successYn = response; if (successYn == 'Y') { // css를 바꾼다 // console.log('기사 구독 -> 성공'); fn_setGoogleAnalyticsUserDetailsUpdate(""); $('.subsc-btn.jpage').toggleClass('on'); if ($('.subsc-btn.jpage').hasClass('on')) { $('.subsc-btn.jpage').siblings('.add-pop').show(); //구독 중 fn_googleAnalyticsSubscribe('강지원', '기자'); } else { $('.subsc-btn.jpage').siblings('.cancel-pop').show(); //구독 취소 fn_googleAnalyticsUnsubscribe('강지원', '기자'); } } else if(successYn === 'F') { $('#subscribe-valid-popup').openPopup(); $('.subsc-btn.jpage').remove(); } else { // console.log('기사 구독 -> 실패') } }).fail(function (error) { // }); // }else if(location == 'TAG'){ }else if(location == 'HASHTAG'){ $.ajax({ url: '/my/subscription', method: "POST", contentType: 'application/json', data: JSON.stringify({ usersSubscriptionPart: location, usersSubscriptionValue: '' }) }).success(function (response) { var successYn = response; if (successYn === 'Y') { // css를 바꾼다 // console.log('기사 구독 -> 성공'); $('.subsc-btn.tag').toggleClass('on'); if ($('.subsc-btn.tag').hasClass('on')) { $('.subsc-btn.tag').siblings('.add-pop').show(); } else { $('.subsc-btn.tag').siblings('.cancel-pop').show(); } } else if(successYn === 'F') { $('#subscribe-valid-popup').openPopup(); $('.subsc-btn.tag').remove(); } else { // console.log('기사 구독 -> 실패') } }).fail(function (error) { // }); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 저장 버튼 클릭 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSaveArticleBtn(location) { // 로그인 확인 if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } // 기사 저장 api를 쏜다 -> 중복체크는 controller에서 한다. $.ajax({ url: '/article/activity', method: 'POST', contentType: 'application/json', data: JSON.stringify({ articleId: 'A2024112616470002937', activityType: 'Save' }), success: function (response) { // console.log('기사 저장 -> 성공'); var flag = response; if (flag) { // 기사 저장 css 토글 $('.btn-bookmark').toggleClass('on'); $('.icon-toolbox-bookmark').toggleClass('on'); // on이면 추가 popup off면 제거 popup if ($('.btn-bookmark').hasClass('on')) { setGoogleAnalyticsArticleSave(); if (location === 'top') { $('#top-save-article-popup').show(); } else { $('#bottom-save-article-popup').show(); } } else { if (location === 'top') { $('#top-delete-article-popup').show(); } else { $('#bottom-delete-article-popup').show(); } } // css를 바꾼다 } else { // console.log('기사 저장 -> 실패') } toggleAnimation('bottom-save-article-btn'); }, fail: function () { // console.log('기사 저장 -> 에러') } }) } function setGoogleAnalyticsArticleSave() { var headline = $('meta[name="headline"]').attr('content'); var content_category = $('meta[name="content_category"]').attr('content'); var content_subcategory = $('meta[name="content_subcategory"]').attr('content'); var article_type = $('meta[name="article_type"]' ).attr('content'); var article_length = $('meta[name="article_length"]' ).attr('content'); if (Cookies.get('accessToken') !== undefined) { window.dataLayer = window.dataLayer || []; $.ajax({ url: '/google-analytics/user-details-decrypt', type: 'GET', contentType: 'application/json', success: function (data) { dataLayer.push({ 'event': 'save', 'user_id': data.user_id, 'gender': data.gender, 'yob': data.yob, 'headline': headline, 'content_category': content_category, 'content_subcategory': content_subcategory, 'article_type': article_type, 'article_length': article_length, }); }, error: function () { } }); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 팝업 리스너들.. 외부 클릭시 숨긴다. URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ var bottomSaveArticlePopup = $('#bottom-save-article-popup'); var bottomDeleteArticlePopup = $('#bottom-delete-article-popup'); var bottomSubscriptionSavePopup = $('#bottom-subscription-save-popup'); var bottomSubscriptionDeletePopup = $('#bottom-subscription-delete-popup'); $(document).mouseup(function (e) { // if the target of the click isn't the container nor a descendant of the container if (!bottomSaveArticlePopup.is(e.target) && bottomSaveArticlePopup.has(e.target).length === 0) { bottomSaveArticlePopup.hide(); bottomDeleteArticlePopup.hide(); bottomSubscriptionSavePopup.hide(); bottomSubscriptionDeletePopup.hide(); } }); // 본문 중간 광고 하단 공백 제거. $(document).ready(function(){ $('.editor-p').each(function(i, dom){ $.each(dom.childNodes, function(j, node){ if(node.nodeType === 1 && String(node.tagName).toUpperCase() === 'BR' && (dom.dataset.breakType === undefined || dom.dataset.breakType !== 'text') ){ dom.dataset.breakType = 'break'; }else{ dom.dataset.breakType = 'text'; } }) if(dom.dataset.breakType === 'break' && $(dom).prev().hasClass('end-ad-container')){ $(dom).remove(); } }) $("button[name='hashtags']").on("click", function () { var tag = this.id var tagId = this.value var url ="/tag/info/"+tagId+'/'+tag+'?page=1'; location.href = url; }); }) </script> <script> $(function(){ // 제보 var animItem = bodymovin.loadAnimation({ container: document.getElementById('report-lottieMessage'), renderer: "svg", loop: true, autoplay: true, path: '../../js/lottieJson/lottie-messageArrived.json' }); }); // 공감 버튼 const lottieBtn = document.querySelectorAll(".reaction-btns .btn-lottie-any"); const lottieAnimations = {}; function toggleAnimation(id) { const targetAnimation = document.getElementById(id).dataset.targetAnimation; const animationContainer = document.querySelector('[data-animation-id="' + targetAnimation + '"]'); animationContainer.classList.toggle("hidden"); if (!lottieAnimations[targetAnimation]) { lottieAnimations[targetAnimation] = lottie.loadAnimation({ container: animationContainer, renderer: "svg", path: "../../js/lottieJson/" + targetAnimation + ".json", autoplay: false, loop: false, }); } const animation = lottieAnimations[targetAnimation]; if (animationContainer.classList.contains("hidden")) { animation.stop(); } else { animation.play(); } } //GA4 - 구독 변경 function fn_setGoogleAnalyticsUserDetailsUpdate(memUuid){ $.ajax({ url: '/google-analytics/user-details', type: 'POST', data: JSON.stringify({ memUuid : memUuid }), contentType: 'application/json', success: function () { }, error: function () { } }); } // GA4 - 구독 function fn_googleAnalyticsSubscribe(sub_content, sub_content_type) { $.ajax({ url: '/google-analytics/user-details-decrypt', type: 'GET', contentType: 'application/json', success: function (data) { dataLayer.push({ 'event': 'subscribe', 'user_id': data.user_id, 'sub_content': sub_content, 'sub_content_type': sub_content_type, 'sub_page_url': location.protocol + "//" + location.host + location.pathname, 'gender': data.gender, 'yob': data.yob, 'join_date': data.join_date, 'join_type': data.join_type, 'subs': data.subs, 'pan_setting': data.pan_setting, }); }, error: function () { } }); } //GA4 - 구독 취소 function fn_googleAnalyticsUnsubscribe(unsub_content, unsub_content_type) { $.ajax({ url: '/google-analytics/user-details-decrypt', type: 'GET', contentType: 'application/json', success: function (data) { dataLayer.push({ 'event': 'un_subscribe', 'user_id': data.user_id, 'unsub_content': unsub_content, 'unsub_content_type': unsub_content_type, 'unsub_page_url': location.protocol + "//" + location.host + location.pathname, 'gender': data.gender, 'yob': data.yob, 'join_date': data.join_date, 'join_type': data.join_type, 'subs': data.subs, 'pan_setting': data.pan_setting, }); }, error: function () { } }); } </script> <!-- 당신이 관심 있을만한 이슈 --> <!-- 당신이 관심 있을만한 이슈 --> <div data-el="topIssueArticles" class="more-articles gtm-interest-issues"> <h3>당신이 관심 있을 만한 이슈</h3> <ul data-el="topIssueArticlesList" class="more-articles-list"> </ul> </div> <!-- // 당신이 관심 있을만한 이슈 --> <script> (function(window, document){ function getTopIssues(pageNum) { var url = '/api/section/LIVEISSUE/page'; $.ajax({ url: url, method: 'GET', contentType: 'application/json', }).success(function (res) { var issuccess = false; var contents = []; if(Array.isArray(res.areas) && res.areas.length > 0){ var data = res.areas[0] || {}; var area = data.area || {}; var subAreas = data.subAreas; if(area.areaType == "AREA_1" && Array.isArray(subAreas)){ issuccess = true; contents = (subAreas[0] || {})['contents'] || []; } } if(issuccess===false || contents.length < 1){ $('div[data-el="topIssueArticles"]').hide(); return; } var i=0, html = '', obj, article; contents = contents.length > 3 ? contents.slice(0, 3) : contents; for(;i<contents.length;i+=1){ obj = contents[i]; article = obj.article var imgInfo = article.articleWebAttach || article.repAttach || {}; var imgPath = getFilePath($('#fileServer').val(), imgInfo.filePath); html += '<li>\n' + ' <a href="/Liveissue/' + obj.liveIssueId + '">\n' + ' <p class="title"># ' + obj.liveIssueName + '</p>\n' + ' </a>\n' + ' <a href="/News/Read/' + article.articleId + '">\n' + ' <div class="img-box ">\n' + ' <img src="' + imgPath + '" alt="">\n' + ' </div>\n' + ' <p class="lead">' + article.articleTitle + '</p>\n' + ' </a>\n' + ' </li>' } $('ul[data-el="topIssueArticlesList"]').empty().html(html) }).fail(function (err) { // console.log('라이브이슈 - 최근기사 조회-> 에러'); $('div[data-el="topIssueArticles"]').hide(); }); } getTopIssues(); })(window, document); </script> <!-- // 당신이 관심 있을만한 이슈 --> <div class="end-ad-container end-ad-container--three-ad"> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/news_endpage_1@200x200"></script> </div> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/news_endpage_2@200x200"></script> </div> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/news_endpage_3@200x200"></script> </div> </div> <div class="end-ad-container"> <!-- Dable 바이라인_그리드_PC / For inquiries, visit http://dable.io --> <div id="taboola-below-article-thumbnails-1" class="gtm-like-articles"></div> <script> window._taboola = window._taboola || []; _taboola.push({ mode: 'organic-thumbnails-a', container: 'taboola-below-article-thumbnails-1', placement: 'Below Article Thumbnails 1', target_type: 'mix' }); </script> </div> <div class="end-ad-container"> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_5@300x250"></script> </div> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_6@300x250"></script> </div> </div></div> <!-- .ad-banner : 160x600 --> <div class="float-left-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/pc_news_endpage_wing@160x600"></script> </div> <!-- // .ad-banner : 160x600 --> <!-- .ad-banner : 250x250 --> <div class="float-bot-ad-box"> <button class="ad-close-btn">X</button> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/pc_news_endpage_rtop@250x250"></script> </div> <!-- // .ad-banner : 250x250 --> <!-- floating-banner --> <div class="col-sub floating-banner"> <div class="side-link-box"> <h3 id="topViewArticlesTitle" class="ab-test"></h3> <ol id="topViewArticlesContainer" class="ab-test gtm-pv-articles"> <li><a></a></li> </ol> <div class="side-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage@wing_s"></script> </div> <h3><span class="keyword"><a href="/News/Society">사회</a></span> 많이 본 뉴스</h3> <ol id="topViewArticlesSubContainer" class="gtm-section-pv-articles"> <li><a></a></li> </ol> </div> <script> var sectionCd = 'SOCIETY'; var seriesId = ''; var url = '/top-articles?limit=5'; if (sectionCd && sectionCd.length) { url += '&sectionCd=' + sectionCd; } if (seriesId && seriesId.length) { url += '&seriesId=' + seriesId; } // 많이 본 뉴스 조회 $.ajax({ url: url, type: 'GET', dataType: 'json', contentType: 'application/json', timeout: 30000, success: function (data) { var $title = $('#topViewArticlesTitle'); $title.text(data.title ? data.title + ' 인기 기사' : '많이 본 뉴스'); var $target = $('#topViewArticlesContainer'); var $li = $target.find('li'); $target.empty(); var articles = data.articles; if (articles.length > 0) { for (var i = 0; i < articles.length; i++) { var article = articles[i]; var item = $li.clone(); var articleFilePath = article.filePath; if($target.hasClass('ab-test') && i == 0) { // 제일 처음 기사는 이미지 사이즈 그대로 유지, 그 외에는 제일 작은 사이즈로 변경 } else { var idx = (article.filePath).lastIndexOf('.'); if(idx > 0) { var ext = (article.filePath).substring(idx); articleFilePath = (article.filePath).replace(ext, '_s' + ext); } } if ((article.articleTitle.indexOf('[백운산 오늘의 운세]') == 0) && (article.filePath == '/images/Default-Image.png')) { articleFilePath = '/images/fortune/fortune384.jpg'; } var html = '<p class="title">' + '<span class="num">' + (i + 1) + '</span>' + '<span class="text">' + article.articleTitle + '</span>' + '</p>\n' + '<div class="img-box">\n' + '<img src="' + articleFilePath + '" alt="">\n' + '</div>' item.find('a').append(html); item.find('a').attr('href', article.articleUrl + '?type=AB6'); item.find('a').attr('target', '_' + article.articleLinkTargetType); $target.append(item); } } else { $("#topViewArticlesTitle").css("display", "none"); $("#topViewArticlesContainer").css("display", "none"); } $target = $('#topViewArticlesSubContainer'); if ($target) { $target.data('data', data); $li = $target.find('li'); $target.empty(); } articles = data.sectionArticles; if (articles.length > 0) { for (var i = 0; i < articles.length; i++) { var article = articles[i]; var item = $li.clone(); var articleFilePath = article.filePath; var idx = (article.filePath).lastIndexOf('.'); if(idx > 0) { var ext = (article.filePath).substring(idx); articleFilePath = (article.filePath).replace(ext, '_s' + ext); } if ((article.articleTitle.indexOf('[백운산 오늘의 운세]') == 0) && (article.filePath == '/images/Default-Image.png')) { articleFilePath = '/images/fortune/fortune384.jpg'; } var html = '<p class="title">' + '<span class="num">' + (i + 1) + '</span>' + '<span class="text">' + article.articleTitle + '</span>' + '</p>\n' + '<div class="img-box">\n' + '<img src="' + articleFilePath + '" alt="">\n' + '</div>' item.find('a').append(html); item.find('a').attr('href', article.articleUrl + '?type=AB7'); item.find('a').attr('target', '_' + article.articleLinkTargetType); $target.append(item); } } else { $("#topViewArticlesSubContainer").css("display", "none"); $("#topViewArticlesSubContainer").prev().css("display", "none"); } }, error: function (req, stat, err) { // console.log(err); } }); // ajax </script> <div class="side-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_1@300x250"></script> </div> <!-- 데이블 영역 --> <div class="side-ad-box dable"> <!-- Dable 우측상단_리스트_PC / For inquiries, visit http://dable.io --> <div id="taboola-right-rail-widget-1" class="gtm-realtime-main-articles"></div> <script> window._taboola = window._taboola || []; _taboola.push({ mode: 'organic-thumbnails-rr-a', container: 'taboola-right-rail-widget-1', placement: 'Right Rail Widget 1', target_type: 'mix' }); </script> </div> <div class="side-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_2@300x250"></script> </div> <div data-el="sideLiveIssue" class="side-ad-liveissue type1"> <h3>LIVE ISSUE</h3> <ul data-el="sideLiveIssueList" class="gtm-live-issues"> </ul> </div> <div class="side-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_3@300x250"></script> </div> <!-- 데이블 영역 --> <div class="side-ad-box dable"> <!-- Dable 우측하단_리스트_PC / For inquiries, visit http://dable.io --> <div id="taboola-right-rail-widget-2" class="gtm-realtime-recommend-articles"></div> <script> window._taboola = window._taboola || []; _taboola.push({ mode: 'organic-thumbnails-rr-b', container: 'taboola-right-rail-widget-2', placement: 'Right Rail Widget 2', target_type: 'mix' }); </script> </div> <div class="side-ad-box"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_4@300x250"></script> </div> <script> (function(window, document){ function getRecentIssues(pageNum) { var url = '/api/section/bottom-liveissues?Page=' + (pageNum || 1); // console.log('라이브 이슈 최근 이슈 조회 -> ' + url); $.ajax({ url: url, method: 'GET', contentType: 'application/json', }).success(function (response) { var pageableResult = response; response.list = response.list || []; if (response.list.length > 0) { pageableResult.list = response.list.length > 3 ? response.list.slice(0, 4) : response.list // 초기화 $('ul[data-el="sideLiveIssueList"]').html(''); /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 최근 이슈 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ for (var i = 0; i < pageableResult.list.length; i++) { var item = pageableResult.list[i]; var article = item.articles.length ? item.articles[0] : null; var articleImagePath = article ? getArticleThumbnailFilePath($('#fileServer').val(), article.articleId, article.repAttach) : '/images/Default-Image.png'; var appendItem = ''; appendItem += '<li>\n' + ' <a href="/Liveissue/' + item.seriesId + '">\n' + ' <p class="title hash">' + item.seriesTitle + '</p>\n' + ' <p class="update-txt">관련기사 <span class="keyword">' + item.articleCnt + '</span> 건</p>\n' + ' </a>\n' + ' <div class="content">\n' + ' <div class="body">\n' + ' <a href="/News/Read/' + article.articleId + '">\n' + ' <p class="lead">' + article.articleTitle + '</p>\n' + ' </a>\n' + ' </div>\n' + ' <a href="/News/Read/' + article.articleId + '">\n' + ' <div class="img-box">\n' + ' <img src="' + articleImagePath + '" alt="">\n' + ' </div>\n' + ' </a>\n' + ' </div>\n' + ' </li>' $('ul[data-el="sideLiveIssueList"]').append(appendItem) } } else { $(".side-ad-liveissue").css("display", "none"); } }).fail(function (err) { // console.log('라이브이슈 - 최근기사 조회-> 에러'); $('div[data-el="sideLiveIssue"]').hide(); }); } getRecentIssues(); function getHashNews() { var url = '/api/section/bottom-hashNews?hashTagId='; $.ajax({ url: url, method: 'GET', contentType: 'application/json', }).success(function (response) { var articles = response; if (''=='b4480998-b82c-4ff9-8c6e-06c7f02db779') { articles = articles.replaceAll(/https:\/\/newsimg(-hams)?\.hankookilbo\.com\/([^'"])*null/gim, '/images/fortune/fortune384.jpg'); } $('ul[data-el="sideHashNewsList"]').html(''); $('ul[data-el="sideHashNewsList"]').append(articles) }).fail(function (err) { // console.log('해시태그 연관 기사 - 최근기사 조회-> 에러'); $('div[data-el="sideHashNews"]').hide(); }); } getHashNews(); function getUsersSubscriptionCheckJpageId(type ,id) { if( !getUsersSubscriptionYNCheck(type,id) ){ if(type == 'JPAGE'){ $('.subsc-btn.jpage').remove(); }else if(type == 'TAG'){ $('.subsc-btn.tag').remove(); } } else { var url = '/api/section/users-subscription-check?usersSubscriptionValue=' + id + '&usersSubscriptionPart=' + type; $.ajax({ url: url, method: 'GET', contentType: 'application/json', }).success(function (response) { //console.log('기사 구독 상태 조회 -> 성공'); var successYn = response; if (successYn == "Y") { if (type == 'JPAGE') { $('.subsc-btn.jpage').addClass('on') } else if (type == 'TAG') { $('.subsc-btn.tag').addClass('on') } } else if (successYn == "N") { if (type == 'JPAGE') { $('.subsc-btn.jpage').removeClass('on') } else if (type == 'TAG') { $('.subsc-btn.tag').removeClass('on') } } }).fail(function (err) { console.log('기자 페이지 구독 조회-> 에러'); $('div[data-el="sideHashNews"]').hide(); }); } } //getUsersSubscriptionCheckJpageId("JPAGE","95d9b3e2-2fb3-4d7f-84bf-379832b5d7c8"); function getUsersSubscriptionCheckTagId(type ,id) { if( !getUsersSubscriptionYNCheck(type,id) ){ if(type == 'JPAGE'){ $('.subsc-btn.jpage').remove(); }else if(type == 'TAG'){ $('.subsc-btn.tag').remove(); } } else { var url = '/api/section/users-subscription-check?usersSubscriptionValue=' + id + '&usersSubscriptionPart=' + type; $.ajax({ url: url, method: 'GET', contentType: 'application/json', }).success(function (response) { //console.log('기사 구독 상태 조회 -> 성공'); //console.log(response); var successYn = response; if (successYn == "Y") { if (type == 'JPAGE') { $('.subsc-btn.jpage').addClass('on') } else if (type == 'TAG') { $('.subsc-btn.tag').addClass('on') } } else if (successYn == "N") { if (type == 'JPAGE') { $('.subsc-btn.jpage').removeClass('on') } else if (type == 'TAG') { $('.subsc-btn.tag').removeClass('on') } } }).fail(function (err) { console.log('태그 구독 조회-> 에러'); $('div[data-el="sideHashNews"]').hide(); }); } } //getUsersSubscriptionCheckTagId("TAG",""); })(window, document); </script> </div> <!-- // floating-banner --> <!-- floating-tool --> <section class="side-tool-box-pnl"> <ul class="side-tool-grp"> <li class="item"><button class="innerlink icon-toolbox-view-mode">읽기모드</button></li> <li class="item"><button class="innerlink icon-toolbox-text-size">본문크기</button></li> <li class="item"> <button onclick="$('#bottom-save-article-btn').trigger('click')" class="innerlink icon-toolbox-bookmark">북마크</button> </li> <li class="item"><button class="innerlink icon-toolbox-share">공유하기</button></li> <li class="item"><button class="innerlink icon-toolbox-print" onclick="window.open('../Read/Print/' + 'A2024112616470002937', '')">프린트</button></li> <li class="item type2 divide-gray-line"> <button class="innerlink icon-toolbox-like" onclick="endBtnLike.$btn.trigger('click')"> <span class="blind">좋아요</span> <span class="count3" id="bottom-like-cnt_side">0</span> </button> </li> <li class="item type2"> <button class="innerlink icon-toolbox-unlike" onclick="endBtnDislike.$btn.trigger('click')"> <span class="blind">싫어요</span> <span class="count" id="article-dislike-btn_side">0</span> </button> </li> <li class="item type2"> <button class="innerlink icon-toolbox-cmmt tooltipbox-scroll-ani"> <span class="blind">댓글달기</span> <span class="count on" id="commentCntSpan_side">0</span> <!-- 2023-07-03 댓글 스크롤 최종 적용 / 2023-05-22 카카오 스크롤 에니메이션 적용관련 : .toolbox-scroll-show 추가 --> <div class="toolbox-scroll-show" id="bestCommentScrollShow"> <div class="toolbox-scroll-show__inner"> <strong class="toolbox-scroll-show__tit" id="bestCommentNickName"> sksgabcd </strong> <span class="toolbox-scroll-show__txt" id="bestCommentContents"> 공감합니다. 앞으로도 좋은 기사 부탁드려요 좋은 결정을…</span> <!-- 2023-07-31 로티 이미지 추가 --> <span class="toolbox-scroll-show__lottie" id="toolbox-coment-lottie"></span> <!-- //2023-07-31 로티 이미지 추가 --> </div> </div> <!-- // 2023-07-03 댓글 스크롤 최종 적용 / 2023-05-22 카카오 스크롤 에니메이션 적용관련 : .toolbox-scroll-show 추가 --> </button> </li> </ul> <!-- 읽기모드 설정 박스 //--> <ul class="tool-box bg-set"> <li class="bg-set-rdo"> <input type="radio" name="rdo_bg" id="rdo_bg_01" data-color="white"> <label for="rdo_bg_01" title="배경 설정"> <span class="blind">흰색 배경</span> </label> </li> <li class="bg-set-rdo bg-black"> <input type="radio" name="rdo_bg" id="rdo_bg_03" data-color="black"> <label for="rdo_bg_03" title="배경 설정"> <span class="blind">검은색 배경</span> </label> </li> </ul> <!--// 읽기모드 설정 박스 --> <!-- 공유하기 설정 박스 //--> <ul class="tool-box share-list tooltip"> <li class="kakao"><a href="javascript:;" onclick="onClickShareKakao()" class="btn-close"><span class="blind">카카오</span></a></li> <li class="facebook"><a href="javascript:;" onclick="onClickShareFB()" class="btn-close"><span class="blind">페이스북</span></a></li> <li class="twitter"><a href="javascript:;" data-js="twitter-share" onclick="onClickShareTwitter()" class="btn-close"><span class="blind">트위터</span></a></li> <li class="email"><a href="javascript:;" onclick="onClickShareEmail()" class="btn-close"><span class="blind">이메일</span></a></li> <li class="url toast-box"> <a href="javascript:;" onclick="copyCurrentUrlToClipboard()" class="btn-close btn-copy"><span class="blind">URL</span></a> </li> </ul> <!-- .toast-popup --> <div class="toast-popup left"> <p>기사 URL이 복사되었습니다.</p> </div> <!-- 복사된 값이 저장됨 --> <input type="hidden" class="copied-value"> <!-- // .toast-popup --> <!--// 공유하기 설정 박스 --> <!-- 본문크기 설정 박스 //--> <ul class="tool-box scale type1"> <div class="scale-set"> <ul class="scale-set-list"> <li class="item" data-size="14"><a href="javascript:;" class="innerlink scale-fs14">가</a></li> <li class="item" data-size="16"><a href="javascript:;" class="innerlink scale-fs16">가</a></li> <li class="item" data-size="18"><a href="javascript:;" class="innerlink scale-fs18 on">가</a></li> <li class="item" data-size="22"><a href="javascript:;" class="innerlink scale-fs22">가</a></li> <li class="item" data-size="26"><a href="javascript:;" class="innerlink scale-fs26">가</a></li> </ul> </div> </ul> <!--// 본문크기 설정 박스 --> </section> <script> //베스트 댓글 조회 function fn_getBestComment() { //댓글 리스트 조회 $.ajax({ url: '/article/A2024112616470002937/comment/best?Page=0&sort=likeCnt,desc', method: "GET", contentType: 'application/json' }).success(function (response) { commentData = response; $('#bestCommentScrollShow').hide(); if (commentData.total !== 0) { $('#bestCommentScrollShow').show(); var item = commentData.list[0]; item.contents = item.contents.replace(/\n/g, ' '); if($('#bestCommentNickName').length > 0) { $('#bestCommentNickName').empty(); } if($('#bestCommentContents').length > 0) { $('#bestCommentContents').empty(); } //test $('#bestCommentNickName').html(item.penName); $('#bestCommentContents').html(item.contents); } }) } $(function(){ fn_getBestComment(); }); </script> <!-- 2023-05-22 댓글 코멘트 스크롤 추가 관련 --> <script> const scrollTriggerElement = document.querySelector(".writer"); const scrollAniElement = document.querySelector(".tooltipbox-scroll-ani"); let lastScrollTop = 0; var lottieToolboxComent; let scrollTimer ; function handleComentScroll() { const windowHeight = window.innerHeight; const rect = scrollTriggerElement.getBoundingClientRect(); const sideToolGrp = document.querySelector(".side-tool-box-pnl"); const sideToolGrpRect = sideToolGrp.getBoundingClientRect(); const scrollY = window.scrollY || window.pageYOffset; const endElement = document.querySelector(".comment-title"); const endElementRect = endElement.getBoundingClientRect(); const endPoint = endElementRect.top - rect.bottom; const toolboxLottieAni = {}; if (window.pageYOffset > lastScrollTop) { // 스크롤 내림 이벤트 실행 if (sideToolGrpRect.bottom > rect.top && sideToolGrpRect.bottom < rect.top + endPoint) { clearTimeout(scrollTimer); scrollAniElement.classList.add("open"); } else if(sideToolGrpRect.bottom > rect.top && sideToolGrpRect.bottom > rect.top + endPoint) { scrollTimer = setTimeout(function () { scrollAniElement.classList.remove("open"); }, 1500); } } else { // 스크롤 올림 이벤트 실행 if (sideToolGrpRect.bottom <= rect.top && sideToolGrpRect.bottom <= rect.top + endPoint) { scrollTimer = setTimeout(function () { scrollAniElement.classList.remove("open"); }, 1500); } } lastScrollTop = window.pageYOffset; } function debounce(func, delay) { let timer; return function () { const context = this; const args = arguments; clearTimeout(timer); timer = setTimeout(function () { func.apply(context, args); }, delay); }; } window.addEventListener("resize", handleComentScroll); window.addEventListener("scroll", debounce(handleComentScroll, 200)); </script> <!-- //2023-05-22 댓글 코멘트 스크롤 추가 관련 --> <!-- 2023-07-31 댓글 코멘트 스크롤 내 로티 이미지 추가 --> <script> $(function(){ var lottieToolboxComent = bodymovin.loadAnimation({ container: document.getElementById('toolbox-coment-lottie'), renderer: "svg", loop: true, autoplay: true, path: '../../js/lottieJson/lottie-scroll-toolbox.json' }); }); </script> <!-- //2023-07-31 댓글 코멘트 스크롤 내 로티 이미지 추가 --> <!-- // floating-tool --> </div> <!-- // .inner --> </div> <!-- // .end-body --> <!-- .comment-area --> <div class="comment-area"> <!-- .inner --> <div class="inner"> <!-- .comment-title --> <h3 class="comment-title">댓글<span class="count">0</span> </h3> <!-- // .comment-title --> <!-- .comment-edit --> <div class="comment-edit"> <button id="commentInputContainer" type="button" class="btn-open-edit"> 댓글을 입력해 주세요. <span class="btn-reg">등록</span> </button> <div class="textarea-wrap"> <div class="textarea"> <textarea onfocus="onFocusInput();" id="commentInput" rows="4" maxlength="250" placeholder="성적 불쾌감을 주는 표현, 욕설, 혐오, 비하, 명예훼손, 권리침해 등의 내용을 게시하면 운영정책 및 관련 법률에 의해 제재 받을 수 있습니다. 모든 작성자는 작성한 글에 대한 법적 책임을 갖습니다."></textarea> </div> <div class="textarea-bottom"> <span id="commentInputCount" class="count"><strong>0</strong> / 250</span> <button id="submitCommentButton" class="btn-reg" type="button" disabled onclick="onClickSubmitComment()">등록 </button> </div> </div> </div> <!-- // .comment-edit --> <!-- .comment-sort-tab --> <div class="comment-sort-tab"> <a id="sortLike" href="javascript:onClickSort('like', this)" class="anchor on">좋아요순</a> <a id="sortRecent" href="javascript:onClickSort('recent', this)" class="anchor">최신순</a> <a href="javascript:onClickRefresh()" class="refresh">새로고침</a> </div> <!-- // .comment-sort-tab --> <!-- .comment-list --> <div class="comment-list"> <ul id="comment-parent-container"> </ul> <!-- // .list-paging --> </div> <!-- // .comment-list --> <div class="end-ad-container"> <!-- Dable 하단_그리드_PC / For inquiries, visit http://dable.io --> <div id="taboola-below-article-thumbnails-2" class="gtm-interest-articles"></div> <script> window._taboola = window._taboola || []; _taboola.push({ mode: 'organic-thumbnails-b', container: 'taboola-below-article-thumbnails-2', placement: 'Below Article Thumbnails 2', target_type: 'mix' }); </script> </div> <div class="end-ad-container"> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_3-1@640x250"></script> </div> <div class="ad-item"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_3-2@640x250"></script> </div> </div> </div> <!-- // .inner --> <!-- .banner-right --> <!-- // .banner-right --> </div> <!-- .ad-banner --> <!-- // .ad-banner --> <div class="popup-alert report-popup large"> <strong class="tit"> 댓글 신고 </strong> <button class="btn-close" onclick="$('.report-popup').closePopup();"> <span class="blind">닫기</span> </button> <div class="cont"> <strong class="tit">신고 사유를 선택해주세요.</strong> <div class="radio-list"> <label> <input type="radio" value="Discomfort" name="report-radio" checked> <span>불쾌감 조성 (비방/욕설/인신공격)</span> </label> <label> <input type="radio" value="IllegalAD" name="report-radio"> <span>불법 광고 또는 스팸</span> </label> <label> <input type="radio" value="ObscenePost" name="report-radio"> <span>음란성 게시글</span> </label> <label> <input type="radio" value="PersonalInfringement" name="report-radio"> <span>사생활 침해 또는 명예훼손</span> </label> </div> </div> <div class="btn-area"> <!-- <button class="btn-box-black" type="button">확인</button> --> <button class="btn-black font-gray" type="button" onclick="$('.report-popup').closePopup();">취소</button> <button class="btn-black font-medium" type="button" onclick="onClickSubmitCommentReport()">확인</button> </div> </div> <div id="comment-delete-popup" class="popup-alert"> <strong class="tit"> 삭제 확인 </strong> <div class="cont"> <p> 작성하신 글을 삭제하시겠습니까? </p> </div> <div class="btn-area"> <button class="btn-gray" type="button" onclick="$('#comment-delete-popup').closePopup();">아니오</button> <button class="btn-black" type="button" onclick="deleteComment()">네</button> </div> </div> <script> var selectedComment, isInit = false; var selectedSort = 'likeCnt,desc'; var commentData = { total: 0, list: [], pageNum: 0, pageSize: 0, size: 0, startRow: 0, endRow: 0, pages: 0, prePage: 0, nextPage: 0, isFirstPage: false, isLastPage: false, hasPreviousPage: false, hasNextPage: false, navigatePages: 0, navigatepageNums: [], navigateFirstPage: 0, navigateLastPage: 0, }; // 페이징 시작 페이지 var begin; // 페이징 끝 페이지 var end; // 현재 url을 받는다 var currentUrl = unescape(location.href); //파라미터만 자르고, 다시 &그분자를 잘라서 배열에 넣는다. var paramArr = (currentUrl.substring(currentUrl.indexOf("?") + 1, currentUrl.length)).split("&"); // Page를 제외한 parameters var parameters = ""; for (var i = 1; i < paramArr.length; i++) { parameters += "&" + paramArr[i]; } var selectedOpinionIdForReport; var selectedOpinionIdForDelete; var sch = location.search; var params = new URLSearchParams(sch); var commentId = params.get('commentId'); var commentPage = params.get('commentPage'); var replyId = params.get('replyId'); if (commentId != null && commentPage != null) { getComments('likeCnt,desc', commentPage); } else { // 페이지가 켜지면 댓글들을 받아온다 getComments('likeCnt,desc', '0'); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 댓글 달기 클릭시 로그인 체크 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onFocusInput() { if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 댓글 달기 클릭시 css 변화 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onFocusCommentInput(id) { if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } $('#commentReplyInput' + id).on('keyup', function (input) { if (input.target.value.length > 0) { $('#commentSubmitButton' + id).prop("disabled", false) } else { $('#commentSubmitButton' + id).prop("disabled", true) } $('#commentReplyInputCount' + id).html('<strong>' + input.target.value.length + '</strong> / 250'); }) } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 답글 달기 클릭시 css 변화 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickCommentReplyInput(id) { if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } setTimeout(function () { $('#commentReplyInput' + id).focus(); }, 100); $('#commentReplyInputContainer' + id).addClass('on'); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 신고 등록 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSubmitCommentReport() { var selectedReportType = $("input[name='report-radio']:checked").val(); // console.log(selectedReportType); if (selectedOpinionIdForReport !== undefined) { addReport(selectedOpinionIdForReport, selectedReportType); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 등록하기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSubmitComment() { //return false; $('#submitCommentButton').attr('disabled', true); var comment = $('#commentInput').val(); if (comment.length < 251) { $.ajax({ url: '/article/A2024112616470002937/comment', method: "POST", contentType: 'application/json', data: JSON.stringify({ contents: comment, }) }).success(function (response) { setGoogleAnalyticsArticleComment(); $('#submitCommentButton').attr('disabled', false); if (checkCondition(response) > 0) return; getComments(selectedSort, commentData.pageNum); $('#commentInput').val(''); $('#commentInputContainer').removeClass('on'); $('#commentInputCount').html('<strong>0</strong> / 250') //댓글토스트 //fn_getBestComment(); }).fail(function (err) { }); } } function setGoogleAnalyticsArticleComment() { var headline = $('meta[name="headline"]').attr('content'); var content_category = $('meta[name="content_category"]').attr('content'); var content_subcategory = $('meta[name="content_subcategory"]').attr('content'); var article_type = $('meta[name="article_type"]' ).attr('content'); var article_length = $('meta[name="article_length"]' ).attr('content'); if (Cookies.get('accessToken') !== undefined) { window.dataLayer = window.dataLayer || []; $.ajax({ url: '/google-analytics/user-details-decrypt', type: 'GET', contentType: 'application/json', success: function (data) { dataLayer.push({ 'event': 'comment', 'user_id': data.user_id, 'gender': data.gender, 'yob': data.yob, 'headline': headline, 'content_category': content_category, 'content_subcategory': content_subcategory, 'article_type': article_type, 'article_length': article_length, }); }, error: function () { } }); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 답글 등록하기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSubmitCommentReply(id) { //return false; $('#commentSubmitButton' + id).attr('disabled', true); var commentReply = $('#commentReplyInput' + id).val(); var url = '/article/A2024112616470002937/comment'; if (commentReply.length < 251) { $.ajax({ url: url, method: "POST", contentType: 'application/json', data: JSON.stringify({ contents: commentReply, opinionParentId: id }) }).success(function (response) { $('#commentSubmitButton' + id).attr('disabled', false); if (checkCondition(response) > 0) return; getComments(selectedSort, commentData.pageNum); }).fail(function (err) { }); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 답글 toggle - 열고 닫기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickToggleReply(id) { $('#commentReply' + id).toggleClass('blind'); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 답글 전체보기 toggle 버튼 - 열고 닫기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickShowAllReply(id) { // console.log(id); // console.log($('#commentReplyShowAllButton' + id).text()); if ($('#commentReplyShowAllButton' + id).text() === '전체보기') { var children = $('#comment-children-container' + id).children(); // 전체보기 클릭시 숨어있는 리스트 보여준다. for (var i = 0; i < children.length; i++) { $(children[i]).removeClass('blind'); } $('#commentReplyShowAllButton' + id).html("전체접기"); $('#commentReplyShowAllButton' + id).toggleClass("on"); $('#commentReply' + id).removeClass('blind'); } else { $('#commentReplyShowAllButton' + id).html("전체보기"); $('#commentReplyShowAllButton' + id).toggleClass("on"); $('#commentReply' + id).addClass('blind'); scrollTo(id); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 좋아요 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickLike(id) { addSympathy(id, 'Like') } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 싫어요 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickDislike(id) { addSympathy(id, 'Dislike'); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 신고 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickReport(id) { if (Cookies.get('accessToken') === undefined) { $('#sign-in-request-alert').openPopup(); return; } // console.log(id); selectedOpinionIdForReport = id; $('.report-popup').openPopup(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 삭제하기 팝업 오픈 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickDeleteComment(id) { selectedOpinionIdForDelete = id; $('#comment-delete-popup').openPopup(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 댓글 삭제하기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function deleteComment() { //return false; if (selectedOpinionIdForDelete === undefined) { return; } var url = '/article/A2024112616470002937/comment/' + selectedOpinionIdForDelete; // console.log(url); $.ajax({ url: url, method: 'DELETE' }).success(function (response) { // console.log('기사 댓글 삭제 -> 성공'); // console.log(response); var flag = response; if (flag) { alert("댓글이 삭제되었습니다."); $('#comment-delete-popup').closePopup(); $('#comment-parent-container').empty(); getComments(selectedSort, commentData.pageNum); selectedOpinionIdForDelete = undefined; //댓글토스트 //fn_getBestComment(); } else { alert("댓글 삭제 에러"); $('#comment-delete-popup').closePopup(); selectedOpinionIdForDelete = undefined; } }).fail(function (err) { // console.log('기사 댓글 삭제 -> 에러'); }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 공감 추가 함수 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function addSympathy(id, type) { //return false; var url = '/comment/' + id + '?opinionSympathyType=' + type + '&articleId=A2024112616470002937'; // console.log('공감 추가 -> ' + url); $.ajax({ url: url, method: 'POST', contentType: 'application/json', }).success(function (response) { // console.log('공감 추가 -> 성공'); if (response.code === '0000') { if (type === 'Like') { var button = $('#commentLikeButton' + id).html().toString(); var currentCount = parseInt(button.replace('<span class="thumb">좋아요</span>', '')); $('#commentLikeButton' + id).addClass('on'); $('#commentLikeButton' + id).html('<span class="thumb">좋아요</span>' + (currentCount + 1)); } else if (type === 'Dislike') { var button = $('#commentDislikeButton' + id).html().toString(); var currentCount = parseInt(button.replace('<span class="thumb">싫어요</span>', '')); $('#commentDislikeButton' + id).html('<span class="thumb">싫어요</span>' + (currentCount + 1)); $('#commentDislikeButton' + id).addClass('on'); } } else if (response.code === 'EXIST_SYMPATHY') { deleteSympathy(id, type); } else { alert('댓글 공감 에러'); } //fn_getBestComment(); // console.log(response); }).fail(function (err) { // console.log('공감 추가 -> 에러'); }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 공감 제거 함수 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function deleteSympathy(id, type) { //return false; var url = '/comment/' + id + '?opinionSympathyType=' + type + '&articleId=A2024112616470002937'; // console.log('공감 삭제 -> ' + url); $.ajax({ url: url, method: 'DELETE', contentType: 'application/json' }).success(function (response) { if (response.code === '0000') { if (type === 'Like') { var button = $('#commentLikeButton' + id).html().toString(); var currentCount = parseInt(button.replace('<span class="thumb">좋아요</span>', '')); $('#commentLikeButton' + id).html('<span class="thumb">좋아요</span>' + (currentCount - 1)) $('#commentLikeButton' + id).removeClass('on'); } else if (type === 'Dislike') { var button = $('#commentDislikeButton' + id).html().toString(); var currentCount = parseInt(button.replace('<span class="thumb">싫어요</span>', '')); button.replace('<span class="thumb">싫어요</span>', '') $('#commentDislikeButton' + id).html('<span class="thumb">싫어요</span>' + (currentCount - 1)) $('#commentDislikeButton' + id).removeClass('on'); } } else { alert('댓글 공감 에러'); } //fn_getBestComment(); }).fail(function (err) { }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 신고하기 함수 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function addReport(id, reportType) { //return false; var url = '/comment/' + id + '?opinionSympathyType=Report&rptType=' + reportType; // console.log('신고하기 등록 -> ' + url); $.ajax({ url: url, method: 'POST', contentType: 'application/json', }).success(function (response) { selectedOpinionIdForReport = undefined; // $('.popup-alert').closePopup(); $('.report-popup').closePopup(); if (response.code === '0000') { alert("신고가 접수되었습니다."); // 이미 공감이 있으면 삭제 없으면 추가 } else if (response.code === 'EXIST_SYMPATHY') { alert('이미 신고한 댓글입니다.'); } else { alert('댓글 신고 에러'); } }).fail(function (err) { alert("신고하기 에러 발생"); selectedOpinionIdForReport = undefined; }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 댓글 조회 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux @param sort URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux @param pageNum URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function getComments(sort, pageNum) { //return false; if(isInit){ $.ajax({ url: '/article/operation/more/A2024112616470002937', method: "GET", contentType: 'application/json', async: false, }).success(function (response) { if (response != undefined && response != null && response != '') { if (response.memberOpinionYn == 'N') { $('.comment-area .inner').hide(); $('.comment-area').css({padding: 0}); return; } } }); } var url = '/article/A2024112616470002937/comment?Page=' + pageNum + '&sort=' + sort; // console.log('기사 댓글 조회 -> ' + url); $.ajax({ url: url, method: "GET", contentType: 'application/json' }).success(function (response) { commentData = response; // 토탈 댓글 개수 설정 위쪽 $('#commentCntSpan').html('' + commentData.total + ''); $('#commentCntSpan_side').html('' + commentData.total + ''); $('#commentCntSpan_top').html('' + commentData.total + ''); // 댓글 총 개수 설정 아래쪽 $('.comment-title').html('댓글<span class="count">' + commentData.total + '</span>'); // 리스트 초기화 $('.comment-list').html('<ul id="comment-parent-container"></ul>'); if (commentData.total !== 0) { begin = (commentData.pageNum / 10) URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 10 + 1; if (commentData.pageNum % 10 === 0) { begin -= 10; } end = begin + 9; if (commentData.pages < begin + 9) { end = begin; } // 댓글이 없을 때 보여지는 element 제거 $('.comment-empty').remove(); for (var i = 0; i < commentData.list.length; i++) { // 아이템 var item; // 삭제 or 신고 버튼 var deleteReportButton; // 전체보기 버튼 var showAllButtonFlag = 'blind'; item = commentData.list[i]; item.contents = item.contents.replace(/\n/g, '<br>'); // 전체보기 버튼 유무 설정 if (item.children.length >= 10) { showAllButtonFlag = ''; } // 본인이 쓴 댓글이면 삭제 버튼, 타인이 쓴 댓글이면 신고 버튼 if (item.isOwner) { deleteReportButton = '<a id="reportDeleteButton' + item.opinionId + '" href="javascript:onClickDeleteComment(\'' + item.opinionId + '\')" class="report">삭제</a>' } else { deleteReportButton = '<a id="reportDeleteButton' + item.opinionId + '" href="javascript:onClickReport(\'' + item.opinionId + '\')" class="report">신고</a>' } $('#comment-parent-container').append('<li class="comment-item" id="comment' + item.opinionId + '">\n' + ' <!-- .comment-box -->\n' + ' <div class="comment-box">\n' + ' <div class="info">\n' + ' <span class="id">' + item.penName + '</span>\n' + ' <span class="date">' + getFormattedDate(item.createdDt, 'yyyy.mm.dd hh:mm') + '</span>\n' + ' <span class="bar"></span>\n' + deleteReportButton + ' </div>\n' + ' <div class="text">\n' + ' ' + item.contents + '\n' + ' </div>\n' + ' <div class="tool">\n' + ' <button type="button" class="btn-reply" onclick="onClickToggleReply(\'' + item.opinionId + '\')">답글<span class="count">' + item.children.length + '</span></button>\n' + ' <div class="btn-area">\n' + ' <button id="commentLikeButton' + item.opinionId + '" class="btn-thumbup" onclick="onClickLike(\'' + item.opinionId + '\')"><span\n' + ' class="thumb">좋아요</span>' + item.likeCnt + '</button>\n' + ' <button id="commentDislikeButton' + item.opinionId + '" class="btn-thumbdown" onclick="onClickDislike(\'' + item.opinionId + '\')"><span class="thumb">싫어요</span>' + item.dislikeCnt + '</button>\n' + ' </div>\n' + ' </div>\n' + ' </div>\n' + ' <div class="reply-list blind" id="commentReply' + item.opinionId + '">\n' + ' <!-- .reply-edit -->\n' + ' <div class="reply-edit" onclick="onClickCommentReplyInput(\'' + item.opinionId + '\')">\n' + ' <button id="commentReplyInputContainer' + item.opinionId + '" type="button" class="btn-open-edit">답글을 입력 해주세요.\n' + ' <span class="btn-reg">등록</span>\n' + ' </button>\n' + ' <div class="textarea-wrap">\n' + ' <div class="textarea">\n' + ' <textarea onfocus="onFocusCommentInput(\'' + item.opinionId + '\')" id="commentReplyInput' + item.opinionId + '" rows="3" maxlength="250"\n' + ' placeholder="성적 불쾌감을 주는 표현, 욕설, 혐오, 비하, 명예훼손, 권리침해 등의 내용을 게시하면 운영정책 및 관련 법률에 의해 제재 받을 수 있습니다. 모든 작성자는 작성한 글에 대한 법적 책임을 갖습니다."></textarea>\n' + ' </div>\n' + ' <div class="textarea-bottom">\n' + ' <span id="commentReplyInputCount' + item.opinionId + '" class="count"><strong>0</strong> / 250</span>\n' + ' <button id="commentSubmitButton' + item.opinionId + '" class="btn-reg" type="button" disabled onclick="onClickSubmitCommentReply(\'' + item.opinionId + '\')">등록</button>\n' + ' </div>\n' + ' </div>\n' + ' </div>\n' + ' <!-- // .reply-edit -->\n' + ' <ul id="comment-children-container' + item.opinionId + '">\n' + ' \n' + ' </ul>\n' + ' <!-- .btn-all -->\n' + ' \n' + ' <button id="commentReplyShowAllButton' + item.opinionId + '" class="btn-all ' + showAllButtonFlag + '"\n' + ' onClick="onClickShowAllReply(\'' + item.opinionId + '\')">전체보기</button>\n' + ' <!-- // .btn-all -->\n' + ' </div>\n' + '</li>'); // 답글 for (var j = 0; j < item.children.length; j++) { var childrenItem = item.children[j]; childrenItem.contents = childrenItem.contents.replace(/\n/g, '<br>'); var blindClass = ""; var childDeleteReportButton; // 본인이 쓴 댓글이면 삭제 버튼, 타인이 쓴 댓글이면 신고 버튼 if (childrenItem.isOwner) { childDeleteReportButton = '<a id="reportDeleteButton' + childrenItem.opinionId + '" href="javascript:onClickDeleteComment(\'' + childrenItem.opinionId + '\')" class="report">삭제</a>' } else { childDeleteReportButton = '<a id="reportDeleteButton' + childrenItem.opinionId + '" href="javascript:onClickReport(\'' + childrenItem.opinionId + '\')" class="report">신고</a>' } if (j > 9) { blindClass = "blind"; } $('#comment-children-container' + item.opinionId).append('<li class="' + blindClass + '">\n' + ' <div class="comment-box">\n' + ' <div class="info">\n' + ' <span class="id">' + childrenItem.penName + '</span>\n' + ' <span class="date">' + getFormattedDate(childrenItem.createdDt, 'yyyy.mm.dd hh:mm') + '</span>\n' + ' <span class="bar"></span>\n' + childDeleteReportButton + ' </div>\n' + ' <div class="text">\n' + ' ' + childrenItem.contents + '\n' + ' </div>\n' + ' <div class="tool">\n' + ' <div class="btn-area">\n' + ' <button id="commentLikeButton' + childrenItem.opinionId + '" class="btn-thumbup" onclick="onClickLike(\'' + childrenItem.opinionId + '\')"><span\n' + ' class="thumb">좋아요</span>' + childrenItem.likeCnt + '</button>\n' + ' <button id="commentDislikeButton' + childrenItem.opinionId + '" class="btn-thumbdown" onclick="onClickDislike(\'' + childrenItem.opinionId + '\')"><span\n' + ' class="thumb">싫어요</span>' + childrenItem.dislikeCnt + '</button>\n' + ' </div>\n' + ' </div>\n' + ' </div>\n' + '</li>'); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 페이징 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ var previousArrowStyle = ''; var nextArrowStyle = ''; var previousArrowClass = ''; var nextArrowClass = ''; // 첫페이지면 dim, 클릭불 if (commentData.pageNum === 1) { previousArrowStyle = 'pointer-events: none' previousArrowClass = 'off'; } if (commentData.pageNum === commentData.pages) { nextArrowStyle = 'pointer-events: none' nextArrowClass = 'off'; } $('.comment-list').append('<!-- .list-paging -->\n' + ' <div class="list-paging">\n' + ' \n' + ' <a href="javascript:onClickPage(1)"\n' + ' style="' + previousArrowStyle + '"\n' + ' class="start ' + previousArrowClass + '">\n' + ' <span class="blind">처음</span>\n' + ' </a>\n' + ' \n' + ' <a href="javascript:onClickPage(\'' + ((parseInt(commentData.pageNum)) - 1) + '\')"\n' + ' style="' + previousArrowStyle + '"\n' + ' class="prev ' + previousArrowClass + '">\n' + ' <span class="blind">이전</span>\n' + ' </a>\n' + ' <ul id="pagination-container">\n' + ' </ul>\n' + ' \n' + ' <a href="javascript:onClickPage(\'' + ((parseInt(commentData.pageNum)) + 1) + '\')"\n' + ' style="' + nextArrowStyle + '"\n' + ' class="next ' + nextArrowClass + '">\n' + ' <span class="blind">다음</span>\n' + ' </a>\n' + ' \n' + ' <a\n' + ' \n' + ' href="javascript:onClickPage(\'' + commentData.pages + '\')"\n' + ' style="' + nextArrowStyle + '"\n' + ' class="end ' + nextArrowClass + '">\n' + ' <span class="blind">마지막</span>\n' + ' </a>\n' + ' </div>\n' + ' <!-- // .list-paging -->'); for (var k = 1; k < commentData.pages + 1; k++) { var onClass = ''; if (commentData.pageNum === k) { onClass = 'on' } $('#pagination-container').append('<li class="anchor ' + onClass + '"><a href="javascript:onClickPage(' + k + ')">' + k + '</a></li>\n'); } } else { if ($('.inner .comment-empty').length === 0) { $('#comment-parent-container').append("<li class=\"comment-item\"><div class=\"comment-box no-content\"><p class=\"comment-empty\">첫번째 댓글을 남겨주세요.</p></div></li>"); } } if (replyId != null) { onClickToggleReply(commentId); } if (commentId != null) { scrollTo(commentId); } // 댓글 최상단으로 이동 if (pageNum !== '' && pageNum !== '0') { document.getElementById("commentInputContainer").scrollIntoView(); } // console.log('기사 댓글 조회 -> 성공'); // console.log(response); }).fail(function (err) { // console.log('기사 댓글 조회 -> 에러'); }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 페이지 변경 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux @param pageNum URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickPage(pageNum) { getComments(selectedSort, pageNum); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 새로고침 버튼 클릭 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickRefresh() { getComments(selectedSort, commentData.pageNum); //댓글토스트 //fn_getBestComment(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 기사 댓글 Sort URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSort(type) { // 좋아요 순 sort if (type === 'like') { if (selectedSort === 'likeCnt,desc') { return; } selectedSort = 'likeCnt,desc'; $('#sortLike').toggleClass('on'); $('#sortRecent').toggleClass('on'); getComments(selectedSort, ''); // 최신 순 sort } else { if (selectedSort === 'createdDt,desc') { return; } selectedSort = 'createdDt,desc'; $('#sortLike').toggleClass('on'); $('#sortRecent').toggleClass('on'); getComments(selectedSort, ''); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 해당 영역으로 스크롤 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux @param id URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function scrollTo(id) { var offset = $('#comment' + id).offset(); $('html, body').animate({scrollTop: offset.top - 200}, 400); } function checkCondition(response) { var returnVal = 0; if (response != undefined && response != null && response != '') { if (response.returnVal > 0) { if (response.returnVal == 1) { alert('댓글/답글은 60초 내에 한 개만 등록하실 수 있습니다.'); } else if (response.returnVal == 2) { alert('이미 동일 내용의 댓글을 작성하였습니다.'); } else if (response.returnVal == 3) { alert('댓글에 부적절한 표현이 포함되어 있네요. 건전한 댓글 문화를 위해 등록이 제한됩니다.'); } else if (response.returnVal >= 4) { var abuserType = '댓글 쓰기 금지'; var abuserPeriod = response.UPDATED_DT.substr(0, 10) + ' ~ ' + response.PERIOD_DT.substr(0, 10); if (response.returnVal == 5) abuserType = '기사당 한 개의 댓글만 가능'; else if (response.returnVal == 6) abuserType = '댓글 등록은 하루 한개만 가능'; if (response.ABUSER_PERIOD == '5') abuserPeriod = '영구금지'; alert( '회원 게시물 관리(제 11조 3항)에 의거하여 댓글을 등록할 수 없습니다.\n' + '제재 내용: ' + abuserType + '\n' + '제재 기간: ' + abuserPeriod ); } returnVal = response.returnVal; } } return returnVal; } </script> <script src="/js/split/comment.js"></script> <!-- // .comment-area --> <!-- dimmed --> <div class="dimmed"></div> <!-- //dimmed --> <!-- popup-alert popup-login --> <div class="popup-alert popup-login"> <!-- side-area --> <div class="side-area"> <p class="side-tit">한국일보에<br> <strong>로그인</strong>하면 다양한<br> 편의 기능을<br> 제공 받을 수 있습니다. </p> <ul> <li> <span class="graphic-04"></span> <span class="text">내 관심사대로 메인뉴스 설정</span> </li> <li> <span class="graphic-05"></span> <span class="text">구독한 콘텐츠 모아보기 제공</span> </li> <li> <span class="graphic-06"></span> <span class="text">주요기사와 추천, 활동내역 알림</span> </li> </ul> </div> <!-- // side-area --> <!-- .content-area --> <div class="content-area"> <!-- .popup-header --> <div class="popup-header"> <div class="logo"></div> <a href="javascript:;" class="btn-close" onclick="$('.popup-alert').closePopup(); refreshPage();"></a> <strong class="tit">로그인</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- .login-sns --> <ul class="login-sns"> <li class="naver" id="naver_id_login"></li> <li class="facebook" onclick="onClickFBLogin()"> <a href="javascript:;"> <span class="icon"></span> <span class="text">페이스북 로그인</span> </a> </li> <li class="kakao"> <a href="javascript:onClickKakaoLogin()"> <span class="icon"></span> <span class="text">카카오 로그인</span> </a> </li> </ul> <!-- // .login-sns --> <!-- form --> <!-- .login-input --> <ul class="login-input"> <li> <input id="loginId" type="text" placeholder="이메일" > </li> <li> <input id="loginPassword" type="password" placeholder="비밀번호" maxlength="16" autocomplete="off"/> <p id="loginFailText" class="warn blind">아이디 또는 비밀번호를 잘못 입력했습니다.(연속 1회)</p> </li> <li class="secure-list" id="captchaArea" style="display: none"> <p class="guide type-image">아래 이미지를 보이는 대로 입력해주세요.</p> <p class="guide type-sound" style="display: none;">스피커로 들리는 내용을 숫자로 입력해 주세요.</p> <!-- .secure-num --> <div class="secure-num type-image"> <!-- .img-box --> <div class="img-box"> <img style="width: 100%; height: 100%;" id="imgCaptcha"></img> </div> <!-- // .img-box --> <ul class="controller"> <li> <a href="javascript:refreshCaptcha()"> <span class="icon-refresh"></span> <span class="text">새로고침</span> </a> </li> <li> <a href="javascript:refreshCaptcha('sound')"> <span class="icon-sound"></span> <span class="text">음성으로 듣기</span> </a> </li> </ul> </div> <div class="secure-num type-sound" style="display: none"> <!-- .img-box --> <div class="img-box"> <img style="width: 100%; height: 100%; background: url(https://static.nid.naver.com/images/web/user/sp_ico_captcha.gif) no-repeat;"></img> <audio id="audioCaptcha" autoplay></audio> </div> <!-- // .img-box --> <ul class="controller"> <li> <a href="javascript:refreshCaptcha()"> <span class="icon-refresh"></span> <span class="text">새로고침</span> </a> </li> <li> <a href="javascript:refreshCaptcha('image')"> <span class="icon-sound"></span> <span class="text">이미지로 보기</span> </a> </li> </ul> </div> <!-- // .secure-num --> <!-- .input-word --> <div class="input-word"> <input type="password" id="inputCaptcha" placeholder="자동입력 방지문자" autocomplete="off"/> </div> <!-- // .input-word --> </li> <li> <button type="submit" class="btn-main" onclick="onClickSignIn()">로그인</button> <div class="save-user"> <input type="checkbox" id="saveUser" name="saveUser" onchange> <label for="saveUser">로그인 유지</label> </div> </li> </ul> <!-- // .login-input --> <!-- // form --> </div> <!-- // .cont --> <!-- .popup-footer --> <div class="popup-footer"> <!-- .go-enroll --> <div class="go-enroll"> <a href="javascript:onClickSignUp()"> <span class="text">회원가입</span> <span class="icon"></span> </a> </div> <!-- // .go-enroll --> <!-- .find-list --> <ul class="find-list"> <li> <a href="javascript:onClickFindPassword()">비밀번호 찾기</a> </li> <li> <a href="javascript:onClickFindId()">아이디 찾기</a> </li> </ul> <!-- // .find-list --> </div> <!-- // .popup-footer --> </div> <!-- // .content-area --> </div> <!-- popup-alert popup-login --> <!-- popup-alert no-account --> <div id="sign-up-duplication-alert" class="popup-alert no-account"> <strong class="tit"> 중복 가입 요청 </strong> <div class="cont"> <p> 이미 가입된 회원입니다. </p> </div> <div class="btn-area"> <button class="btn-black font-medium" type="button" onclick="$('.no-account').closePopup(); openSignInPopUp();"> 확인 </button> </div> </div> <!-- popup-alert no-account --> <!-- popup-alert auto-login --> <div class="popup-alert auto-login"> <strong class="tit"> 로그인 유지 </strong> <div class="cont"> <p> 공공장소에서 사용하는 컴퓨터에서는<br>로그인 유지 기능 사용에 유의 바랍니다. </p> </div> <div class="btn-area"> <button class="btn-gray font-medium" type="button" onclick="$('.auto-login').closePopup();">확인</button> </div> </div> <!-- popup-alert auto-login --> <!-- popup-alert find-account --> <div id="find-id-popup" class="popup-alert find-account"> <!-- .popup-header --> <div class="popup-header"> <a href="javascript:;" class="btn-close" onclick="$('.find-account').closePopup();"></a> <strong class="tit">아이디 찾기</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- form --> <ul class="find-type"> <li> <input id="findIdUserNameInput" type="text" placeholder="이름"> </li> <li> <button class="btn-main" onclick="onClickFindIdPhoneAuth()">휴대폰 인증</button> </li> </ul> <!-- // form --> <div class="bottom-link"> <a href="javascript:onClickFindPassword()">비밀번호를 잊으셨나요?</a> </div> </div> <!-- // .cont --> </div> <!-- popup-alert find-account --> <!-- popup-alert find-result --> <div id="find-id-result-popup" class="popup-alert find-result"> <!-- .popup-header --> <div class="popup-header"> <div class="logo"></div> <a href="javascript:;" class="btn-close" onclick="$('.find-result').closePopup();"></a> <strong class="tit">아이디 찾기</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <p id="find-id-guide-text" class="guide-text">손흥민/01012345678 으로 찾은 아이디 입니다.</p> <div class="result-box"> <p id="find-id-id-text" class="user-id">user@hankookilbo.com</p> <!-- <p class="user-created">2019.11.05 가입</p> --> </div> <button class="btn-main" onclick="openSignInPopUp()">로그인</button> </div> <!-- // .cont --> </div> <!-- popup-alert find-result --> <!-- 비밀번호 찾기 팝업 --> <div id="find-password-popup" class="popup-alert find-account"> <!-- .popup-header --> <div class="popup-header"> <a href="javascript:;" class="btn-close" onclick="$('.find-account').closePopup();"></a> <strong class="tit">비밀번호 찾기</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- form --> <input id="findPasswordUserIdInput" type="text" placeholder="이메일"> <p class="ttl">인증방법 선택</p> <ul class="find-type"> <li> <input type="radio" name="findType" id="findMail" class="find-mail" checked> <label for="findMail">등록된 이메일로 인증하기</label> </li> <li> <input type="radio" name="findType" id="findPhone" class="find-phone"> <label for="findPhone">휴대폰으로 인증하기</label> </li> <li class="mail-field"> <button id="findPasswordSendMailButton" class="btn-main" onclick="onClickFindPasswordSendMail()">인증메일 발송</button> </li> <li class="phone-field"> <button class="btn-main" onclick="onClickFindPasswordPhoneAuth()">휴대폰 인증</button> </li> </ul> <!-- // form --> <div class="bottom-link"> <a href="javascript:onClickFindId()">아이디를 잊으셨나요?</a> </div> </div> <!-- // .cont --> </div> <!-- popup-alert find-account --> <!-- popup-alert no-account --> <div id="find-id-no-account-popup" class="popup-alert no-account"> <strong class="tit"> 계정 정보 없음 </strong> <div class="cont"> <p> 입력하신 사용자가 존재하지 않습니다. </p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('.no-account').closePopup();">확인</button> </div> </div> <!-- popup-alert no-account --> <div id="find-password-send-mail-complete-popup" class="popup-alert send-mail"> <strong class="tit"> 인증메일 발송 </strong> <div class="cont"> <p> 인증메일이 발송되었습니다. 해당 메일 계정 확인바랍니다. (유효시간:15분) </p> </div> <div class="btn-area"> <button class="btn-gray" type="button" onclick="$('.send-mail').closePopup();">확인</button> </div> </div> <div id="find-password-request-id-popup" class="popup-alert request-id"> <strong class="tit"> 아이디 입력 요청 </strong> <div class="cont"> <p> 비밀번호를 찾으실 아이디를 <br>입력해주세요. </p> </div> <div class="btn-area"> <button class="btn-gray" type="button" onclick="$('.request-id').closePopup();">확인</button> </div> </div> <!-- 비밀번호 재설정 팝업 --> <div id="find-password-change-password-popup" class="popup-alert find-account"> <!-- .popup-header --> <div class="popup-header"> <a href="javascript:$('.find-account').closePopup();" class="btn-close"></a> <strong class="tit">비밀번호 재설정</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- form --> <ul class="find-type"> <li> <input id="findPasswordChangePasswordInput" type="password" placeholder="비밀번호 (8~16자 영문 대소문자,숫자,특수문자)" maxlength="16" autocomplete="off"/> </li> <li> <input id="findPasswordChangePasswordConfirmInput" type="password" placeholder="비밀번호 확인" maxlength="16" autocomplete="off"/> <p id="findPasswordChangePasswordGuideText" class="guide-msg blind">비밀번호가 일치합니다.</p> </li> <li> <button class="btn-main" onclick="onSubmitFindPasswordChangePassword()">확인</button> </li> </ul> <!-- // form --> </div> <!-- // .cont --> </div> <!-- popup-alert find-account --> <div id="find-password-change-password-complete-popup" class="popup-alert password-change"> <strong class="tit"> 회원 정보 수정 </strong> <div class="cont"> <p> 비밀번호가 변경되었습니다. </p> </div> <div class="btn-area"> <button class="btn-black font-medium" type="button" onclick="$('.popup-alert').closePopup(); openSignInPopUp()">확인</button> </div> </div> <div id="find-password-change-password-timeout-popup" class="popup-alert invalid-time"> <strong class="tit"> 재시도 요청 </strong> <div class="cont"> <p> 유효 시간이 종료되었습니다.<br> 다시 인증메일을 발송해주세요. </p> </div> <div class="btn-area"> <button class="btn-gray" type="button" onclick="window.close()">확인</button> </div> </div> <!-- 로그인 5회 이상 실패 팝업 --> <div id="sign-in-fail-five-time-popup" class="popup-alert fail-login"> <strong class="tit"> 로그인 5회 연속 실패 </strong> <div class="cont"> <p> 보안을 위해 비밀번호와 자동입력 방지문자를 함께 입력 바랍니다. </p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('.fail-login').closePopup();">네</button> </div> </div> <!-- 로그인 5회 이상 실패 팝업 --> <!-- 만 14세미만 회원가입불가 안내 팝업 --> <div id="sign-up-nojoin-alert" class="popup-alert no-join"> <strong class="tit"> 회원가입 불가 </strong> <div class="cont"> <p> 만 14세 이상만 회원으로 가입하실 수 있습니다. </p> </div> <div class="btn-area"> <button class="btn-black font-medium" type="button" onclick="$('.no-join').closePopup();"> 확인 </button> </div> </div> <!-- 만 14세미만 회원가입불가 안내 팝업 --> <!-- popup-alert find-account --> <div class="popup-alert find-account" id="findIdPopup"> <!-- .popup-header --> <div class="popup-header"> <a href="javascript:;" class="btn-close" onclick="$('.find-account').closePopup();"></a> <strong class="tit">아이디 찾기</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- form --> <ul class="find-type"> <li> <input type="text" placeholder="이름"> </li> <li> <button class="btn-main">휴대폰 인증</button> </li> </ul> <!-- // form --> <div class="bottom-link"> <a href="javascript:;" onclick="onClickFindPassword()">비밀번호를 잊으셨나요?</a> </div> </div> <!-- // .cont --> </div> <!-- popup-alert find-account --> <script> var signUpType = 'None'; var snsUserSignUpDto = { id: '', email: '', sex: '', birthDay: '', name: '' }; // var niceVeryfiyInfo = {}; var autoLoginFlag = false; var captchaEnabled = false; var authType; // 아이디 찾기 var findIdUserId; // 비밀번호 찾기 var findPasswordChangePasswordGuideText = $('#findPasswordChangePasswordGuideText'); var isValidFindPasswordChangePassword = false; var findPasswordUserId; var findPasswordPassword; var findPasswordPasswordConfirm; var sendEmailTimeRemain = 900; var loginReplaceUrl = ''; // 자동로그인 눌렀을 때 리스너 $("#saveUser").on("ifChanged", function () { setTimeout(function () { autoLoginFlag = $('input:checkbox[id="saveUser"]').is(":checked"); // // console.log(autoLoginFlag); if (autoLoginFlag) { $('.popup-alert.auto-login').openPopup(); } }, 100); }); if(Cookies.get('auth_key') != null) { $('#find-password-change-password-popup').openPopup(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 아이디 찾기 본인인증 요청 함수 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickFindIdPhoneAuth() { findIdUserId = $('#findIdUserNameInput').val(); if (findIdUserId !== undefined && findIdUserId.length !== 0) { $.ajax({ type: "GET", url: '/users/exist?memName=' + encodeURIComponent(findIdUserId), cache: false, async : false }).success(function (response) { // console.log(response); // 사용자가 있으면 var flag = response.flag; if (flag) { authType = 'idfind'; $('#find-id-popup').closePopup(); $('#findIdUserNameInput').val(''); openCpPopup(); // 사용자가 없으면 } else { $('#find-id-no-account-popup').openPopup(); } }).fail(function (response) { // console.log('아이디 찾기 에러') }); } else { // 아이디 입력 요청 팝업을 띄운다. $('#find-password-request-id-popup').openPopup(); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 비밀번호 찾기 본인인증 요청 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickFindPasswordPhoneAuth() { findPasswordUserId = $('#findPasswordUserIdInput').val(); if (findPasswordUserId !== undefined && findPasswordUserId.length !== 0) { $.ajax({ type: "GET", url: '/users/exist?memId=' + findPasswordUserId, cache: false, async : false }).success(function (response) { // console.log(response); // 사용자가 있으면 var flag = response.flag; if (flag) { authType = 'pwfind'; $('#find-password-popup').closePopup(); openCpPopup(); // 사용자가 없으면 } else { $('#find-id-no-account-popup').openPopup(); } }).fail(function (response) { // console.log('아이디 찾기 에러') }); } else { // 아이디 입력 요청 팝업을 띄운다. $('#find-password-request-id-popup').openPopup(); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 비밀번호 찾기 본인 인증 후 비밀번호 수정 버튼 클릭 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onSubmitFindPasswordChangePassword() { if (isValidFindPasswordChangePassword) { var password = $("#findPasswordChangePasswordInput").val(); $.ajax({ type: "PATCH", url: '/users/me/password', contentType: 'application/json', data: JSON.stringify({ memId: findPasswordUserId, password: password, authKey: Cookies.get('auth_key') }) }).success(function (response) { // console.log(response); var flag = response; // 성공 if (flag === "true") { Cookies.remove('auth_key') $('#find-password-change-password-popup').closePopup(); $('#find-password-change-password-complete-popup').openPopup(); // 실패 } else if (flag === "false") { alert('시간초과'); Cookies.remove('auth_key') } else if (flag === "error") { $('#find-password-change-password-timeout-popup').openPopup(); Cookies.remove('auth_key') } }).fail(function (response) { $('#find-password-change-password-popup').closePopup(); alert('에러 발생 - 인증요청을 다시 진행해주세요.'); Cookies.remove('auth_key') window.close(); }); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 비밀번호 찾기 이메일 인증 보내기 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickFindPasswordSendMail() { findPasswordUserId = $('#findPasswordUserIdInput').val(); if (findPasswordUserId !== undefined && findPasswordUserId.length !== 0) { /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 해당 계정이 존재하는지 확인 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ $.ajax({ type: "GET", url: '/users/exist?memId=' + findPasswordUserId, cache: false, async : false }).success(function (response) { // console.log(response); var flag = response.flag; // 사용자가 있으면 if (flag) { /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 계정이 존재하면 인증메일을 발송한다. URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ $.ajax({ type: "POST", url: '/auth/password/send-email', contentType: 'application/json', data: JSON.stringify({ authTool: 'Email', authDiv: 'pwfind', reqEmail: findPasswordUserId }) }).success(function (response) { // console.log(response); var flag2 = response; if (flag2) { $('#find-password-send-mail-complete-popup').openPopup(); sendEmailTimeRemain = 900; var minute; var second; var timer = setInterval(function() { if (sendEmailTimeRemain == 0) { clearInterval(timer); } minute = parseInt(sendEmailTimeRemain / 60, 10); second = sendEmailTimeRemain - minute URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 60; sendEmailTimeRemain--; $('#findPasswordSendMailButton').html('인증메일 재발송( ' + ("00" + minute.toString()).slice(-2) + ':' + ("00" + second.toString()).slice(-2) + ' )') }, 1000); } else { } }).fail(function (response) { // console.log('아이디 찾기 에러') }); // 사용자가 없으면 } else { $('#find-id-no-account-popup').openPopup(); } }).fail(function (response) { // console.log('아이디 찾기 에러') }); } else { // 아이디 입력 요청 팝업을 띄운다. $('#find-password-request-id-popup').openPopup(); } } $("#findPasswordChangePasswordInput").on('keyup', function (input) { // comment = value; findPasswordPassword = input.target.value; // 비밀번호 정규식이 일치하지 않으면 if (!passwordRegex.test(findPasswordPassword) && !passwordRegex2.test(findPasswordPassword)) { findPasswordChangePasswordGuideText.text('8~16자 영문 대소문자, 숫자 및 특수문자를 사용해주세요'); findPasswordChangePasswordGuideText.removeClass('blind').addClass('warn'); isValidFindPasswordChangePassword = false; // 비밀번호가 일치하지 않으면 } else if (findPasswordPassword !== findPasswordPasswordConfirm) { findPasswordChangePasswordGuideText.text('비밀번호가 일치하지 않습니다.'); findPasswordChangePasswordGuideText.removeClass('blind').addClass('warn'); isValidFindPasswordChangePassword = false; // 비밀번호가 일치하면 } else { findPasswordChangePasswordGuideText.text('비밀번호가 일치합니다.'); findPasswordChangePasswordGuideText.removeClass('blind warn'); isValidFindPasswordChangePassword = true; } // your code here }); $("#findPasswordChangePasswordConfirmInput").on('keyup', function (input) { findPasswordPasswordConfirm = input.target.value; // 비밀번호 정규식이 일치하지 않으면 if (!passwordRegex.test(findPasswordPasswordConfirm) && !passwordRegex2.test(findPasswordPasswordConfirm)) { findPasswordChangePasswordGuideText.text('8~16자 영문 대소문자, 숫자 및 특수문자를 사용해주세요'); findPasswordChangePasswordGuideText.removeClass('blind').addClass('warn'); isValidFindPasswordChangePassword = false; // 비밀번호가 일치하지 않으면 } else if (findPasswordPassword !== findPasswordPasswordConfirm) { findPasswordChangePasswordGuideText.text('비밀번호가 일치하지 않습니다.'); findPasswordChangePasswordGuideText.removeClass('blind').addClass('warn'); isValidFindPasswordChangePassword = false; // 비밀번호가 일치하면 } else { findPasswordChangePasswordGuideText.text('비밀번호가 일치합니다.'); findPasswordChangePasswordGuideText.removeClass('blind warn'); isValidFindPasswordChangePassword = true; } }); /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 로그인 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function onClickSignIn() { if (captchaEnabled) { if ($('#inputCaptcha').val() === '') alert('캡차를 입력해주세요.') } $.ajax({ url: '/auth/sign-in', type: 'POST', data: JSON.stringify({ userId: $('#loginId').val(), password: $('#loginPassword').val(), captchaType: captchaType, captchaKey: captchaKey, captchaValue: $('#inputCaptcha').val(), autoLoginFlag: autoLoginFlag }), contentType: 'application/json', timeout: 30000, success: function (data) { // 로그인 실패했을 경우 if (data.loginFailCount) { // console.log('fail'); $('#loginFailText').text("아이디 또는 비밀번호를 잘못입력했습니다.(연속 " + data.loginFailCount + "회)"); $('#loginFailText').removeClass('blind'); if (data.loginFailCount >= 5) { $('#sign-in-fail-five-time-popup').openPopup(); // 로그인 5회 이상 실패하면 캡차를 보여준다. captchaEnabled = true; refreshCaptcha(); return; } // 로그인 성공했을 경우 } else { if (data === 'not found user') { alert('존재하지 않는 회원입니다.'); return; } // 자동로그인 체크시 if (autoLoginFlag) { // console.log('success'); // cookie에 토큰 저장 if (data.access_token != undefined && data.expires_in != undefined) { // var expires_in = Math.floor(parseInt(data.expires_in)/(60*60*24)); var expDate = new Date(); expDate.setTime(expDate.getTime() + (60*60*24*365 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 1000)); // Cookies.set('accessToken', data.access_token, { path: '/'}); fn_setCookie('accessToken', data.access_token, { path: '/'}); // Cookies.set('refreshToken', data.refresh_token, { path: '/', expires: expDate }); fn_setCookie('refreshToken', data.refresh_token, { path: '/', expires: expDate }); // Cookies.set('mui', data.memUuid, { path: '/'}); fn_setCookie('mui', data.memUuid, { path: '/'}); redisNew(data.memUuid); if (data.migration === true) { authType = 'migration'; alert('마이그레이션 정보 업데이트를 위해 본인 인증을 요청합니다.'); openCpPopup(); } getGoogleAnalyticsUserDetails(data.memUuid); } else { return; } } else { // cookie에 토큰 저장 if (data.access_token != undefined) { // Cookies.set('accessToken', data.access_token, { path: '/' }); fn_setCookie('accessToken', data.access_token, { path: '/' }); // Cookies.set('refreshToken', data.refresh_token, { path: '/'}); fn_setCookie('refreshToken', data.refresh_token, { path: '/'}); // Cookies.set('mui', data.memUuid, { path: '/'}); fn_setCookie('mui', data.memUuid, { path: '/'}); redisNew(data.memUuid); if (data.migration === true) { authType = 'migration'; alert('마이그레이션 정보 업데이트를 위해 본인 인증을 요청합니다.'); openCpPopup(); } getGoogleAnalyticsUserDetails(data.memUuid); // getUserMe(false); } } fn_googleAnalyticsLogin(autoLoginFlag, "email"); // 로그인 실패 label을 blind 처리 $('#loginFailText').addClass('blind'); signUpType = 'None'; $('#loginId').val(''); $('#loginPassword').val(''); $('#inputCaptcha').val(); $('.popup-login').closePopup(); if (data.migration !== true) { if(loginReplaceUrl!==''){ location.replace(loginReplaceUrl); }else{ location.reload(); } } } }, error: function (req, stat, err) { // console.log(err); // console.log('로그인 실패'); } }); // ajax } var captchaKey; var captchaType = 'image'; function refreshCaptcha(type) { if (type !== undefined && type !== null) { captchaType = type; if (type == 'image') { $('#captchaArea .type-image').show(); $('#captchaArea .type-sound').hide(); } else { $('#captchaArea .type-sound').show(); $('#captchaArea .type-image').hide(); } } $.ajax({ url: '/auth/captcha/refresh?type=' + captchaType, type: 'GET', contentType: 'application/json', timeout: 30000, success: function (data) { // console.log(data); // captcha $('#captchaArea').show(); if (captchaType == 'image') { $('#imgCaptcha').attr('src', data.image); } else { $('#audioCaptcha').attr('src', data.sound); } captchaKey = data.key; }, error: function (req, stat, err) { // console.log(err); } }); // ajax } function onClickSignUp() { authType = 'enroll'; openCpPopup(); } function redisNew(arg){ if(Boolean(arg)){ $.ajax({ url: '/regRedisNew?key=subscription-detail-list&date=60&id='+arg, type: 'GET', contentType: 'application/json', timeout: 30000, success: function (data) {}, error: function (req, stat, err) {} }); // ajax } } function getGoogleAnalyticsUserDetails(memUuid){ $.ajax({ url: '/google-analytics/user-details', type: 'POST', data: JSON.stringify({ memUuid : memUuid }), contentType: 'application/json', async: false, success: function () { }, error: function () { } }); } //로그인 성공시 ga4 function fn_googleAnalyticsLogin(autoLoginFlag, type){ var loginKeep = autoLoginFlag ? 'yes' : 'no'; var referer = document.referrer; if (type === "Kakao"){ type = "카카오"; } else if (type === "Naver") { type = "네이버"; } else if (type === "Facebook") { type = "페이스북"; } else if (type === "email") { type = "이메일"; } else { type = ""; } window.dataLayer = window.dataLayer || []; $.ajax({ type: "GET", url: "/google-analytics/user-details-decrypt", async: false, error: function() { //console.log('통신실패!!'); }, success: function(ga4LoginData) { dataLayer.push({ 'event': 'login', // # 로그인 'user_id': ga4LoginData.user_id, 'gender': ga4LoginData.gender, 'yob': ga4LoginData.yob, 'login_type': type, 'login_keep': loginKeep, // # 로그인 유지 여부 'page_referrer': referer, // # 로그인 직전 페이지 'join_date': ga4LoginData.join_date, // # 회원가입 날짜 user_details 'subs': ga4LoginData.subs, // # 구독 개수 user_details 'pan_setting': ga4LoginData.pan_setting, // # 주제판 설정 개수 user_details }); }, complete: function() { } }); } </script> <script> // 여기서 authController에서 authSErvice에서 정보 받아오기 function setSnsSignInInfo(type, token, userId) { signUpType = type; // sns 정보를 받아오는 ajax $.ajax({ url: '/auth/sns-info', method: "POST", contentType: 'application/json', data: JSON.stringify({ type: type, token: token, userId: userId }), async : false }).success(function (response) { var snsUserInfo = response; if (type === "Kakao") { if (snsUserInfo.id !== undefined && snsUserInfo.id !== '') { snsUserSignUpDto.id = snsUserInfo.id; if (snsUserInfo.kakao_account.email !== undefined) { snsUserSignUpDto.email = snsUserInfo.kakao_account.email; } checkExistUser(); } else { alert('Kakao 회원가입 error'); } } else if (type === "Naver") { if (snsUserInfo.response.id !== undefined && snsUserInfo.response.id !== '') { snsUserSignUpDto.id = snsUserInfo.response.id; if (snsUserInfo.response.email !== undefined) { snsUserSignUpDto.email = snsUserInfo.response.email; } if (snsUserInfo.response.gender !== undefined) { snsUserSignUpDto.sex = snsUserInfo.response.gender; } if (snsUserInfo.response.name !== undefined) { snsUserSignUpDto.name = snsUserInfo.response.name; } checkExistUser(); } else { alert('Naver 회원가입 error'); } } else if (type === "Facebook") { if (snsUserInfo.id !== undefined && snsUserInfo.id !== '') { snsUserSignUpDto.id = snsUserInfo.id; if (snsUserInfo.gender !== undefined) { if (snsUserInfo.gender === 'male') { snsUserSignUpDto.sex = "Male"; } else { snsUserSignUpDto.sex = "Female"; } } if (snsUserInfo.birthday !== undefined) { var birthdayList = snsUserInfo.birthday.split('/'); var birthday = birthdayList [2] + birthdayList[0] + birthdayList[1]; snsUserSignUpDto.birthDay = birthday; } if (snsUserInfo.email !== undefined) { snsUserSignUpDto.email = snsUserInfo.email; } if (snsUserInfo.last_name !== undefined && snsUserInfo.first_name !== undefined) { snsUserSignUpDto.name = snsUserInfo.last_name + snsUserInfo.first_name; } checkExistUser(); } else { alert('Facebook" 회원가입 error') } } else { alert('sns 회원가입 error'); } }) .fail(function (error) { alert('sns 회원가입 error'); $('.popup-alert').closePopup(); }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux sns일 경우 중복 확인 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function checkExistUser() { $.ajax({ type: "GET", url: '/users/exist?memId=' + snsUserSignUpDto.id + '&isSns=Y', cache: false, async : false }).success(function (response) { // console.log('본인 인증 회원가입 -> 이메일 중복 확인'); // console.log(JSON.parse(response)); // console.log(snsUserSignUpDto); var flag = response.flag; // 아이디 중복 아닐시 if (!flag) { $('.popup-alert').closePopup(); $('.popup-medium.join-form.agree').openPopup(); // 아이디 중복시 } else { $.ajax({ url: '/auth/sign-in/sns', type: 'POST', data: JSON.stringify({ userId: snsUserSignUpDto.id, password: snsUserSignUpDto.id + "@" + signUpType, autoLoginFlag: autoLoginFlag }), contentType: 'application/json', timeout: 30000, success: function (data) { // 로그인 성공했을 경우 // console.log('SNS 로그인 -> 성공'); // console.log(data); if (autoLoginFlag) { if (data.access_token !== undefined && data.expires_in !== undefined) { // var expires_in = Math.floor(parseInt(data.expires_in)/(60*60*24)); var expDate = new Date(); expDate.setTime(expDate.getTime() + (60*60*24*365 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 1000)); // Cookies.set('accessToken', data.access_token, { path: '/'}); fn_setCookie('accessToken', data.access_token, { path: '/'}); // Cookies.set('refreshToken', data.refresh_token, { path: '/', expires: expDate }); fn_setCookie('refreshToken', data.refresh_token, { path: '/', expires: expDate }); // Cookies.set('mui', data.memUuid, { path: '/'}); fn_setCookie('mui', data.memUuid, { path: '/'}); redisNew(data.memUuid); getGoogleAnalyticsUserDetails(data.memUuid); } else { alert('로그인 에러'); return; } } else { if (data.access_token !== undefined) { // Cookies.set('accessToken', data.access_token, { path: '/'}); fn_setCookie('accessToken', data.access_token, { path: '/'}); // Cookies.set('refreshToken', data.refresh_token, { path: '/' }); fn_setCookie('refreshToken', data.refresh_token, { path: '/' }); // Cookies.set('mui', data.memUuid, { path: '/'}); fn_setCookie('mui', data.memUuid, { path: '/'}); redisNew(data.memUuid); getGoogleAnalyticsUserDetails(data.memUuid); } else { alert('로그인 에러'); return; } } fn_googleAnalyticsLogin(autoLoginFlag, signUpType); if(loginReplaceUrl!==''){ location.replace(loginReplaceUrl); }else{ location.reload(); } }, error: function (req, stat, err) { // console.log('SNS 로그인 -> 에러'); // console.log(err); } }); // ajax // get user me } }).fail(function (error) { // console.log('SNS 회원가입 -> 아이디 존재 체크 에러'); // console.log(JSON.parse(error.responseText)); }); } // 로그인 팝업을 여는 함수 function openSignInPopUp(prms) { prms = prms || {}; if(!!prms && !!prms.replaceUrl && prms.replaceUrl !== ''){ loginReplaceUrl = prms.replaceUrl; } $('.popup-login').openPopup(); stopRefreshPage(); } // 아이디 찾기 팝업을 여는 함수 function onClickFindId() { $('.popup-login').closePopup(); $('.popup-alert').closePopup(); $('#find-id-popup').openPopup(); } // 비밀번호 찾기 팝업을 여는 함수 function onClickFindPassword() { $('.popup-login').closePopup(); $('#find-id-popup').closePopup(); $('#find-password-popup').openPopup(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 엔터 클릭시 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ $('#loginId').keydown(function (key) { //키가 13이면 실행 (엔터는 13) if (key.keyCode == 13){ onClickSignIn(); } }); /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 엔터 클릭시 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ $('#loginPassword').keydown(function (key) { //키가 13이면 실행 (엔터는 13) if (key.keyCode == 13){ onClickSignIn(); } }); </script> <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script> <script type='text/javascript'> //<![CDATA[ // 사용할 앱의 JavaScript 키를 설정해 주세요. Kakao.init('e62df5186f0758def8f14c53e64d7b9d'); function onClickKakaoLogin() { // 로그인 창을 띄웁니다. Kakao.Auth.login({ success: function (response) { // console.log("카카오 로그인"); // console.log(response); // console.log(response.access_token); setSnsSignInInfo('Kakao', response.access_token, ""); }, fail: function (err) { alert(JSON.stringify(err)); } }); }; //]]> </script> <script type="text/javascript" src="/js/lib/naverlogin_implicit_1.0.3.js" charset="utf-8"></script> <script type="text/javascript"> var naver_id_login = new naver_id_login('Xdv40OqMAaGyFqokdQFs', 'https://www.hankookilbo.com/auth/naver'); var state = naver_id_login.getUniqState(); var naverEmail = ''; naver_id_login.setButton("white", 10, 40); naver_id_login.setDomain('https://www.hankookilbo.com'); naver_id_login.setState(state); naver_id_login.setPopup(); naver_id_login.init_naver_id_login(); </script> <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v6.0&appId=1241983985912870&autoLogAppEvents=1"></script> <script> function onClickFBLogin() { FB.login(function (response) { // console.log("페이스북 로그인"); // console.log(response.authResponse.accessToken); setSnsSignInInfo("Facebook", response.authResponse.accessToken, response.authResponse.userID); }, {scope: 'public_profile,email'}); } </script> <script src="/js/split/findAccountForm.js"></script> <!-- dimmed --> <div class="dimmed"></div> <!-- //dimmed --> <!-- popup-alert join-form / 2023-06-12 회원가입 개선 : .popup-renew2023 추가 --> <div class="popup-alert popup-medium join-form agree popup-renew2023"> <!-- .popup-header --> <div class="popup-header"> <div class="logo"></div> <a href="#link" class="btn-close" onclick="$('.agree').closePopup();"></a> <strong class="tit">약관동의</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <form> <!-- .rowner .total-field --> <div class="rowner total-field"> <input type="checkbox" name="totalAgree" id="totalAgree" class="total-agree"> <label for="totalAgree">전체동의 <span class="optional">(선택포함)</span></label> </div> <!-- // .rowner .total-field --> <!-- .rowner --> <div class="rowner access-term"> <div class="agree-input"> <input type="checkbox" id="accessTerm" class="partial-switch required"> <label for="accessTerm">한국일보 이용약관 <span class="required">(필수)</span></label> <!-- 2023-06-12 회원가입 개선 : .agree-input__right 추가 --> <div class="agree-input__right"> <!-- <button type="button" class="btn-toggle-term" onclick="toggleSlide(this,term01, 400)" data-toggle-slide="term01">내용보기</button> --> <a href="https://company.hankookilbo.com/etc/terms_conditions.aspx" target="_blank" class="btn-term-link">내용보기</a> </div> <!-- //2023-06-12 회원가입 개선 : .agree-input__right 추가 --> </div> </div> <!-- // .rowner --> <!-- .rowner --> <div class="rowner personal-info"> <div class="agree-input"> <input type="checkbox" id="personalInfo" class="partial-switch required"> <label for="personalInfo">개인정보처리 방침 <span class="required">(필수)</span></label> <!-- 2023-06-12 회원가입 개선 : .agree-input__right 추가 --> <div class="agree-input__right"> <a href="https://company.hankookilbo.com/etc/privacy_policy.aspx" target="_blank" class="btn-term-link">내용보기</a> </div> <!-- //2023-06-12 회원가입 개선 : .agree-input__right 추가 --> </div> </div> <!-- // .rowner --> <!-- .rowner .event-promotion --> <div class="rowner event-promotion"> <!-- 2023-06-12 회원가입 개선 : .agree-input 추가 --> <div class="agree-input"> <!-- 2023-06-12 회원가입 개선 : 기존 p 태그에 삭제 <p> 이벤트/프로모션 등 정보 수신 동의 <span class="optional">(선택)</span> </p> --> <!-- //2023-06-12 회원가입 개선 : 기존 p 태그에 .agree-input__tit추가 --> <!-- 2023-06-12 회원가입 개선 : .agree-input 추가 --> <div class="agree-input"> <input type="checkbox" id="eventAgree" class="partial-switch required"> <label for="eventAgree">이벤트/프로모션 등 정보 수신 동의 <span class="optional">(선택)</span></label> </div> <!-- <div class="agree-input__desc"> 한국일보가 제공하는 다양한 형태의 이벤트 및 행사(포럼, 대회, 강연, 시상, 수상, 구독 등) 관련한 참여 정보를 추천·안내 </div> --> <!-- //2023-06-12 회원가입 개선 .agree-input 추가 --> <ul class="agree-list"> <li> <input type="checkbox" id="toMail" name="toMail" class="to-mail partial-switch"> <label for="toMail">이메일</label> </li> <li> <input type="checkbox" id="toSMS" name="toSMS" class="to-sms partial-switch"> <label for="toSMS">SMS</label> </li> <!-- 회원가입 개선 : 뉴스레터 삭제 <li> <input type="checkbox" id="toNewsLetter" name="toNewsLetter" class="to-news-letter partial-switch"> <label for="toNewsLetter">뉴스레터</label> </li> --> </ul> <!-- 2023-06-12 회원가입 개선 : .agree-input__right 추가 --> <div class="agree-input__right"> <button type="button" class="btn-toggle-term" data-toggle-slide="term03">내용보기</button> </div> <!-- //2023-06-12 회원가입 개선 : .agree-input__right 추가 --> </div> <!-- //2023-06-12 회원가입 개선 : .agree-input 추가 --> <!-- 2023-06-12 회원가입 개선 : .toggle-term-cont 추가 --> <div class="toggle-slide-cont toggle-term-cont" id="term03"> <!-- 약관 동의팝업 내 커스텀 스크롤 추가시 .term-custom-scroll 추가 --> <p class="term-custom-scroll"> 한국일보가 제공하는 다양한 형태의 이벤트 및 행사(포럼, 대회, 강연, 시상, 수상, 구독 등) 관련한 참여 정보를 추천·안내 </p> <!-- //약관 동의팝업 내 커스텀 스크롤 추가시 .term-custom-scroll 추가 --> </div> <!-- //2023-06-12 회원가입 개선 : .toggle-term-cont 추가 --> </div> <!-- // .rowner .event-promotion --> <!-- 2023-06-12 회원가입 개선 : 뉴스레터추가(.rowner-newsletter) --> <div class="rowner rowner-newsletter"> <div class="agree-input"> <input type="checkbox" id="toNewsLetter" class="partial-switch required"> <label for="toNewsLetter">뉴스레터 등 추천 서비스 이용 동의 <span class="optional">(선택)</span></label> <!-- 2023-06-12 회원가입 개선 : .agree-input__right 추가 --> <div class="agree-input__right"> <button type="button" class="btn-toggle-term" data-toggle-slide="termNewsletter">내용보기</button> </div> <!-- //2023-06-12 회원가입 개선 : .agree-input__right 추가 --> </div> <!-- 2023-06-12 회원가입 개선 : .toggle-term-cont 추가 --> <div class="toggle-slide-cont toggle-term-cont" id="termNewsletter"> <p class="term-custom-scroll"> 한국일보가 회원을 위해 제공하는 뉴스레터 등 모든 뉴스 서비스(뉴스, 영상, 뉴스 서비스 기반 이벤트 및 프로모션, 새로운 포맷 콘텐츠) 등 추천·안내 </p> </div> <!-- //2023-06-12 회원가입 개선 : .toggle-term-cont 추가 --> </div> <!-- 2023-06-12 회원가입 개선 : 뉴스레터추가(.rowner-newsletter) --> <p id="required_term" class="term-warn">이용약관 및 개인정보 처리 방침은 필수 항목 입니다.</p> <p id="no_chk_event_msg" class="term-warn">선택 항목 미동의 시 뉴스 추천서비스 혹은 이벤트/행사 당첨 혜택에서 제외될 수 있습니다.</p> <button class="btn-main" onclick="onClickNext(event);">다음</button> </form> </div> <!-- // .cont --> </div> <!-- popup-alert join-form agree --> <!-- popup-alert no-account --> <div class="popup-alert no-account" style="display: none;"> <strong class="tit"> 중복 가입 확인 </strong> <div class="cont"> <p> 이미 가입된 회원입니다. </p> </div> <div class="btn-area"> <button class="btn-black font-medium" type="button" onclick="$('.no-account').closePopup();">확인</button> </div> </div> <!-- popup-alert no-account --> <!-- popup-alert access-term --> <!-- popup-alert access-term --> <!-- popup-alert user-info --> <!-- popup-alert user-info --> <!-- commonJsLoad --> <!-- // commonJsLoad --> <script> // 팝업 열기 // $('.popup-alert').openPopup(); // 팝업 닫기 // $('.popup-alert').closePopup(); </script> <!-- 2023-06-12 회원가입 개선 : 약관 토글 이벤트 추가 시작 --> <script> var agreeAll; var accessTermAgree; var userInfoAgree; var emailAgree; var smsAgree; var newsLetterAgree; function createAccordian(buttonSelector, duration) { const buttons = document.querySelectorAll(buttonSelector); buttons.forEach((button) => { button.addEventListener("click", () => { const elementId = button.dataset.toggleSlide; const element = document.getElementById(elementId); toggleSlide(button, element, duration); }); }); function toggleSlide(button, element, duration) { const slideId = element.id; const isOpen = element.dataset.isOpen === "true"; const isAlreadyOpen = element.classList.contains("slide-open"); if (!isOpen) { const openSlides = document.querySelectorAll(".slide-open"); openSlides.forEach((slide) => { slideUp(slide, duration); const associatedButton = document.querySelector('[data-toggle-slide="' + slide.id + '"]'); if (associatedButton) { associatedButton.classList.remove("active"); } slide.dataset.isOpen = "false"; slide.classList.remove("slide-open"); }); slideDown(element, duration); element.dataset.isOpen = "true"; button.classList.add("active"); element.classList.add("slide-open"); } else { slideUp(element, duration); element.dataset.isOpen = "false"; button.classList.remove("active"); element.classList.remove("slide-open"); } } function slideDown(element, duration) { if (!element) return; const originalHeight = element.style.height; element.style.display = "block"; let start = null; const maxHeight = element.scrollHeight; function animate(timestamp) { if (!start) start = timestamp; const progress = timestamp - start; const height = Math.min((progress / duration) URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux maxHeight, maxHeight); element.style.height = height + "px"; if (progress < duration) { requestAnimationFrame(animate); } } requestAnimationFrame(animate); } function slideUp(element, duration) { if (!element) return; const maxHeight = element.scrollHeight; const originalWidth = element.style.width; element.style.width = originalWidth; let start = null; function animate(timestamp) { if (!start) start = timestamp; const progress = timestamp - start; const height = maxHeight - Math.min((progress / duration) URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux maxHeight, maxHeight); element.style.height = height + "px"; if (progress < duration) { requestAnimationFrame(animate); } else { element.style.display = "none"; } } requestAnimationFrame(animate); } } createAccordian(".btn-toggle-term", 400); // 버튼, 듀레이션 $(document).ready(function () { $('#eventAgree').on('ifChanged', function () { fn_eventCheck(); }); $('#toMail').on('ifChanged', function () { fn_eventMailSmsCheck('toMail', 'toSMS'); }); $('#toSMS').on('ifChanged', function () { fn_eventMailSmsCheck('toSMS', 'toMail'); }); $('#toNewsLetter').on('ifChanged', function () { fn_checkMailSmsNewsLetter(); }); $('#accessTerm, #personalInfo').on('ifChanged', function () { fn_requiredCheck(); }); }); // 이벤트/프로모션 등 정보수신동의 클릭시 function fn_eventCheck() { if($('#eventAgree').is(':checked')) { /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var $('#toMail').iCheck('check'); $('#toSMS').iCheck('check'); URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ $('input:checkbox[id="toMail"]').prop('checked', true); $('input:checkbox[id="toSMS"]').prop('checked', true); $('input:checkbox[id="toMail"]').closest('.icheckbox').addClass( 'checked' ); $('input:checkbox[id="toSMS"]').closest('.icheckbox').addClass( 'checked' ); } else { $('input:checkbox[id="toMail"]').closest('.icheckbox').removeClass( 'checked' ); $('input:checkbox[id="toSMS"]').closest('.icheckbox').removeClass( 'checked' ); $('input:checkbox[id="toMail"]').prop('checked', false); $('input:checkbox[id="toSMS"]').prop('checked', false); } fn_checkMailSmsNewsLetter(); } // email, sms 체크시 function fn_eventMailSmsCheck(chk1, chk2) { if ($('#' + chk1).is(':checked')) { if (!$('#eventAgree').is(':checked')) { $('input:checkbox[id="eventAgree"]').prop('checked', true); $('input:checkbox[id="eventAgree"]').closest('.icheckbox').addClass( 'checked' ); } } else { if (!$('#' + chk2).is(':checked')) { $('input:checkbox[id="eventAgree"]').closest('.icheckbox').removeClass( 'checked' ); $('input:checkbox[id="eventAgree"]').prop('checked', false); } } fn_checkMailSmsNewsLetter(); } // 이메일, sms, 뉴스레터 하나라도 체크시 텍스트 사라짐, 모두 미체크시 텍스트 보임 function fn_checkMailSmsNewsLetter() { if($('#toMail').is(':checked') || $('#toSMS').is(':checked') || $('#toNewsLetter').is(':checked')) { $('#no_chk_event_msg').addClass('blind'); } else { $('#no_chk_event_msg').removeClass('blind'); } } // 필수항목 선택시 안내텍스트 사라짐 function fn_requiredCheck() { if( $('#accessTerm').is(':checked') && $('#personalInfo').is(':checked')) { $('#required_term').addClass('blind'); } else { $('#required_term').removeClass('blind'); } } function onClickNext(event) { event.preventDefault(); agreeAll = $('input:checkbox[id="totalAgree"]').is(":checked"); accessTermAgree = $('input:checkbox[id="accessTerm"]').is(":checked"); userInfoAgree = $('input:checkbox[id="personalInfo"]').is(":checked"); emailAgree = $('input:checkbox[id="toMail"]').is(":checked"); smsAgree = $('input:checkbox[id="toSMS"]').is(":checked"); newsLetterAgree = $('input:checkbox[id="toNewsLetter"]').is(":checked"); // 전체 동의 여부 if (agreeAll) { if (signUpType === 'None') { // 전체 동의로 넘긴다? $('.popup-alert').closePopup(); $('.popup-alert.join-form.join').openPopup(); return; } else { $('.popup-alert').closePopup(); $('.popup-alert.add-nick').openPopup(); $('p.term-warn').addClass('blind'); return; } } // 이용약관 체크 했는지 여부 if (!accessTermAgree) { // $('.popup-alert.access-term').openPopup(); $('#required_term').removeClass("blind"); return; } if (!userInfoAgree) { // $('.popup-alert.user-info').openPopup(); $('#required_term').removeClass("blind"); return; } if (accessTermAgree && userInfoAgree) { if (signUpType === 'None') { // 전체 동의로 넘긴다? $('.popup-alert').closePopup(); $('.popup-alert.join-form.join').openPopup(); return; } else { $('.popup-alert').closePopup(); $('.popup-alert.add-nick').openPopup(); $('p.term-warn').addClass('blind'); return; } } $('p.term-warn').addClass('blind'); } // 개인정보 체크 했는지 여부 </script> <!-- //2023-06-12 회원가입 개선 : 약관 토글 이벤트 추가 시작 --> <!-- popup-alert join-form join --> <div class="popup-alert popup-medium join-form join"> <!-- .popup-header --> <div class="popup-header"> <div class="logo"></div> <a href="javascript:;" class="btn-close" onclick="$('.join').closePopup(); refreshPage(); agreeReset();"></a> <strong class="tit">회원가입</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- .write-list --> <ul class="write-list"> <li class="confirm-field"> <div class="title"> <label for="userId">아이디(이메일)</label> </div> <div class="inn"> <input type="text" name="userId" id="userId" placeholder="아이디" onchange="onChangeEmail(this)"> <a href="javascript:;" class="btn-empty-main" onclick="onClickCheckEmailDuplicated()">중복확인</a> <p class="guide-msg blind" id="sign-up-email-guide-msg">사용 가능한 아이디 입니다.</p> </div> </li> <li> <div class="title"> <label for="userPwd">비밀번호</label> </div> <div class="inn"> <input type="password" name="userPwd" id="userPwd" placeholder="8~16자 영문 대소문자,숫자,특수문자" maxlength="16" autocomplete="off"/> </div> </li> <li> <div class="title"> <label for="userPwdChk">비밀번호 확인</label> </div> <div class="inn"> <input type="password" name="userPwdChk" id="userPwdChk" maxlength="16" autocomplete="off"/> <div class="guide-msg warn blind" id="sign-up-password-guide-msg">3~10자 영문 대소문자, 숫자 및 특수문자를 사용해주세요. </div> </div> </li> </ul> <!-- // .write-list --> <!-- .name-list --> <ul class="name-list"> <li class="user-name"> <div class="title"> <p>이름</p> </div> <div class="inn"> <p id="username"></p> </div> </li> <li class="confirm-field"> <div class="title"> <label for="userNickname">필명</label> </div> <div class="inn"> <input type="text" id="userNickname" placeholder="3~10자 한글, 영문 대소문자, 숫자" onchange="onChangePenName(this)"> <a href="javascript:;" class="btn-empty-main" onclick="onClickCheckPennameDuplicated()">중복확인</a> <p class="exp-text">댓글 작성 시 필명이 노출 됩니다.</p> <p class="guide-msg blind" id="sign-up-pen-name-guide-msg">사용 가능한 필명입니다.</p> </div> </li> </ul> <!-- // .name-list --> <button class="btn-main" type="button" onclick="submit(event); return false;">확인</button> </div> <!-- // .cont --> </div> <!-- popup-alert join-form join --> <!-- popup-alert add-nick --> <div class="popup-alert add-nick"> <!-- .popup-header --> <div class="popup-header"> <a href="javascript:;" class="btn-close" onclick="$('.add-nick').closePopup(); agreeReset();"></a> <strong class="tit">필명</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- .info-list --> <ul class="info-list"> <li class="confirm-field"> <div class="inn"> <input type="text" id="userNick" name="userNick" placeholder="3~10자 한글, 영문 대소문자, 숫자" maxlength="10" onchange="onChangeSnsPenName(this)"> <a href="javascript:;" class="btn-empty-main" onclick="onClickCheckSnsPennameDuplicated()">중복확인</a> <p class="exp-text">댓글 작성 시 필명이 노출됩니다.</p> <p class="guide-msg blind" id="social-sign-up-pen-name-guide-msg">사용 가능한 필명입니다.</p> </div> </li> </ul> <!-- // .info-list --> <button class="btn-main" onClick="submitSocial();">확인</button> </div> <!-- // .cont --> </div> <!-- popup-alert add-nick --> <!-- popup-alert no-account --> <div class="popup-alert no-account"> <strong class="tit"> 회원가입 완료 </strong> <div class="cont"> <p> 한국일보 회원가입이 완료 되었습니다. </p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('.no-account').closePopup(); $('.popup-login').openPopup(); agreeReset();">확인</button> </div> </div> <!-- popup-alert no-account --> <script> var email = '', password = '', passwordConfirm = '', penName = '', snsPenName = ''; var isValidEmail, isValidPenName, isValidPassword = false; var emailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/; var penNameRegex = /^[ㄱ-ㅎ|가-힣|a-z|A-Z|0-9|_ \*]{3,10}$/; var passwordRegex = /^(?=.*[A-Za-z])(?=.*\d).{8,16}$/; var passwordRegex2 = /^(?=.*[A-Za-z])(?=.*\d).{8,16}$/; var emailGuideMessage = $('#sign-up-email-guide-msg'); var passwordGuideMessage = $('#sign-up-password-guide-msg'); var penNameGuideMessage = $('#sign-up-pen-name-guide-msg'); var socialPenNameGuideMessage = $('#social-sign-up-pen-name-guide-msg'); function onChangeEmail(emailInput) { email = emailInput.value; if (!emailRegex.test(email)) { isValidEmail = false; emailGuideMessage.text('이메일 형식의 아이디를 사용해주세요.'); emailGuideMessage.removeClass('blind').addClass('warn'); } } $("#userPwd").on('keyup', function (input) { // comment = value; password = input.target.value; // 비밀번호 정규식이 일치하지 않으면 if (!passwordRegex.test(password) && !passwordRegex2.test(password)) { passwordGuideMessage.text('8~16자 영문 대소문자, 숫자 및 특수문자를 사용해주세요'); passwordGuideMessage.removeClass('blind').addClass('warn'); isValidPassword = false; // 비밀번호가 일치하지 않으면 } else if (password !== passwordConfirm) { passwordGuideMessage.text('비밀번호가 일치하지 않습니다.'); passwordGuideMessage.removeClass('blind').addClass('warn'); isValidPassword = false; // 비밀번호가 일치하면 } else { passwordGuideMessage.text('비밀번호가 일치합니다.'); passwordGuideMessage.removeClass('blind warn'); isValidPassword = true; } // your code here }); $("#userPwdChk").on('keyup', function (input) { passwordConfirm = input.target.value; // 비밀번호 정규식이 일치하지 않으면 if (!passwordRegex.test(passwordConfirm) && !passwordRegex2.test(passwordConfirm)) { passwordGuideMessage.text('8~16자 영문 대소문자, 숫자 및 특수문자를 사용해주세요'); passwordGuideMessage.removeClass('blind').addClass('warn'); isValidPassword = false; // 비밀번호가 일치하지 않으면 } else if (password !== passwordConfirm) { passwordGuideMessage.text('비밀번호가 일치하지 않습니다.'); passwordGuideMessage.removeClass('blind').addClass('warn'); isValidPassword = false; // 비밀번호가 일치하면 } else { passwordGuideMessage.text('비밀번호가 일치합니다.'); passwordGuideMessage.removeClass('blind warn'); isValidPassword = true; } }); function onChangePenName(penNameInput) { isValidPenName = false; penName = penNameInput.value; } function onChangeSnsPenName(penNameInput) { snsPenName = penNameInput.value; } $('#userId').on('keyup', function(input) { isValidEmail = false; }); // 이메일 중복체크 function onClickCheckEmailDuplicated() { // 이메일 regex 체크 if (!emailRegex.test(email)) { isValidEmail = false; emailGuideMessage.text('이메일 형식의 아이디를 사용해주세요.'); emailGuideMessage.removeClass('blind').addClass('warn'); return; } $.ajax({ type: "GET", url: '/users/exist?memId=' + email, cache: false, async : false }).success(function (response) { // console.log('본인 인증 회원가입 -> 이메일 중복 확인'); var flag = response.flag; // 아이디 중복 아닐시 if (!flag) { isValidEmail = true; emailGuideMessage.text('사용 가능한 아이디입니다.'); emailGuideMessage.removeClass('blind').removeClass('warn'); } else { // 아이디 중복시 isValidEmail = false; emailGuideMessage.text('이미 등록된 아이디입니다.'); emailGuideMessage.removeClass('blind').addClass('warn'); } }).fail(function (error) { // console.log('본인 인증 회원가입 에러 -> 이메일 중복 확인'); // console.log(JSON.parse(error.responseText)); }); } // 필명 중복체크 function onClickCheckPennameDuplicated() { $('.exp-text').addClass('blind'); // 필명 정규식이 일치하지 않을 경우 if (!penNameRegex.test(penName)) { penNameGuideMessage.text('3~10자 한글, 영문 대소문자, 숫자를 사용해주세요'); penNameGuideMessage.removeClass('blind').addClass('warn'); socialPenNameGuideMessage.text('3~10자 한글, 영문 대소문자, 숫자를 사용해주세요'); socialPenNameGuideMessage.removeClass('blind').addClass('warn'); isValidPenName = false; return; } // 필명 정규식이 일치할 경우 // 필명 중복 체크 api 요청해서 분기처리 checkPenNameDuplicated(penName); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 본인인증 필명 중복 체크 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function checkPenNameDuplicated(penName) { $.ajax({ type: "GET", url: '/users/exist?memPenName=' + encodeURIComponent(penName), cache: false, async : false }).success(function (response) { // Do something // console.log('SNS 회원가입 -> 필명 중복 확인'); var flag = response.flag; // 필명 중복 아닐시 if (!flag) { socialPenNameGuideMessage.text('사용 가능한 필명입니다.'); socialPenNameGuideMessage.removeClass('blind warn'); penNameGuideMessage.text('사용 가능한 필명입니다.'); penNameGuideMessage.removeClass('blind warn'); isValidPenName = true; } else { // 필명 중복시 socialPenNameGuideMessage.text('이미 등록된 필명입니다.'); socialPenNameGuideMessage.removeClass('blind').addClass('warn'); penNameGuideMessage.text('이미 등록된 필명입니다.'); penNameGuideMessage.removeClass('blind').addClass('warn'); isValidPenName = false; } }).fail(function (error) { // console.log('SNS 회원가입 에러 -> 필명 중복 확인'); // console.log(JSON.parse(error.responseText)); }); } // sns 필명 중복체크 function onClickCheckSnsPennameDuplicated() { $('.exp-text').addClass('blind'); // 필명 정규식이 일치하지 않을 경우 if (!penNameRegex.test(snsPenName)) { socialPenNameGuideMessage.text('3~10자 한글, 영문 대소문자, 숫자를 사용해주세요'); socialPenNameGuideMessage.removeClass('blind').addClass('warn'); isValidPenName = false; return; } // 필명 정규식이 일치할 경우 checkPenNameDuplicated(snsPenName); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 본인인증 회원가입 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function submit(event) { event.preventDefault(); event.stopImmediatePropagation(); let referrer = document.referrer; // 이메일 검증 if (!isValidEmail) { emailGuideMessage.text('이메일 중복확인을 진행해주세요.'); emailGuideMessage.removeClass('blind'); return; } // 필명 검증 if (!isValidPenName) { penNameGuideMessage.text('필명 중복확인을 진행해주세요.'); penNameGuideMessage.removeClass('blind'); socialPenNameGuideMessage.text('필명 중복확인을 진행해주세요.'); socialPenNameGuideMessage.removeClass('blind'); return; } // 비밀번호 검증 if (!isValidPassword) { return; } $.ajax({ url: '/auth/sign-up', method: "POST", contentType: 'application/json', data: JSON.stringify({ memId: email, memEmail: email, memPw: password, memPenName: penName, snsDiv: signUpType, provisionAgree: 'Y', privacyAgree: 'Y', eventAgreeEmail: emailAgree ? 'Y' : 'N', eventSmsAgree: smsAgree ? 'Y' : 'N', nLetterAgree: newsLetterAgree ? 'Y' : 'N', encData: encData }), async : false }).success(function (response) { $('.popup-alert').closePopup(); if (response.flag) { //GA4 - 회원가입 fn_googleAnalyticsSignup(response.user_id, response.gender, response.yob, referrer, response.join_date); $('.popup-alert.no-account').openPopup(); } else { alert('회원가입 실패'); } }).fail(function (err) { }).complete(function () { reset(); agreeReset(); refreshPage(); }) // Do something } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux SNS 회원가입 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function submitSocial() { if (!isValidPenName) { socialPenNameGuideMessage.text('필명 중복확인을 진행해주세요.'); socialPenNameGuideMessage.removeClass('blind'); return; } let referrer = document.referrer; $.ajax({ url: '/auth/sign-up', method: "POST", contentType: 'application/json', data: JSON.stringify({ memId: snsUserSignUpDto.id, memPw: snsUserSignUpDto.id + "@" + signUpType, memName: snsUserSignUpDto.name === '' ? '' : snsUserSignUpDto.name, memBirthYmd: snsUserSignUpDto.birthDay, memPenName: snsPenName, memEmail: snsUserSignUpDto.email, snsDiv: signUpType, memSex: snsUserSignUpDto.sex, provisionAgree: 'Y', privacyAgree: 'Y', eventAgreeEmail: emailAgree ? 'Y' : 'N', eventSmsAgree: smsAgree ? 'Y' : 'N', nLetterAgree: newsLetterAgree ? 'Y' : 'N' }), async : false }).success(function (response) { $('.popup-alert').closePopup(); if (response.flag) { //GA4 - 회원가입 fn_googleAnalyticsSignup(response.user_id, response.gender, response.yob, referrer, response.join_date); $('.popup-alert.no-account').openPopup(); } else { alert('회원가입 실패'); } }).fail(function (err) { }).complete(function () { reset(); agreeReset(); refreshPage(); }) } function reset() { $('#userNick').val(""); $('#userNickname').val(""); email = ''; password = ''; passwordConfirm = ''; penName = ''; snsPenName = ''; isValidEmail = false; isValidPenName = false; } function agreeReset() { $('.icheckbox').removeClass('checked'); $('#social-sign-up-pen-name-guide-msg').addClass('blind'); $('input:checkbox[id="totalAgree"]').prop('checked', false); $('input:checkbox[id="accessTerm"]').prop('checked', false); $('input:checkbox[id="personalInfo"]').prop('checked', false); $('input:checkbox[id="toMail"]').prop('checked', false); $('input:checkbox[id="toSMS"]').prop('checked', false); $('input:checkbox[id="toNewsLetter"]').prop('checked', false); snsUserSignUpDto.id = ''; snsUserSignUpDto.email = ''; snsUserSignUpDto.sex = ''; snsUserSignUpDto.birthDay = ''; snsUserSignUpDto.name = ''; } //GA4 회원가입성공시(web - Nice, SNS) function fn_googleAnalyticsSignup(userId, gender, yob, referrer, joinDate) { window.dataLayer = window.dataLayer || []; dataLayer.push({ 'event': 'sign_up', // # 회원가입 'user_id': userId, // # 사용자 아이디 'gender': gender, // # 사용자 성별 'yob': yob, // # 사용자 연령 'page_referrer': referrer, // # 회원가입 직전 페이지 'join_date': joinDate, // # 회원가입 날짜 }); } </script> <script src="/js/split/userAgree.js"></script> <!-- popup-alert user-info --> <script language='javascript'> var encData; $.ajax({ type: "GET", url: '/auth/cp/data' }).success(function (response) { $('form input[name="EncodeData"]').val(response.data); }); /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux Nice 본인 인증 팝업 오픈 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function openCpPopup() { window.open('', 'popupChk', 'width=500, height=550, top=100, left=100, fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=yes, location=no, scrollbar=no'); document.form_chk.action = "https://nice.checkplus.co.kr/CheckPlusSafeModel/checkplus.cb"; document.form_chk.target = "popupChk"; document.form_chk.submit(); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 본인 인증 성공시 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux @param encData URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function cpSuccess(data) { encData = data; if (authType === 'migration') { $.ajax({ type: "PATCH", url: '/users/migration?encData=' + encodeURIComponent(encData) }).success(function (response) { if (response === true) { alert('마이그레이션이 완료되었습니다.'); location.reload(); } }); } else { // 중복 가입인지 아닌지 체크해서 분기 처리하는 함수 checkExistUserNice(encData); } } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 본인인증 회원 중복체크 URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ function checkExistUserNice(encData) { $.ajax({ type: "GET", url: '/users/exist?encData=' + encodeURIComponent(encData), cache: false, async : false }).success(function (response) { var flag = response.flag; if (flag) { // 중복이면 이미 가입된 회원 // 회원가입일 경우 if (authType === 'enroll') { $('.popup-alert').closePopup(); $('#sign-up-duplication-alert').openPopup(); // niceVeryfiyInfo = null; // 아이디 찾기일 경우 } else if (authType === 'idfind') { $.ajax({ type: "GET", url: '/users/find-id?encData=' + encodeURIComponent(encData), cache: false, async : false }).success(function (response) { // console.log(response); // 사용자가 있으면 if (response !== null) { $('.popup-alert').closePopup(); $('#find-id-guide-text').text(response.memName + "/" + response.mobile + "으로 찾은 아이디입니다."); $('#find-id-id-text').text(response.memId); $('#find-id-result-popup').closePopup(); $('#find-id-result-popup').openPopup(); // 사용자가 없으면 } else { $('.popup-alert').closePopup(); ('#find-id-no-account-popup').openPopup(); } }).fail(function (response) { // console.log('아이디 찾기 에러') }); } else if (authType === 'pwfind') { $('#find-password-change-password-popup').openPopup(); } else if (authType === 'pwchange') { $('#my-page-edit-pw-popup').openPopup(); } else if (authType === 'pennamechange') { $('#my-page-edit-pen-name-popup').openPopup(); } // 본인인증으로 찾은 아이디가 없을 때 } else { // 회원가입일 경우 if (authType === 'enroll') { //만 14세 미만은 회원가입 불가 //debugger; if(parseInt(response.americanAge)<14) { //TODO - signUpType 뭐로 세팅할지 확인 필요 //signUpType = ''; $('.popup-alert').closePopup(); $('#sign-up-nojoin-alert').openPopup(); } else { signUpType = 'None'; $('.popup-alert').closePopup(); $('.popup-medium.join-form.agree').openPopup(); $('#username').text(response.name); } // 아이디 찾기일 경우 } else if (authType === 'idfind') { } // 중복 가입이 아니면 약관 동의 화면우 } }).fail(function (error) { // console.log('SNS 회원가입 -> 본인 중복 확인 체크 에러'); // console.log(JSON.parse(error.responseText)); }); } </script> <!-- 본인인증 서비스 팝업을 호출하기 위해서는 다음과 같은 form이 필요합니다. --> <form name="form_chk" method="post"> <input type="hidden" name="m" value="checkplusSerivce"> <!-- 필수 데이타로, 누락하시면 안됩니다. --> <input type="hidden" name="EncodeData"> <!-- 위에서 업체정보를 암호화 한 데이타입니다. --> </form> <!-- popup-alert --> <div id="sign-in-request-alert" class="popup-alert"> <strong class="tit"> 로그인 요청 </strong> <div class="cont"> <p> 로그인 한 후 이용 가능합니다. <br>로그인 하시겠습니까? </p> </div> <div class="btn-area"> <button class="btn-gray" type="button" onclick="$('.popup-alert').closePopup()">아니오</button> <button class="btn-black" type="button" onclick="$('.popup-alert').closePopup(); openSignInPopUp()">네</button> </div> </div> <!-- popup-alert --><!-- 이메일로 기사 공유하기 팝업 --> <div class="popup-alert popup-medium user-form-popup"> <!-- .popup-header --> <div class="popup-header"> <div class="logo"></div> <a href="javascript:;" class="btn-close" onclick="$('.user-form-popup').closePopup();"></a> <strong class="tit">이메일로 기사 공유하기</strong> </div> <!-- // .popup-header --> <!-- .cont --> <div class="cont"> <!-- form --> <!-- .send-mail-title --> <div class="send-mail-title"> <p class="form-group-title">보내는 기사</p> <h3 class="article-title">수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”</h3> </div> <!-- // .send-mail-title --> <!-- .form-group .column-2 --> <div class="form-group column-2"> <div class="title"> <span>받으실 분</span> </div> <div class="inn"> <label for="receiver-input">이메일</label> <div class="input-area"> <input type="text" id="receiver-input" placeholder="이메일"> <p id="receiver-guide-msg" class="exp-text">여러사람에게 보낼 경우 메일주소는 세미콜론(;)으로 구분해 주세요.<br>(최대 5개)</p> </div> </div> </div> <!-- // .form-group .column-2 --> <!-- .form-group --> <div class="form-group send-user"> <h4 class="form-group-title">보내는 분</h4> <ul class="form-list column-2"> <li> <div class="inn"> <label for="sender-name-input">이름</label> <div class="input-area"> <input type="text" name="sendUser" id="sender-name-input"> <p id="sender-name-guide-msg" class="warn blind">보내는 분의 이름을 입력해주세요.</p> </div> </div> </li> <li> <div class="inn"> <label for="sender-email-input">이메일</label> <div class="input-area"> <input type="text" name="sendEmail" id="sender-email-input"> <p id="sender-email-guide-msg" class="warn blind">올바른 이메일 형식이 아닙니다.</p> </div> </div> </li> <li> <div class="inn"> <label for="sender-ps-input">함께 보내는 메세지</label> <div class="input-area"> <textarea name="sendMsg" id="sender-ps-input"></textarea> </div> </div> </li> </ul> </div> <!-- // .form-group --> <button id="mail-send-btn" class="btn-main disabled" onclick="onClickSendMail(event)">메일 전송</button> <!-- // form --> </div> <!-- // .cont --> </div> <!-- 이메일로 기사 공유하기 팝업 --> <!-- 이메일로 기사 공유하기 완료 팝업 --> <div class="popup-alert complete-send"> <strong class="tit"> 전송 완료 </strong> <div class="cont"> <p> 기사가 메일로 전송 되었습니다. </p> </div> <div class="btn-area"> <button class="btn-black font-medium" type="button" onclick="$('.complete-send').closePopup();">확인</button> </div> </div> <!-- 이메일로 기사 공유하기 완료 팝업 --> <!-- 구독 취소하시겠습니까? 팝업 --> <div id="delete-subscription-popup" class="popup-alert cancel-subsc"> <strong class="tit"> 구독 취소 </strong> <div class="cont"> <p> 구독을 취소하시겠습니까? </p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('.cancel-subsc').closePopup();">아니오</button> <button class="btn-black font-medium" type="button" onclick="$('#delete-subscription-popup').closePopup(); subscribeTypeCheck();">네 </button> </div> </div> <!-- 구독 취소하시겠습니까? 팝업 --> <!-- 구독 유효성검사 팝업 --> <div class="popup-alert subscribe-valid" id="subscribe-valid-popup"> <strong class="tit"> 알림 </strong> <div class="cont"> <p> 해당 컨텐츠를 구독/취소 하실수 없습니다. </p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('.subscribe-valid').closePopup();">확인</button> </div> </div> <!--// 구독 유효성검사 팝업 --> <!-- 좋아요 or 싫어요 이미 선택 팝업 --> <div id="article-sympathy-exist-popup" class="popup-alert already-check"> <strong class="tit"> 중복 선택 불가 안내 </strong> <div class="cont"> <p> 이미 공감 표현을 선택하신<br> 기사입니다. 변경을 원하시면 취소<br> 후 다시 선택해주세요. </p> </div> <div class="btn-area"> <button class="btn-black font-medium" type="button" onclick="$('.already-check').closePopup();">확인</button> </div> </div> <!-- 좋아요 or 싫어요 이미 선택 팝업 --> <script> var vcaptcha_token = ''; var onCaptchaSubmit = function(token) { vcaptcha_token = token; }; function fn_onLoadCaptcha() { $('#recaptchaScript').html('<script language="javascript" src="https://www.google.com/recaptcha/api.js?onload=fn_CaptchaRender&render=explicit" />'); }; function fn_CaptchaRender() { try { grecaptcha.render('html_element', { 'sitekey' : '6LcnOI0dAAAAAEPpJjRMwkkPsa3SoNUNuFV9HHfz', 'callback' : onCaptchaSubmit }); } catch (e) {} setTimeout(function() { grecaptcha.execute(); }, 100); } function fn_captchaVal() { if (typeof (grecaptcha) != 'undefined') { if (grecaptcha.getResponse() == "") { //grecaptcha.execute(); alert("자동등록 방지를 위한 키를 생성중 입니다. 다시 시도해 주시기 바랍니다."); return false; } } var repcaptcha = grecaptcha.getResponse(); var url = '/article/member-report-captcha?repcaptcha=' + repcaptcha; $.ajax({ url: url, type: 'POST', datatype: 'json', data: repcaptcha, contentType: false, processData: false, timeout: 30000, success: function (req) { if(req.success == true) { $('.popup-report').closePopup(); //$('#report-popup-agree').openPopup(); } else { grecaptcha.execute(); alert('자동등록 방지가 감지 되었습니다. 다시 시도해 주시기 바랍니다.'); } }, error: function (req, stat, err) { // console.log('제보하기 -> 제보하기 에러'); // console.log(err); }, complete: function () { } }); } </script> <!-- .popup-alert - 제보하기 완료, --> <div class="popup-alert" id="report-popup"> <strong class="tit"> 제보하기 완료 </strong> <div class="cont"> <p>보내주신 소중한 제보는 정상적으로 <br>접수되었으며 뉴스 제작에 활용될 <br>예정입니다.</p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('#report-popup').closePopup();$('body').css({overflow: 'hidden'});">확인</button> </div> </div> <!-- .popup-alert --> <!-- .popup-alert --> <div class="popup-alert" id="report-file-error-popup"> <strong class="tit"> 업로드 불가 파일 </strong> <div class="cont"> <p>이미지, 영상, 문서, 압축 형식의 파일만 첨부 가능합니다.</p> <strong class="sub-tit">업로드 가능 파일 형식</strong> <p>jpg, jpeg, png, mp4, avi, hwp, doc, zip</p> </div> <div class="btn-area"> <button class="btn-black" type="button" onclick="$('#report-file-error-popup').closePopup();">확인</button> </div> </div> <!-- .popup-alert --> <!-- popup-report --> <div class="popup-report imp-re-1"> <button class="btn-close" onclick="$('#recaptchaScript').html(''); $('.popup-report').closePopup(); refreshPage();"> <span class="blind">닫기</span> </button> <!-- col-left --> <div class="col-left"> <div class="reporter-info-wrap"> <div class="img-box-area"> <img src="" alt=""> </div> <div class="name-box"> <p><span class="nm">강지원</span><span class="role"> 기자</span></p> <div class="dept">문화부&nbsp;문화부장</div> </div> </div> <div class="text-box-wrap"> <strong class="terms-tit type1">제보안내</strong> <!-- <p class="terms-text">한국일보는 주변의 따뜻한 미담부터 사건사고, 불편부당, 부정부패, 비리고발 까지 여러분의 소중한 제보를 기다립니다. 제보자의 신분은 한국일보 보도 준칙에 따라 철저히 보호되며, 제공하신 개인정보는 취재를 위해서만 사용됩니다. 제보방법은 홈페이지 외에도 이메일 및 페이스북을 통해 제보하실 수 있습니다.</p>--> <p class="terms-text">제보자의 신분은 한국일보 보도 준칙에 따라 철저히 보호되며, 제공하신 개인정보는 취재를 위해서만 사용됩니다.</p> <p class="terms-text sub">이메일 문의 : <span class="keyword">webmaster@hankookilbo.com</span></p> </div> <div class="text-box-wrap"> <strong class="terms-tit type2">개인정보 보호를 위한 이용자 동의사항 (필수)</strong> <p class="terms-text">개인 정보 수집 및 이용 목적 : 회사는 수집한 개인정보를 제보 내용에 관한 확인 및 처리 등의 업무를 위해 수집, 이용하고 있습니다. 수집하는 개인정보 항목 - 이름, 이메일, 전화번호</p> <div class="agree"> <label> <input type="checkbox" id="report-personal-info-agree-checkbox"> <span class="text">동의합니다.</span> </label> </div> <div class="logo"> <div class="img-box"> <img src="/images/svg/logo-gray.svg" alt="한국일보"> </div> </div> </div> </div> <!-- // col-left --> <!-- col-right --> <div class="col-right"> <strong class="popup-title">제보하기</strong> <!-- .scroll-box --> <div class="scroll-box custom-scroll"> <input type="text" class="input-text" id="report-title-input" placeholder="제목" onchange="onChangeReportTitle(this)"> <!-- edit-box --> <div class="edit-box"> <textarea class="textarea" id="reportContent" placeholder="내용" onchange="onChangeReportContent(this)"></textarea> <!-- bottom-area --> <div class="bottom-area"> <!-- list-url --> <ul class="list-url" id="report-url-list"> </ul> <!-- // list-url --> <!-- input-url --> <div class="input-url"> <input type="text" class="input-text" id="report-url-input" placeholder="관련링크"> <button type="button" class="btn-add" onclick="onClickAddUrl()"> <span class="blind">추가</span> </button> </div> <!-- // input-url --> <!-- input-url --> <div class="input-url"> <input type="text" class="input-text" placeholder="X 버튼 선택시 해당 URL 삭제" disabled> <!-- <button type="button" class="btn-add" disabled> <span class="blind">추가</span> </button> --> </div> <!-- // input-url --> <!-- file-list --> <ul class="file-list"> <li class="attach-file"> <input type="file" onclick="this.value=null;" id="attach-file" class="blind" onchange="onSelectFile(this)"> <label for="attach-file"></label> <div class="sub-text">*최대 용량 10MB</div> </li> </ul> <!-- // file-list --> </div> <!-- // bottom-area --> </div> <!-- // edit-box --> <!-- input-user-info --> <div class="input-user-info"> <input type="text" class="input-text" id="report-name-input" placeholder="이름" onchange="onChangeReporterName(this)"> <input type="text" class="input-text" id="report-mb-input" placeholder="휴대폰번호" onchange="onChangeReporterMobile(this)"> <input type="text" class="input-text" id="report-email-input" placeholder="이메일" onchange="onChangeReporterEmail(this)"> </div> <!-- // input-user-info --> <!-- terms-text --> <p class="terms-text"> 개인정보 보호를 위해 익명 제보가 가능하며 실명인증을 하지 않습니다. <br>단, 제보자 연락 및 추가 취재가 필요하신 제보자는 연락처를 정확히 기입해주시기 바랍니다. </p> <!-- // terms-text --> </div> <!-- // .scroll-box --> <!-- btn-area --> <div class="btn-area"> <button type="button" class="btn-report" onclick="onClickSubmitReportCom()";>1:1 제보하기</button> </div> <!-- // btn-area --> </div> <!-- // col-right --> </div> <!-- popup-report --> <script> var reportTitle = ""; var reportContent = ""; var agreeAll = false; var reporterName = ""; var reporterMobile = ""; var reporterEmail = ""; var urlList = []; var files = []; var totalSize = 0; // 제보하기 제목 수정 event function onChangeReportTitle(titleInput) { reportTitle = titleInput.value; } // 제보하기 내용 수정 event function onChangeReportContent(contentInput) { reportContent = contentInput.value; } // 제보하기 파일 추가 이벤트 function onSelectFile(input) { if (input.files && input.files[0]) { var reader = new FileReader(); // 파일 사이즈 체크 if (files.length === 3) { alert('파일은 3개까지 업로드 가능합니다.'); return; } if (!isAvailableFileSize(input.files[0].size)) { showFileSizePopup(); return; } // 파일 확장자 확인 및 이에 따른 rendering if (input.files[0].name.match(/.(jpg|png|jpeg)$/i)) { reader.onload = function (e) { var $uploadFile = $("<li><button onclick='onClickDeleteFile(this)' type='button' class='btn-delete'><span class='blind'>삭제</span> </button></li>"); var tempId = new Date().getTime(); var img = document.createElement('img'); img.id = 'img_' + tempId; img.style = 'width: 100px; height: 75px;'; $uploadFile.append($(img)); $uploadFile.append($("<div class='file-name'>").html(input.files[0].name)); $('.file-list').prepend($uploadFile); $("#img_" + tempId).attr('src', e.target.result); }; } else if (input.files[0].name.match(/.(mp4|avi)$/i)) { reader.onload = function (e) { var $uploadFile = $("<li class='video'><button onclick='onClickDeleteFile(this)' type='button' class='btn-delete'><span class='blind'>삭제</span> </button></li>"); $uploadFile.append($("<div class='file-name'>").html(input.files[0].name)); $('.file-list').prepend($uploadFile); }; } else if (input.files[0].name.match(/.(hwp|docx|zip|doc)$/i)) { reader.onload = function (e) { var $uploadFile = $("<li class='doc'><button onclick='onClickDeleteFile(this)' type='button' class='btn-delete'><span class='blind'>삭제</span> </button></li>"); $uploadFile.append($("<div class='file-name'>").html(input.files[0].name)); $('.file-list').prepend($uploadFile); }; } else { $('#report-file-error-popup').openPopup(); return; } reader.readAsDataURL(input.files[0]); files.unshift(input.files[0]); } } // 제보하기 제보자 이름 수정 event function onChangeReporterName(contentInput) { reporterName = contentInput.value; } // 제보하기 내용 제보자 모바일 event function onChangeReporterMobile(contentInput) { reporterMobile = contentInput.value; } // 제보하기 제보자 이메일 수정 event function onChangeReporterEmail(contentInput) { reporterEmail = contentInput.value; } // 파일 사이즈 체크 - 총 용량이 10MB보다 적어야한다. function isAvailableFileSize(size) { totalSize += size; var flag = totalSize <= 10485760; // console.log('파일 사이즈 체크 -> ' + flag); if (flag) { return flag; } else { totalSize -= size; return flag; } } // 파일 크기 문제 팝업 보여주기 function showFileSizePopup() { $('#report-popup .tit').text("업로드 용량 초과"); $('#report-popup .cont').text("10MB 이하의 파일만 첨부 가능합니다."); $('#report-popup').openPopup(); } // URL + 버튼을 눌렀을 때 function onClickAddUrl() { if (urlList.length === 3) { return; } // input의 값을 받아 url에 저장 var url = $('#report-url-input').val(); // url이 빈 값이 아니면 ul에 append if (url !== '') { urlList.push(url); var $newUrl = $("<li><button type='button' class='btn-delete' onclick='onClickDeleteUrl(this, \"" + url + "\")'><span class='blind'>삭제</span></button></li>"); $newUrl.prepend($("<a/>", {href: url, text: url})); $('#report-url-list').append($newUrl); $('#report-url-input').val(''); } } // Url 입력한 것 리스트에서 삭제하기 function onClickDeleteUrl(element, url) { $(element.parentNode).remove(); for (var i = 0; i < urlList.length; i++) { if (urlList[i] === url) { urlList.splice(i, 1); } } // console.log(urlList); } // Url 입력한 것 리스트에서 삭제하기 function onClickDeleteFile(element) { // console.log($(element).parents("li").index()); // if (files.length ) files.splice($(element).parents("li").index(), 1); $(element.parentNode).remove(); // console.log(files); } function onClickSubmitReport() { // 제목이 없음 if (reportTitle === '') { $('#report-popup .tit').text("제목 없음"); $('#report-popup .cont').text("제보 제목이 입력되지 않았습니다."); $('#report-popup').openPopup(); return; } // 내용이 없을 if (reportContent === '') { $('#report-popup .tit').text("입력 내용 없음"); $('#report-popup .cont').text("제보 내용이 입력되지 않았습니다."); $('#report-popup').openPopup(); return; } fn_captchaVal(); } // Popup에 있는 제보하기 버튼을 눌렀을 때 function onClickSubmitReportCom() { if (reportTitle === '') { $('#report-popup .tit').text("제목 없음"); $('#report-popup .cont').text("제보 제목이 입력되지 않았습니다."); $('#report-popup').openPopup(); return; } // 내용이 없을 if (reportContent === '') { $('#report-popup .tit').text("입력 내용 없음"); $('#report-popup .cont').text("제보 내용이 입력되지 않았습니다."); $('#report-popup').openPopup(); return; } agreeAll = $('input:checkbox[id="report-personal-info-agree-checkbox"]').is(":checked"); // 개인정보 동의가 안되었을 때 alert if (agreeAll === false) { $('#report-popup .tit').text("개인정보 이용 동의"); $('#report-popup .cont').text("개인정보 이용 동의는 필수 항목입니다."); $('#report-popup').openPopup(); return; } var report = { reportTitle: reportTitle, contents: reportContent, privacyCollectAgree: agreeAll, privacyUseAgree: agreeAll, privacyKeepAgree: agreeAll, reporterName: reporterName, reporterMobile: reporterMobile, reporterEmail: reporterEmail, linkUrl1: urlList[0], linkUrl2: urlList[1], linkUrl3: urlList[2], jpageUserId: 'stylo@hankookilbo.com', }; console.log(report); // console.log(report); var formData = new FormData(); formData.append("report", JSON.stringify(report)); for (var i = 0; i < files.length; i++) { formData.append("files", files[i]); } var url = '/article/member-report'; $.ajax({ url: url, type: 'POST', enctype: 'multipart/form-data', data: formData, contentType: false, processData: false, timeout: 30000, success: function (data) { // console.log('제보하기 -> 제보하기 성공'); console.log(data); if (data === true) { $('#recaptchaScript').html(''); $('.popup-report').closePopup(); //$('#report-popup-agree').closePopup(); $('#report-popup .tit').text("제보하기 완료"); $('#report-popup .cont').html("<p>보내주신 소중한 제보는 정상적으로 <br>접수되었으며 뉴스 제작에 활용될 <br>예정입니다.</p>"); $('#report-popup').openPopup(); } else if(data == '999') { //$('#report-popup-agree').closePopup(); alert('제보하기 내용이 입력되지 않았습니다.'); } else if(data == '888') { //$('#report-popup-agree').closePopup(); alert('제보하기 제목이 입력되지 않았습니다.'); } else if(data == '777') { //$('#report-popup-agree').closePopup(); alert('금지 단어가 포함 되어 있습니다.'); } else { //$('#report-popup-agree').closePopup(); alert('제보하기 에러 발생 - 다시 시도해주세요.'); } }, error: function (req, stat, err) { // console.log('제보하기 -> 제보하기 에러'); // console.log(err); }, complete: function () { // 초기화 urlList = []; $('#report-url-input').val(''); $('#report-title-input').val(''); $('#reportContent').val(''); $('#report-email-input').val(''); $('#report-name-input').val(''); $('#report-mb-input').val(''); reportTitle = ""; reportContent = ""; agreeAll = false; reporterName = ""; reporterMobile = ""; reporterEmail = ""; urlList = []; files = []; totalSize = 0; $('.file-list').html('<li class="attach-file">\n' + ' <input type="file" onclick="this.value=null;" id="attach-file" class="blind" onchange="onSelectFile(this)">\n' + ' <label for="attach-file"></label>\n' + ' <div class="sub-text">*최대 용량 10MB</div>\n' + ' </li>'); $('.list-url').html(''); $('#report-personal-info-agree-checkbox').iCheck('uncheck'); // 3분 리프레시 재가동 refreshPage(); } }); } /Applications /Library /System /Users /Volumes /bin /cores /dev /etc /home /opt /private /sbin /tmp /usr /var URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux 링크 focus 리스너 URLs aspirations concordances contextes cooccurrences dumps-text pals tableaux URLs/ aspirations/ concordances/ contextes/ cooccurrences/ dumps-text/ pals/ tableaux/ $('#report-url-input').focusout(function () { if ($(this).val() === 'https://') { $(this).val(''); } }); $('#report-url-input').focusin(function () { $(this).val('https://'); $(this).val(); }); </script> <div id="recaptchaScript"></div> <!-- .ad-banner : 970x90 --> <div class="ad-banner ad-970"> <div class="inner"> <script language="javascript" src="https://ad.hankookilbo.com/js/midas/hankookilbo/endpage_1@970x90"></script> </div> </div> <!-- // .ad-banner : 970x90 --> </div> <!-- // .container .end --> <!-- .add-more-news : newsstand --> <!-- // .add-more-news : newstand --> </div> <!-- // wrap --> <div class="img-zoomin-layer" id="img-zoomin-layer"> <div class="img-box"> <img src="" alt=""> </div> <button type="button" class="zoomin-layer-close">확대 이미지 닫기</button> </div> <script> // 이미지 로드 실패 시 처리 함수 function noImage(imgUrl) { $("#img-zoomin-layer img").attr("src", imgUrl); } // 확대 $(".img-zoomin").click(function(){ var imgUrl = $(this).prev().attr("src"); var replaceUrl = imgUrl.replace("https://newsimg-hams.hankookilbo.com/","https://newsimg.hankookilbo.com/big/"); $("#img-zoomin-layer img").attr("src", replaceUrl); // 이미지 로드 실패 시 noImage 함수 호출 $("#img-zoomin-layer img").on("error", function() { noImage(imgUrl); }); // 이미지가 로드되면 intrinsic size를 출력 $("#img-zoomin-layer img").on("load", function() { const intrinsicWidth = this.naturalWidth; const intrinsicHeight = this.naturalHeight; const aspectRatio = intrinsicWidth / intrinsicHeight; if (intrinsicWidth < 640) { //원본 가로사이즈가 640px 보다 작으면 640px $("#img-zoomin-layer .img-box").css("max-width", 640 + "px"); } else if (intrinsicWidth >= 640 && intrinsicWidth <= 1440){ //640px 이상 1440px 이하 일때 원본사이즈 $("#img-zoomin-layer .img-box").css("max-width", intrinsicWidth + "px"); } else{ $("#img-zoomin-layer .img-box").css("max-width", 1440 + "px"); //그 외 1440px (1440 보다 크면) } }); $("#img-zoomin-layer").addClass("on"); }); $(".zoomin-layer-close").click(function(){ $("#img-zoomin-layer").removeClass("on"); }); </script> <input id="articleId" type="hidden" value="A2024112616470002937"/> <input id="shoulderType" type="hidden" value=""/> <input id="shoulderId" type="hidden" value="9474"/> <input id="HerbShoulderId" type="hidden" value="L2024101511130004310"/> <input id="articleJpageId" type="hidden" value="95d9b3e2-2fb3-4d7f-84bf-379832b5d7c8"/> <input id="articleHashTagId" type="hidden" value=""/> <input id="articleTitle" type="hidden" value="수능 국어 언어와매체 44번… 평가원 “정답 이상 없어”"/> <input id="articleSection" type="hidden" value="사회"/> <input id="articleContents" type="hidden" value=" 한국교육과정평가원이 2025학년도 대학수학능력시험(수능)의 문제와 정답 이의신청에 대한 심사 결과 모두 이상이 없다고 밝혔다. 평가원은 26일 수능 정답을 확정하고 “심사 대상 69개 문항 모두 문제 및 정답에 이상 없음으로 판정했다”고 발표했다. 단일 문항으로 가장 많은 이의신청(42건)이 들어온 국어영역 선택과목인 언어와매체 44번 문항, 복수 정답 "/> <input id="articleImageUrl" type="hidden" value="https://newsimg-hams.hankookilbo.com/2024/11/26/45b8d5c1-117e-46ea-83af-23139c2076d4_t.jpg"/> <input id="serverUrl" type="hidden" value="https://www.hankookilbo.com"/> <input id="readShareUrl" type="hidden" value="https://hankookilbo.com"/> <script src="/js/ui.js?v=dca27255ef9c20d8a78e090860601127"></script> <script src="https://front.hankookilbo.com/hk-main/prod/pc/js/split.js?v=2025011300"></script> <script src="/js/hmap/hkAnalTag_hub.min.js?v=eb8f872461af89918befc4dbb1a22c16"></script> <script src="/js/hmap/hkAnalTopic.min.js?v=142d661489e2c82ecd6fd3ac8a123aa9"></script> <script> // 인풋 자동 완성 기능 때문에 fake input 생성 function offAutocomplete() { var E = $('input[type="text"][autocomplete="off"]'); for (var i = 0 ; i < E.length ; i++) { fakeInput = '<input type="text" style="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;" tabindex="-1">'; $(fakeInput).insertAfter(E[i]); } } try { var userAgent = window.navigator.userAgent; var isChrome = userAgent.indexOf('Chrome'); var isChromeMobile = userAgent.indexOf('CriOS'); if (isChrome || isChromeMobile) { offAutocomplete(); } } catch (e) { } </script> <!-- 뷰저블 스크립트 --> <script type="text/javascript"> (function(w, d, a){ w.__beusablerumclient__ = { load : function(src){ var b = d.createElement("script"); b.src = src; b.async=true; b.type = "text/javascript"; d.getElementsByTagName("head")[0].appendChild(b); } };w.__beusablerumclient__.load(a); })(window, document, "//rum.beusable.net/script/b201026e102031u720/248e300081"); </script> <div id="hkpage_success"></div> <!-- taboola 플러시 코드--> <script> window._taboola = window._taboola || []; _taboola.push({flush: true}); </script> <!-- endPage --> <script src="/js/lib/lottie.min.js"></script> <script src="https://front.hankookilbo.com/hk-main/prod/pc/js/split/endPage.js?v=2025011300"></script> <script src="/js/end-footer-script.js?ver=1.1"></script> <script src="/js/split/slickExec.js"></script> <!-- // endPage --> </body> </html>
